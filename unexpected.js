/*!
 * Copyright (c) 2013 Sune Simonsen <sune@we-knowhow.dk>
 * 
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the 'Software'), to deal in the Software without
 * restriction, including without limitation the rights to use, copy,
 * modify, merge, publish, distribute, sublicense, and/or sell copies
 * of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t=t||self).weknowhow=t.weknowhow||{},t.weknowhow.expect=e())}(this,function(){"use strict";var s="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=Math.ceil,i=Math.floor,u=function(t){return isNaN(t=+t)?0:(0<t?i:r)(t)},c=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},o=function(a){return function(t,e){var n,r,i=String(c(t)),o=u(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}},b=!0,y=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),g=e(function(t){var e=t.exports={version:"2.6.2"};"number"==typeof __e&&(__e=e)}),a=g.version,f=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},v=function(r,i,t){if(f(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},l=function(t){return"object"==typeof t?null!==t:"function"==typeof t},h=function(t){if(!l(t))throw TypeError(t+" is not an object!");return t},p=function(t){try{return!!t()}catch(t){return!0}},d=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),m=y.document,_=l(m)&&l(m.createElement),w=function(t){return _?m.createElement(t):{}},E=!d&&!p(function(){return 7!=Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a}),x=function(t,e){if(!l(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!l(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!l(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!l(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},A=Object.defineProperty,F=d?Object.defineProperty:function(t,e,n){if(h(t),e=x(e,!0),h(n),E)try{return A(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t},j={f:F},k=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},S=d?function(t,e,n){return j.f(t,e,k(1,n))}:function(t,e,n){return t[e]=n,t},C={}.hasOwnProperty,T=function(t,e){return C.call(t,e)},O="prototype",P=function(t,e,n){var r,i,o,s=t&P.F,a=t&P.G,u=t&P.S,c=t&P.P,f=t&P.B,l=t&P.W,h=a?g:g[e]||(g[e]={}),p=h[O],d=a?y:u?y[e]:(y[e]||{})[O];for(r in a&&(n=e),n)(i=!s&&d&&void 0!==d[r])&&T(h,r)||(o=i?d[r]:n[r],h[r]=a&&"function"!=typeof d[r]?n[r]:f&&i?v(o,y):l&&d[r]==o?function(r){var t=function(t,e,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(t);case 2:return new r(t,e)}return new r(t,e,n)}return r.apply(this,arguments)};return t[O]=r[O],t}(o):c&&"function"==typeof o?v(Function.call,o):o,c&&((h.virtual||(h.virtual={}))[r]=o,t&P.R&&p&&!p[r]&&S(p,r,o)))};P.F=1,P.G=2,P.S=4,P.P=8,P.B=16,P.W=32,P.U=64,P.R=128;var M=P,D=S,R={},I={}.toString,B=function(t){return I.call(t).slice(8,-1)},L=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?t.split(""):Object(t)},N=function(t){return L(c(t))},U=Math.min,z=function(t){return 0<t?U(u(t),9007199254740991):0},q=Math.max,H=Math.min,K=function(t,e){return(t=u(t))<0?q(t+e,0):H(t,e)},$=function(a){return function(t,e,n){var r,i=N(t),o=z(i.length),s=K(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}},W=e(function(t){var e="__core-js_shared__",n=y[e]||(y[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:g.version,mode:b?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),Y=0,V=Math.random(),J=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Y+V).toString(36))},Q=W("keys"),G=function(t){return Q[t]||(Q[t]=J(t))},X=$(!1),Z=G("IE_PROTO"),tt=function(t,e){var n,r=N(t),i=0,o=[];for(n in r)n!=Z&&T(r,n)&&o.push(n);for(;e.length>i;)T(r,n=e[i++])&&(~X(o,n)||o.push(n));return o},et="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),nt=Object.keys||function(t){return tt(t,et)},rt=d?Object.defineProperties:function(t,e){h(t);for(var n,r=nt(e),i=r.length,o=0;o<i;)j.f(t,n=r[o++],e[n]);return t},it=y.document,ot=it&&it.documentElement,st=G("IE_PROTO"),at=function(){},ut="prototype",ct=function(){var t,e=w("iframe"),n=et.length;for(e.style.display="none",ot.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ct=t.F;n--;)delete ct[ut][et[n]];return ct()},ft=Object.create||function(t,e){var n;return null!==t?(at[ut]=h(t),n=new at,at[ut]=null,n[st]=t):n=ct(),void 0===e?n:rt(n,e)},lt=e(function(t){var e=W("wks"),n=y.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:J)("Symbol."+t))}).store=e}),ht=j.f,pt=lt("toStringTag"),dt=function(t,e,n){t&&!T(t=n?t:t.prototype,pt)&&ht(t,pt,{configurable:!0,value:e})},yt={};S(yt,lt("iterator"),function(){return this});var gt=function(t,e,n){t.prototype=ft(yt,{next:k(1,n)}),dt(t,e+" Iterator")},vt=function(t){return Object(c(t))},mt=G("IE_PROTO"),bt=Object.prototype,_t=Object.getPrototypeOf||function(t){return t=vt(t),T(t,mt)?t[mt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?bt:null},wt=lt("iterator"),Et=!([].keys&&"next"in[].keys()),xt="@@iterator",At="keys",Ft="values",jt=function(){return this},kt=function(t,e,n,r,i,o,s){gt(n,e,r);var a,u,c,f=function(t){if(!Et&&t in d)return d[t];switch(t){case At:case Ft:return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",h=i==Ft,p=!1,d=t.prototype,y=d[wt]||d[xt]||i&&d[i],g=y||f(i),v=i?h?f("entries"):g:void 0,m="Array"==e&&d.entries||y;if(m&&(c=_t(m.call(new t)))!==Object.prototype&&c.next&&(dt(c,l,!0),b||"function"==typeof c[wt]||S(c,wt,jt)),h&&y&&y.name!==Ft&&(p=!0,g=function(){return y.call(this)}),b&&!s||!Et&&!p&&d[wt]||S(d,wt,g),R[e]=g,R[l]=jt,i)if(a={values:h?g:f(Ft),keys:o?g:f(At),entries:v},s)for(u in a)u in d||D(d,u,a[u]);else M(M.P+M.F*(Et||p),e,a);return a},St=o(!0);kt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=St(e,n),this._i+=t.length,{value:t,done:!1})});var Ct=function(e,t,n,r){try{return r?t(h(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&h(i.call(e)),t}},Tt=lt("iterator"),Ot=Array.prototype,Pt=function(t){return void 0!==t&&(R.Array===t||Ot[Tt]===t)},Mt=function(t,e,n){e in t?j.f(t,e,k(0,n)):t[e]=n},Dt=lt("toStringTag"),Rt="Arguments"==B(function(){return arguments}()),It=function(t,e){try{return t[e]}catch(t){}},Bt=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=It(e=Object(t),Dt))?n:Rt?B(e):"Object"==(r=B(e))&&"function"==typeof e.callee?"Arguments":r},Lt=lt("iterator"),Nt=g.getIteratorMethod=function(t){if(null!=t)return t[Lt]||t["@@iterator"]||R[Bt(t)]},Ut=lt("iterator"),zt=!1;try{var qt=[7][Ut]();qt.return=function(){zt=!0}}catch(t){}var Ht=function(t,e){if(!e&&!zt)return!1;var n=!1;try{var r=[7],i=r[Ut]();i.next=function(){return{done:n=!0}},r[Ut]=function(){return i},t(r)}catch(t){}return n};M(M.S+M.F*!Ht(function(t){}),"Array",{from:function(t){var e,n,r,i,o=vt(t),s="function"==typeof this?this:Array,a=arguments.length,u=1<a?arguments[1]:void 0,c=void 0!==u,f=0,l=Nt(o);if(c&&(u=v(u,2<a?arguments[2]:void 0,2)),null==l||s==Array&&Pt(l))for(n=new s(e=z(o.length));f<e;f++)Mt(n,f,c?u(o[f],f):o[f]);else for(i=l.call(o),n=new s;!(r=i.next()).done;f++)Mt(n,f,c?Ct(i,u,[r.value,f],!0):r.value);return n.length=f,n}});var Kt=g.Array.from,$t=e(function(t){t.exports={default:Kt,__esModule:!0}});t($t);var Wt=e(function(t,e){e.__esModule=!0;var n,r=(n=$t)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}});t(Wt);var Yt=function(t,e){return{value:e,done:!!t}},Vt=kt(Array,"Array",function(t,e){this._t=N(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Yt(1)):Yt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");R.Arguments=R.Array;for(var Jt=lt("toStringTag"),Qt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Gt=0;Gt<Qt.length;Gt++){var Xt=Qt[Gt],Zt=y[Xt],te=Zt&&Zt.prototype;te&&!te[Jt]&&S(te,Jt,Xt),R[Xt]=R.Array}var ee=lt,ne={f:ee},re=ne.f("iterator"),ie=e(function(t){t.exports={default:re,__esModule:!0}});t(ie);var oe=e(function(t){var n=J("meta"),e=j.f,r=0,i=Object.isExtensible||function(){return!0},o=!p(function(){return i(Object.preventExtensions({}))}),s=function(t){e(t,n,{value:{i:"O"+ ++r,w:{}}})},a=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!l(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!T(t,n)){if(!i(t))return"F";if(!e)return"E";s(t)}return t[n].i},getWeak:function(t,e){if(!T(t,n)){if(!i(t))return!0;if(!e)return!1;s(t)}return t[n].w},onFreeze:function(t){return o&&a.NEED&&i(t)&&!T(t,n)&&s(t),t}}}),se=oe.KEY,ae=oe.NEED,ue=oe.fastKey,ce=oe.getWeak,fe=oe.onFreeze,le=j.f,he=function(t){var e=g.Symbol||(g.Symbol={});"_"==t.charAt(0)||t in e||le(e,t,{value:ne.f(t)})},pe=Object.getOwnPropertySymbols,de={f:pe},ye={}.propertyIsEnumerable,ge={f:ye},ve=function(t){var e=nt(t),n=de.f;if(n)for(var r,i=n(t),o=ge.f,s=0;i.length>s;)o.call(t,r=i[s++])&&e.push(r);return e},me=Array.isArray||function(t){return"Array"==B(t)},be=et.concat("length","prototype"),_e=Object.getOwnPropertyNames||function(t){return tt(t,be)},we={f:_e},Ee=we.f,xe={}.toString,Ae="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Fe=function(t){try{return Ee(t)}catch(t){return Ae.slice()}},je=function(t){return Ae&&"[object Window]"==xe.call(t)?Fe(t):Ee(N(t))},ke={f:je},Se=Object.getOwnPropertyDescriptor,Ce=d?Se:function(t,e){if(t=N(t),e=x(e,!0),E)try{return Se(t,e)}catch(t){}if(T(t,e))return k(!ge.f.call(t,e),t[e])},Te={f:Ce},Oe=oe.KEY,Pe=Te.f,Me=j.f,De=ke.f,Re=y.Symbol,Ie=y.JSON,Be=Ie&&Ie.stringify,Le="prototype",Ne=lt("_hidden"),Ue=lt("toPrimitive"),ze={}.propertyIsEnumerable,qe=W("symbol-registry"),He=W("symbols"),Ke=W("op-symbols"),$e=Object[Le],We="function"==typeof Re,Ye=y.QObject,Ve=!Ye||!Ye[Le]||!Ye[Le].findChild,Je=d&&p(function(){return 7!=ft(Me({},"a",{get:function(){return Me(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Pe($e,e);r&&delete $e[e],Me(t,e,n),r&&t!==$e&&Me($e,e,r)}:Me,Qe=function(t){var e=He[t]=ft(Re[Le]);return e._k=t,e},Ge=We&&"symbol"==typeof Re.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Re},Xe=function(t,e,n){return t===$e&&Xe(Ke,e,n),h(t),e=x(e,!0),h(n),T(He,e)?(n.enumerable?(T(t,Ne)&&t[Ne][e]&&(t[Ne][e]=!1),n=ft(n,{enumerable:k(0,!1)})):(T(t,Ne)||Me(t,Ne,k(1,{})),t[Ne][e]=!0),Je(t,e,n)):Me(t,e,n)},Ze=function(t,e){h(t);for(var n,r=ve(e=N(e)),i=0,o=r.length;i<o;)Xe(t,n=r[i++],e[n]);return t},tn=function(t,e){return void 0===e?ft(t):Ze(ft(t),e)},en=function(t){var e=ze.call(this,t=x(t,!0));return!(this===$e&&T(He,t)&&!T(Ke,t))&&(!(e||!T(this,t)||!T(He,t)||T(this,Ne)&&this[Ne][t])||e)},nn=function(t,e){if(t=N(t),e=x(e,!0),t!==$e||!T(He,e)||T(Ke,e)){var n=Pe(t,e);return!n||!T(He,e)||T(t,Ne)&&t[Ne][e]||(n.enumerable=!0),n}},rn=function(t){for(var e,n=De(N(t)),r=[],i=0;n.length>i;)T(He,e=n[i++])||e==Ne||e==Oe||r.push(e);return r},on=function(t){for(var e,n=t===$e,r=De(n?Ke:N(t)),i=[],o=0;r.length>o;)!T(He,e=r[o++])||n&&!T($e,e)||i.push(He[e]);return i};We||(Re=function(){if(this instanceof Re)throw TypeError("Symbol is not a constructor!");var e=J(0<arguments.length?arguments[0]:void 0),n=function(t){this===$e&&n.call(Ke,t),T(this,Ne)&&T(this[Ne],e)&&(this[Ne][e]=!1),Je(this,e,k(1,t))};return d&&Ve&&Je($e,e,{configurable:!0,set:n}),Qe(e)},D(Re[Le],"toString",function(){return this._k}),Te.f=nn,j.f=Xe,we.f=ke.f=rn,ge.f=en,de.f=on,d&&!b&&D($e,"propertyIsEnumerable",en,!0),ne.f=function(t){return Qe(lt(t))}),M(M.G+M.W+M.F*!We,{Symbol:Re});for(var sn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),an=0;sn.length>an;)lt(sn[an++]);for(var un=nt(lt.store),cn=0;un.length>cn;)he(un[cn++]);M(M.S+M.F*!We,"Symbol",{for:function(t){return T(qe,t+="")?qe[t]:qe[t]=Re(t)},keyFor:function(t){if(!Ge(t))throw TypeError(t+" is not a symbol!");for(var e in qe)if(qe[e]===t)return e},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),M(M.S+M.F*!We,"Object",{create:tn,defineProperty:Xe,defineProperties:Ze,getOwnPropertyDescriptor:nn,getOwnPropertyNames:rn,getOwnPropertySymbols:on}),Ie&&M(M.S+M.F*(!We||p(function(){var t=Re();return"[null]"!=Be([t])||"{}"!=Be({a:t})||"{}"!=Be(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(l(e)||void 0!==t)&&!Ge(t))return me(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Ge(e))return e}),r[1]=e,Be.apply(Ie,r)}}),Re[Le][Ue]||S(Re[Le],Ue,Re[Le].valueOf),dt(Re,"Symbol"),dt(Math,"Math",!0),dt(y.JSON,"JSON",!0),he("asyncIterator"),he("observable");var fn=g.Symbol,ln=e(function(t){t.exports={default:fn,__esModule:!0}});t(ln);var hn=e(function(t,e){e.__esModule=!0;var n=o(ie),r=o(ln),i="function"==typeof r.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function o(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===i(n.default)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":i(t)}});t(hn);var pn=function(t){this.text=t},dn=e(function(t){var e,d=(e=hn)&&e.__esModule?e:{default:e};t.exports=function(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o="expected",s=t.clone();e&&e.call(s,s);var a=t.clone();if("function"==typeof r)r.call(a,a);else if(0<r.length){var u=!1;r.forEach(function(t,e){var n=t&&"object"===(void 0===t?"undefined":(0,d.default)(t))&&t instanceof pn;0<e&&(n||u||a.text(","),a.sp()),n?a.error(t.text):t.call(a,a),u=n})}var c=s.size(),f=a.size(),l=o.length+c.width+f.width+n.length,h=Math.max(c.height,f.height);if("omitSubject"in t&&t.omitSubject===i.subject){var p=/^(not )?to (.*)/.exec(n);n=p?(t.error("should "),p[1]&&t.error("not "),p[2]):"expected: "+n}else i.compact&&i.compactSubject&&(1<c.height||c.width>(i.compactWidth||35))?(t.error("expected").sp(),i.compactSubject.call(t,t),t.sp()):(t.error(o),1<c.height?t.nl():t.sp(),t.append(s),1<c.height||1===h&&l>t.preferredWidth?t.nl():t.sp());return t.error(n),1<f.height?t.nl():0<f.width&&t.sp(),t.append(a),t}});t(dn);var yn={intersects:function(t,e){return t.start<e.end&&e.start<t.end||t.start===e.start},intersectsWithSome:function(t,e){return t.some(function(t){return yn.intersects(e,t)})}},gn=yn,vn=function(t,e){var n=e.start-t.start;return 0!==n?n:t.end-t.start-(e.end-e.start)},mn=gn.intersectsWithSome,bn=function(t,e){if(e=e||{},!Array.isArray(t))throw new Error("The interval packer requires an array of objects with start and end properties.");if(0===t.length)return[];var n;t.forEach(function(t){if("object"!=typeof t||"number"!=typeof t.start||"number"!=typeof t.end||t.end<=t.start)throw new Error("Intervals must be objects with integer properties start and end where start < end.")}),t=[].concat(t).sort(vn);for(var r=[],i=-1/0;0<t.length;){var o=t.pop();i<=o.start&&(n=[[]],r.push(n));for(var s=0;s<n.length&&mn(n[s],o);)s+=1;(n[s]=n[s]||[]).push(o),i=Math.max(i,o.end)}return e.groupPartitions?r:r.reduce(function(n,t){return t.forEach(function(t,e){return n[e]=n[e]||[],Array.prototype.push.apply(n[e],t),n}),n},[])},_n=e(function(t){var e,u=(e=hn)&&e.__esModule?e:{default:e};var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array,r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c=t.exports={objectIs:Object.is||function(t,e){return 0===t&&0===e?1/t==1/e:t!=t?e!=e:t===e},checkObjectEqualityUsingType:function(e,n,r,t){if(e===n)return!0;if(n.constructor!==e.constructor)return!1;var i=r.getKeys(e).filter(function(t){return void 0!==r.valueForKey(e,t)}),o=r.getKeys(n).filter(function(t){return void 0!==r.valueForKey(n,t)});if(i.length!==o.length)return!1;i.sort(r.keyComparator),o.sort(r.keyComparator);for(var s=0;s<i.length;s+=1)if(i[s]!==o[s])return!1;for(var a=0;a<i.length;a+=1){var u=i[a];if(!t(r.valueForKey(e,u),r.valueForKey(n,u)))return!1}return!0},duplicateArrayLikeUsingType:function(n,r){var t=r.getKeys(n),i=t.length;if(!r.numericalPropertiesOnly){for(var e=0,o=t.length-1;-1<o;o-=1){var s=t[o];if("symbol"!==(void 0===s?"undefined":(0,u.default)(s))&&c.numericalRegExp.test(s))break;e+=1}i-=e}var a=new Array(i);return t.forEach(function(t,e){i<=e&&!r.hasKey(n,t)||(a[t]=r.hasKey(n,t)?r.valueForKey(n,t):void 0)}),a},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPromise:function(t){return t&&"function"==typeof t.then},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},isError:function(t){return"object"===(void 0===t?"undefined":(0,u.default)(t))&&("[object Error]"===Object.prototype.toString.call(t)||t instanceof Error)},extend:function(n){for(var r=arguments,t=function(t){var e=r[t];e&&Object.keys(e).forEach(function(t){n[t]=e[t]})},e=1;e<arguments.length;e+=1)t(e);return n},findFirst:function(t,e){for(var n=0;n<t.length;n+=1)if(e(t[n]))return t[n];return null},leftPad:function(t,e){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:" ";t.length<e;)t=n+t;return t},escapeRegExpMetaChars:function(t){return t.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")},escapeChar:function(t){if("\t"===t)return"\\t";if("\r"===t)return"\\r";var e=t.charCodeAt(0),n=e.toString(16).toUpperCase();return e<256?"\\x"+c.leftPad(n,2,"0"):"\\u"+c.leftPad(n,4,"0")},getFunctionName:function(t){if("string"==typeof t.name)return t.name;var e=Function.prototype.toString.call(t).match(/function ([^(]+)/);return e?e[1]:t===Object?"Object":t===Function?"Function":""},wrapConstructorNameAroundOutput:function(t,e){var n=e.constructor,r=n&&n!==Object&&c.getFunctionName(n);return r&&"Object"!==r?t.clone().text(r+"(").append(t).text(")"):t},setPrototypeOfOrExtend:n?r:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},uniqueStringsAndSymbols:function(){var e=void 0;"function"==typeof(arguments.length<=0?void 0:arguments[0])&&(e=arguments.length<=0?void 0:arguments[0]);var n={},r=[];function i(t){Array.isArray(t)?t.forEach(i):Object.prototype.hasOwnProperty.call(n,t)||e&&!e(t)||(n[t]=!0,r.push(t))}for(var t=e?1:0;t<arguments.length;t+=1)i(arguments.length<=t?void 0:arguments[t]);return r},uniqueNonNumericalStringsAndSymbols:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.uniqueStringsAndSymbols(function(t){return"symbol"===(void 0===t?"undefined":(0,u.default)(t))||!c.numericalRegExp.test(t)},Array.prototype.slice.call(e))},forwardFlags:function(t,r){return t.replace(/\[(!?)([^\]]+)\] ?/g,function(t,e,n){return Boolean(r[n])!==Boolean(e)?n+" ":""}).trim()},numericalRegExp:/^(?:0|[1-9][0-9]*)$/,packArrows:function(i){var s={};i.forEach(function(t,e){"moveSource"===t.type?(t.changeIndex=e,(s[t.actualIndex]=s[t.actualIndex]||{}).source=t):"moveTarget"===t.type&&(t.changeIndex=e,(s[t.actualIndex]=s[t.actualIndex]||{}).target=t)});var t=Object.keys(s);if(0<t.length){var a=[];t.sort(function(t,e){return Math.abs(s[e].source.changeIndex-s[e].target.changeIndex)-Math.abs(s[t].source.changeIndex-s[t].target.changeIndex)}).forEach(function(t,e,n){var r=s[t],i=Math.min(r.source.changeIndex,r.target.changeIndex),o=Math.max(r.source.changeIndex,r.target.changeIndex);a.push({start:i,end:o,direction:r.source.changeIndex<r.target.changeIndex?"down":"up"})});for(var e=bn(a);3<e.length;)e.shift().forEach(function(t){var e=t.direction,n=t.start,r=t.end;i["up"===e?n:r].type="insert",i["up"===e?r:n].type="remove"});return e}},truncateSubjectStringForBegin:function(t,e){var n=e.length+25;if(t.length<=n)return null;var r=t.indexOf(" ",e.length+1);return-1<r&&r<n?t.substring(0,r):t.substring(0,n)},truncateSubjectStringForEnd:function(t,e){var n=t.length-e.length-25;if(n<=0)return null;var r=t.lastIndexOf(" ",e.length+1);return-1<r&&n<=r?t.substring(r+1,t.length):t.substring(n,t.length)}}});t(_n);var wn=_n.objectIs,En=_n.checkObjectEqualityUsingType,xn=_n.duplicateArrayLikeUsingType,An=_n.isArray,Fn=_n.isPromise,jn=_n.isRegExp,kn=_n.isError,Sn=_n.extend,Cn=_n.findFirst,Tn=_n.leftPad,On=_n.escapeRegExpMetaChars,Pn=_n.escapeChar,Mn=_n.getFunctionName,Dn=_n.wrapConstructorNameAroundOutput,Rn=_n.setPrototypeOfOrExtend,In=_n.uniqueStringsAndSymbols,Bn=_n.uniqueNonNumericalStringsAndSymbols,Ln=_n.forwardFlags,Nn=_n.numericalRegExp,Un=_n.packArrows,zn=_n.truncateSubjectStringForBegin,qn=_n.truncateSubjectStringForEnd,Hn="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Kn(){throw new Error("setTimeout has not been defined")}function $n(){throw new Error("clearTimeout has not been defined")}var Wn=Kn,Yn=$n;function Vn(e){if(Wn===setTimeout)return setTimeout(e,0);if((Wn===Kn||!Wn)&&setTimeout)return Wn=setTimeout,setTimeout(e,0);try{return Wn(e,0)}catch(t){try{return Wn.call(null,e,0)}catch(t){return Wn.call(this,e,0)}}}function Jn(e){if(Yn===clearTimeout)return clearTimeout(e);if((Yn===$n||!Yn)&&clearTimeout)return Yn=clearTimeout,clearTimeout(e);try{return Yn(e)}catch(t){try{return Yn.call(null,e)}catch(t){return Yn.call(this,e)}}}"function"==typeof Hn.setTimeout&&(Wn=setTimeout),"function"==typeof Hn.clearTimeout&&(Yn=clearTimeout);var Qn=[],Gn=!1,Xn,Zn=-1;function tr(){Gn&&Xn&&(Gn=!1,Xn.length?Qn=Xn.concat(Qn):Zn=-1,Qn.length&&er())}function er(){if(!Gn){var t=Vn(tr);Gn=!0;for(var e=Qn.length;e;){for(Xn=Qn,Qn=[];++Zn<e;)Xn&&Xn[Zn].run();Zn=-1,e=Qn.length}Xn=null,Gn=!1,Jn(t)}}function nr(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Qn.push(new rr(t,e)),1!==Qn.length||Gn||Vn(er)}function rr(t,e){this.fun=t,this.array=e}rr.prototype.run=function(){this.fun.apply(null,this.array)};var ir="browser",or="browser",sr=!0,ar={},ur=[],cr="",fr={},lr={},hr={};function pr(){}var dr=pr,yr=pr,gr=pr,vr=pr,mr=pr,br=pr,_r=pr;function wr(t){throw new Error("process.binding is not supported")}function Er(){return"/"}function xr(t){throw new Error("process.chdir is not supported")}function Ar(){return 0}var Fr=Hn.performance||{},jr=Fr.now||Fr.mozNow||Fr.msNow||Fr.oNow||Fr.webkitNow||function(){return(new Date).getTime()};function kr(t){var e=.001*jr.call(Fr),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]}var Sr=new Date;function Cr(){return(new Date-Sr)/1e3}for(var Tr={nextTick:nr,title:ir,browser:sr,env:ar,argv:ur,version:cr,versions:fr,on:dr,addListener:yr,once:gr,off:vr,removeListener:mr,removeAllListeners:br,emit:_r,binding:wr,cwd:Er,chdir:xr,umask:Ar,hrtime:kr,platform:or,release:lr,config:hr,uptime:Cr},Or={extend:function(e){for(var t=1;t<arguments.length;t+=1){var n=arguments[t];Object.keys(n).forEach(function(t){e[t]=n[t]})}return e},calculateOutputEntrySize:function(t){if(t.size)return t.size;var e;switch(t.style){case"text":e={width:String(t.args.content).length,height:1};break;case"block":e=Or.calculateSize(t.args);break;case"raw":var n=t.args;e={width:n.width,height:n.height};break;default:e={width:0,height:0}}return t.size=e},calculateLineSize:function(t){var n={height:1,width:0};return t.forEach(function(t){var e=Or.calculateOutputEntrySize(t);n.width+=e.width,n.height=Math.max(e.height,n.height)}),n},calculateSize:function(t){var n={height:0,width:0};return t.forEach(function(t){var e=Or.calculateLineSize(t);n.height+=e.height,n.width=Math.max(n.width,e.width)}),n},arrayEquals:function(t,e){if(t===e)return!0;if(!t||t.length!==e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0},escapeRegExp:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},findFirst:function(t,e,n){for(var r=n||null,i=0;i<t.length;i+=1)if(e.call(r,t[i],i,t))return t[i];return null},getFunctionName:function(t){if("string"==typeof t.name)return t.name;var e=Function.prototype.toString.call(t).match(/function ([^\(]+)/);return e?e[1]:t===Object?"Object":t===Function?"Function":void 0}},Pr=Or,Mr=256,Dr=[""],Rr=1;Rr<=Mr;Rr+=1)Dr[Rr]=Dr[Rr-1]+" ";function Ir(t,e){if(e<0)return"";var n="";if(" "===t){if(e<=Mr)return Dr[e];for(var r=Dr[Mr],i=Math.floor(e/Mr),o=0;o<i;o+=1)n+=r;n+=Dr[e%Mr]}else for(var s=0;s<e;s+=1)n+=t;return n}var Br=Ir,Lr=/^(?:bg)?#(?:[0-9a-f]{3}|[0-9a-f]{6})$/i,Nr={bold:"font-weight: bold",dim:"opacity: 0.7",italic:"font-style: italic",underline:"text-decoration: underline",inverse:"-webkit-filter: invert(%100); filter: invert(100%)",hidden:"visibility: hidden",strikeThrough:"text-decoration: line-through",black:"color: black",red:"color: red",green:"color: green",yellow:"color: yellow",blue:"color: blue",magenta:"color: magenta",cyan:"color: cyan",white:"color: white",gray:"color: gray",bgBlack:"background-color: black",bgRed:"background-color: red",bgGreen:"background-color: green",bgYellow:"background-color: yellow",bgBlue:"background-color: blue",bgMagenta:"background-color: magenta",bgCyan:"background-color: cyan",bgWhite:"background-color: white"};Object.keys(Nr).forEach(function(t){Nr[t.toLowerCase()]=Nr[t]});var Ur=Nr,zr=Tr.argv,qr=!(-1!==zr.indexOf("--no-color")||-1!==zr.indexOf("--no-colors")||-1!==zr.indexOf("--color=false")||-1===zr.indexOf("--color")&&-1===zr.indexOf("--colors")&&-1===zr.indexOf("--color=true")&&-1===zr.indexOf("--color=always")&&(Tr.stdout&&!Tr.stdout.isTTY||"win32"!==Tr.platform&&!("COLORTERM"in Tr.env||"dumb"!==Tr.env.TERM&&/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(Tr.env.TERM))));function Hr(t){return{style:"text",args:{content:Br(" ",t),styles:[]}}}function Kr(t){return t.some(function(t){return"block"===t.style||"text"===t.style&&-1!==String(t.args.content).indexOf("\n")})}function $r(e){switch(e.style){case"text":return String(e.args.content).split("\n").map(function(t){return""===t?[]:[{style:"text",args:{content:t,styles:e.args.styles}}]});case"block":return Yr(e.args);default:return[]}}function Wr(t){if(0===t.length)return[[]];if(!Kr(t))return[t];var o=[],s=[],a=0;return t.forEach(function(t,e){var n=$r(t),i=n.map(function(t){return Pr.calculateLineSize(t).width}),r=Math.max.apply(null,i);n.forEach(function(t,e){var n=o[e];if(n||(o[e]=n=[],s[e]=0),t.length){var r=a-s[e];n.push(Hr(r)),Array.prototype.push.apply(n,t),s[e]=a+i[e]}}),a+=r},this),o}function Yr(t){var e=[];return t.forEach(function(t){Wr(t).forEach(function(t){e.push(t)})}),e}var Vr=Yr;function Jr(){}Jr.prototype.format="text",Jr.prototype.serialize=function(t){return(t=Vr(t)).map(this.serializeLine,this).join("\n")},Jr.prototype.serializeLine=function(t){return t.map(function(t){return this[t.style]?String(this[t.style](t.args)):""},this).join("")},Jr.prototype.text=function(t){return String(t.content)},Jr.prototype.block=function(t){return this.serialize(t)},Jr.prototype.raw=function(t){return String(t.content(this))};var Qr=Jr,Gr=function(t,e){if(1!==e.length)return e;for(var n=0,r=[],i=e[0],o=t.styles||{};"string"==typeof i&&o[i];)if(i=o[i],100<(n+=1)){var s=r.indexOf(i);if(r.push(i),-1!==s)throw new Error("Your theme contains a loop: "+r.slice(s).join(" -> "))}return Array.isArray(i)?i:[i]};function Xr(t){this.theme=t}Xr.prototype.format="html",Xr.prototype.serialize=function(t){return'<div style="font-family: monospace; white-space: nowrap">'+this.serializeLines(t)+"</div>"},Xr.prototype.serializeLines=function(t){return t.map(function(t){return"<div>"+(this.serializeLine(t).join("")||"&nbsp;")+"</div>"},this).join("")},Xr.prototype.serializeLine=function(t){return t.map(function(t){return this[t.style]?this[t.style](t.args):""},this)},Xr.prototype.block=function(t){return'<div style="display: inline-block; vertical-align: top">'+this.serializeLines(t)+"</div>"},Xr.prototype.text=function(t){var e=String(t.content);if(""===e)return"";e=e.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");var n=Gr(this.theme,t.styles);if(0<n.length){for(var r=[],i=0;i<n.length;i+=1){var o=n[i];Lr.test(o)?"bg"===o.substring(0,2)?r.push("background-color: "+o.substring(2)):r.push("color: "+o):Ur[o]&&r.push(Ur[o])}0<r.length&&(e='<span style="'+r.join("; ")+'">'+e+"</span>")}return e},Xr.prototype.raw=function(t){return String(t.content(this))};var Zr=Xr,ti=ci,ei=Math.sqrt,ni=Math.pow,ri=Math.cos,ii=Math.atan2,oi=Math.sin,si=Math.abs,ai=Math.exp,ui=Math.PI;
/**
	 * @author Markus Ekholm
	 * @copyright 2012-2015 (c) Markus Ekholm <markus at botten dot org >
	 * @license Copyright (c) 2012-2015, Markus Ekholm
	 * All rights reserved.
	 * Redistribution and use in source and binary forms, with or without
	 * modification, are permitted provided that the following conditions are met:
	 *    * Redistributions of source code must retain the above copyright
	 *      notice, this list of conditions and the following disclaimer.
	 *    * Redistributions in binary form must reproduce the above copyright
	 *      notice, this list of conditions and the following disclaimer in the
	 *      documentation and/or other materials provided with the distribution.
	 *    * Neither the name of the <organization> nor the
	 *      names of its contributors may be used to endorse or promote products
	 *      derived from this software without specific prior written permission.
	 *
	 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
	 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
	 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
	 * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY
	 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
	 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
	 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
	 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	 */function ci(t,e){var n=t.L,r=t.a,i=t.b,o=e.L,s=e.a,a=e.b,u=ei(ni(r,2)+ni(i,2)),c=ei(ni(s,2)+ni(a,2)),f=(u+c)/2,l=.5*(1-ei(ni(f,7)/(ni(f,7)+ni(25,7)))),h=(1+l)*r,p=(1+l)*s,d=ei(ni(h,2)+ni(i,2)),y=ei(ni(p,2)+ni(a,2)),g=function(t,e){if(0==t&&0==e)return 0;var n=fi(ii(t,e));return 0<=n?n:n+360},v=g(i,h),m=g(a,p),b=o-n,_=y-d,w=function(t,e,n,r){if(t*e==0)return 0;if(si(r-n)<=180)return r-n;if(180<r-n)return r-n-360;if(r-n<-180)return r-n+360;throw new Error}(u,c,v,m),E=2*ei(d*y)*oi(li(w)/2),x=(n+o)/2,A=(d+y)/2,F=function(t,e,n,r){if(t*e==0)return n+r;if(si(n-r)<=180)return(n+r)/2;if(180<si(n-r)&&n+r<360)return(n+r+360)/2;if(180<si(n-r)&&360<=n+r)return(n+r-360)/2;throw new Error}(u,c,v,m),j=1-.17*ri(li(F-30))+.24*ri(li(2*F))+.32*ri(li(3*F+6))-.2*ri(li(4*F-63)),k=30*ai(-ni((F-275)/25,2)),S=ei(ni(A,7)/(ni(A,7)+ni(25,7))),C=1+.015*ni(x-50,2)/ei(20+ni(x-50,2)),T=1+.045*A,O=1+.015*A*j,P=-2*S*oi(li(2*k));return ei(ni(b/(1*C),2)+ni(_/(1*T),2)+ni(E/(1*O),2)+P*(_/(1*T))*(E/(1*O)))}function fi(t){return t*(180/ui)}function li(t){return t*(ui/180)}var hi={ciede2000:ti},pi=yi,di=Math.pow;
/**
	 * @author Markus Ekholm
	 * @copyright 2012-2015 (c) Markus Ekholm <markus at botten dot org >
	 * @license Copyright (c) 2012-2015, Markus Ekholm
	 * All rights reserved.
	 * Redistribution and use in source and binary forms, with or without
	 * modification, are permitted provided that the following conditions are met:
	 *    * Redistributions of source code must retain the above copyright
	 *      notice, this list of conditions and the following disclaimer.
	 *    * Redistributions in binary form must reproduce the above copyright
	 *      notice, this list of conditions and the following disclaimer in the
	 *      documentation and/or other materials provided with the distribution.
	 *    * Neither the name of the <organization> nor the
	 *      names of its contributors may be used to endorse or promote products
	 *      derived from this software without specific prior written permission.
	 *
	 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
	 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
	 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
	 * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY
	 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
	 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
	 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
	 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	 */function yi(t){return vi(gi(t))}function gi(t){var e=t.R/255,n=t.G/255,r=t.B/255;return.04045<e?e=di((e+.055)/1.055,2.4):e/=12.92,.04045<n?n=di((n+.055)/1.055,2.4):n/=12.92,.04045<r?r=di((r+.055)/1.055,2.4):r/=12.92,{X:.4124*(e*=100)+.3576*(n*=100)+.1805*(r*=100),Y:.2126*e+.7152*n+.0722*r,Z:.0193*e+.1192*n+.9505*r}}function vi(t){var e=t.Y/100,n=t.Z/108.883,r=t.X/95.047;return r=.008856<r?di(r,1/3):7.787*r+16/116,{L:116*(e=.008856<e?di(e,1/3):7.787*e+16/116)-16,a:500*(r-e),b:200*(e-(n=.008856<n?di(n,1/3):7.787*n+16/116))}}var mi={rgb_to_lab:pi},bi=Ei,_i=wi;
/**
	 * @author Markus Ekholm
	 * @copyright 2012-2015 (c) Markus Ekholm <markus at botten dot org >
	 * @license Copyright (c) 2012-2015, Markus Ekholm
	 * All rights reserved.
	 * Redistribution and use in source and binary forms, with or without
	 * modification, are permitted provided that the following conditions are met:
	 *    * Redistributions of source code must retain the above copyright
	 *      notice, this list of conditions and the following disclaimer.
	 *    * Redistributions in binary form must reproduce the above copyright
	 *      notice, this list of conditions and the following disclaimer in the
	 *      documentation and/or other materials provided with the distribution.
	 *    * Neither the name of the <organization> nor the
	 *      names of its contributors may be used to endorse or promote products
	 *      derived from this software without specific prior written permission.
	 *
	 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
	 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
	 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
	 * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY
	 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
	 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
	 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
	 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	 */function wi(t){return"R"+t.R+"B"+t.B+"G"+t.G}function Ei(t,e,n){var r={};n=n||"closest";for(var i=0;i<t.length;i+=1){for(var o=t[i],s=void 0,a=void 0,u=0;u<e.length;u+=1){var c=e[u],f=xi(o,c);null==s||"closest"===n&&f<a?(s=c,a=f):"furthest"===n&&a<f&&(s=c,a=f)}r[wi(o)]=s}return r}function xi(t,e){return t=mi.rgb_to_lab(t),e=mi.rgb_to_lab(e),hi.ciede2000(t,e)}var Ai={map_palette:bi,palette_map_key:_i},Fi=e(function(t){var r=t.exports={};r.diff=hi.ciede2000,r.rgb_to_lab=mi.rgb_to_lab,r.map_palette=Ai.map_palette,r.palette_map_key=Ai.palette_map_key,r.closest=function(t,e){var n=r.palette_map_key(t);return r.map_palette([t],e,"closest")[n]},r.furthest=function(t,e){var n=r.palette_map_key(t);return r.map_palette([t],e,"furthest")[n]}}),ji=e(function(t){var r=t.exports={modifiers:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};r.colors.grey=r.colors.gray,Object.keys(r).forEach(function(t){var n=r[t];Object.keys(n).forEach(function(t){var e=n[t];r[t]=n[t]={open:"["+e[0]+"m",close:"["+e[1]+"m"}}),Object.defineProperty(r,t,{value:n,enumerable:!1})})}),ki=ji.modifiers,Si=ji.colors,Ci=ji.bgColors,Ti=0,Oi=1024,Pi=Pr.extend({},ji);function Mi(t){this.theme=t}Object.keys(Pi).forEach(function(t){Pi[t.toLowerCase()]=Pi[t]}),Mi.prototype=new Qr,Mi.prototype.format="ansi";var Di={16:{"#000000":"black","#ff0000":"red","#00ff00":"green","#ffff00":"yellow","#0000ff":"blue","#ff00ff":"magenta","#00ffff":"cyan","#ffffff":"white","#808080":"gray"},256:{}},Ri={};function Ii(t){t.length<6&&(t=t.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3"));var e=t.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i);if(e)return{R:parseInt(e[1],16),G:parseInt(e[2],16),B:parseInt(e[3],16)}}function Bi(t){var e=(65536*Math.round(t.R)+256*Math.round(t.G)+Math.round(t.B)).toString(16);return"#"+"00000".substr(0,6-e.length)+e}function Li(t){return t.substring(0,1).toUpperCase()+t.substring(1)}Ri[16]=Object.keys(Di[16]).map(Ii),Ri.bg16=Object.keys(Di[16]).filter(function(t){return"#808080"!==t}).map(Ii),Ri[256]=[].concat(Ri[16]);var Ni=16;function Ui(t){Ri[256].push(t),Di[256][Bi(t)]=Ni,Ni+=1}for(var zi=0;zi<6;zi+=1)for(var qi=0;qi<6;qi+=1)for(var Hi=0;Hi<6;Hi+=1)Ui({R:Math.round(256*zi/6),G:Math.round(256*qi/6),B:Math.round(256*Hi/6)});[8,18,28,38,48,58,68,78,88,96,102,118,128,138,148,158,168,178,188,198,208,218,228,238].forEach(function(t){Ui({R:t,G:t,B:t})}),Mi.prototype.text=function(t){var e=String(t.content);if(""===e)return"";var n=Gr(this.theme,t.styles);if(0<n.length)for(var r=n.length-1;0<=r;r-=1){var i=n[r];if(Pi[i])e=Pi[i].open+e+Pi[i].close;else if(Lr.test(i)){var o=i,s="bg"===i.substring(0,2),a=s?i.substring(2):i,u=Bi(Fi.closest(Ii(a),Ri[s?"bg16":16])),c=Di[16][u],f=Bi(Fi.closest(Ii(a),Ri[256])),l=Di[256][f];i=s?"bg"+Li(c):c;var h=Pi[i].open,p=Pi[i].close;u!==f&&(h+="["+(s?48:38)+";5;"+l+"m"),Ti<Oi&&(Pi[o]={open:h,close:p},Ti+=1),e=h+e+p}}return e};var Ki=Mi;function $i(t){this.theme=t}$i.prototype.format="coloredConsole",$i.prototype.serialize=function(t){var e="",n=[];return this.serializeLines(Vr(t)).forEach(function(t){t&&(e+=t[0],1<t.length&&n.push(t[1]))}),[e].concat(n)},$i.prototype.serializeLines=function(t){var n=[];return t.forEach(function(t,e){0<e&&n.push(["%c\n ",""]),Array.prototype.push.apply(n,this.serializeLine(t))},this),n},$i.prototype.serializeLine=function(t){var e=[];return t.forEach(function(t){this[t.style]&&e.push(this[t.style](t.args))},this),e},$i.prototype.block=function(t){return this.serializeLines(t)},$i.prototype.text=function(t){var e=String(t.content);if(""===e)return"";var n=Gr(this.theme,t.styles),r=["%c"+e.replace(/%/g,"%%")],i=[];if(0<n.length)for(var o=0;o<n.length;o+=1){var s=n[o];Lr.test(s)?"bg"===s.substring(0,2)?i.push("background-color: "+s.substring(2)):i.push("color: "+s):Ur[s]&&i.push(Ur[s])}return r.push(i.join("; ")),r},$i.prototype.raw=function(t){return String(t.content(this))};var Wi=$i,Yi=e(function(t,e){var o=Pr.extend,r=["bold","dim","italic","underline","inverse","hidden","strikeThrough","black","red","green","yellow","blue","magenta","cyan","white","gray","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite"];function s(t){if(!(this instanceof s))return new s(t);"string"==typeof(t=t||{})&&(t={format:t});var e="indentationWidth"in t?t.indentationWidth:2;this.indentationWidth=Math.max(e,0),this.indentationLevel=0,this.output=[[]],this.styles=Object.create(null),this.installedPlugins=[],this._themes={},Object.keys(s.serializers).forEach(function(t){this._themes[t]={styles:{}}},this),this.preferredWidth=80,t.format&&(this.format=t.format)}function a(t,e){return!(!t||!e||"text"!==t.style||"text"!==e.style)&&Pr.arrayEquals(t.args.styles,e.args.styles)}function h(t){if(0===t.length)return t;for(var e=[t[0]],n=1;n<t.length;n+=1){var r=e[e.length-1],i=t[n];"text"===i.style&&""===i.args.content||(a(r,i)?e[e.length-1]={style:r.style,args:{content:r.args.content+i.args.content,styles:r.args.styles}}:e.push(i))}return e}function i(t){return t&&"object"==typeof t&&"number"==typeof t.width&&"number"==typeof t.height&&("function"==typeof t.content||"string"==typeof t.content)}s.defaultFormat="string"!=typeof e.nodeName&&qr?"ansi":"undefined"!=typeof window&&void 0!==window.navigator?window._phantom||window.mochaPhantomJS||window.__karma__&&window.__karma__.config.captureConsole?"ansi":"html":"text",s.prototype.newline=s.prototype.nl=function(t){if(void 0===t&&(t=1),0===t)return this;for(var e=0;e<t;e+=1)this.output.push([]);return this},s.serializers={},[Qr,Zr,Ki,Wi].forEach(function(t){s.serializers[t.prototype.format]=t}),s.prototype.write=function(t){if(this.styles[t.style])return this.styles[t.style].apply(this,t.args),this;var e=this.output[this.output.length-1],n=e[e.length-1];return a(n,t)?e[e.length-1]={style:n.style,args:{content:n.args.content+t.args.content,styles:n.args.styles}}:e.push(t),this},s.prototype.indentLines=function(){return this.indentationLevel+=1,this},s.prototype.indent=s.prototype.i=function(){for(var t=0;t<this.indentationLevel;t+=1)this.space(this.indentationWidth);return this},s.prototype.outdentLines=function(){return this.indentationLevel=Math.max(0,this.indentationLevel-1),this},s.prototype.addStyle=function(t,e,n){if(!1===this[t]||(this.hasOwnProperty(t)||s.prototype[t])&&!Object.prototype.hasOwnProperty.call(this.styles,t)&&-1===r.indexOf(t))throw new Error('"'+t+'" style cannot be defined, it clashes with a built-in attribute');if((this.hasOwnProperty(t)||-1!==r.indexOf(t))&&("function"===typeof this[t]&&!n))throw new Error('"'+t+'" style is already defined, set 3rd arg (allowRedefinition) to true to define it anyway');return this._stylesHaveNotBeenClonedYet&&(this.styles=Object.create(this.styles),this._stylesHaveNotBeenClonedYet=!1),this.styles[t]=e,this[t]=function(){return e.apply(this,arguments),this},this},s.prototype.toString=function(t){if(t&&this.format&&t!==this.format)throw new Error("A pen with format: "+this.format+" cannot be serialized to: "+t);"auto"===(t=this.format||t||"text")&&(t=s.defaultFormat);var e=this._themes[t]||{};return new s.serializers[t](e).serialize(this.output)},s.prototype.text=function(){var t=arguments[0];if(""===t)return this;for(var n=new Array(arguments.length-1),e=1;e<arguments.length;e+=1)n[e-1]=arguments[e];if(-1===(t=String(t)).indexOf("\n"))return this.write({style:"text",args:{content:t,styles:n}});var r=t.split(/\n/);return r.forEach(function(t,e){t.length&&this.write({style:"text",args:{content:t,styles:n}}),e<r.length-1&&this.nl()},this),this},s.prototype.removeFormatting=function(){var n=this.clone();return this.output.forEach(function(t,e){n.output[e]=h(t.map(function(t){return"text"===t.style?{style:"text",args:{content:t.args.content,styles:[]}}:t}))}),n.indentationLevel=this.indentationLevel,n},s.prototype.getContentFromArguments=function(t){var e;if(t[0].isMagicPen)return this.ensureCompatibleFormat(t[0].format),t[0];if("function"==typeof t[0])return e=this.clone(),t[0].call(e,e),e;if("string"==typeof t[0]&&1===t.length)return(e=this.clone()).text(t[0]),e;if("string"==typeof t[0])return(e=this.clone())[t[0]].apply(e,Array.prototype.slice.call(t,1)),e;throw new Error("Requires the arguments to be:\na pen or\na callback appending content to a pen or\na style and arguments for that style or\njust a string.")},s.prototype.isMultiline=function(){return 1<this.output.length||1<this.size().height},s.prototype.isAtStartOfLine=function(){return 0===this.output.length||0===this.output[this.output.length-1].length},s.prototype.isBlock=function(){return 1===this.output.length&&1===this.output[0].length&&"block"===this.output[0][0].style},s.prototype.ensureCompatibleFormat=function(t){if(t&&this.format&&t!==this.format)throw new Error("This pen is only compatible with the format: "+this.format)},s.prototype.block=function(){var t=this.getContentFromArguments(arguments).output.map(function(t){return[].concat(t)});return this.write({style:"block",args:t})},s.prototype.alt=function(t){var e=this.format;if(!e)throw new Error("The alt method is only supported on pen where the format has already been set");var n=t[e];return void 0===n?t.fallback?this.append(t.fallback):this:"string"==typeof n||i(n)?this.raw(n):this.append(n)},s.prototype.raw=function(t){if(!this.format)throw new Error("The alt method is only supported on pen where the format has already been set");if("string"==typeof t)return this.write({style:"raw",args:{height:0,width:0,content:function(){return t}}});if(i(t)){if("string"==typeof t.content){var e=(t=o({},t)).content;t.content=function(){return e}}return this.write({style:"raw",args:t})}throw new Error("Raw "+this.format+" content needs to adhere to one of the following forms:\na string of raw content\na function returning a string of raw content or\nan object with the following form { width: <number>, height: <number>, content: <string function() {}|string> }")},s.prototype.amend=function(){var t=this.getContentFromArguments(arguments);return t.isEmpty()||(this.output=function t(e,n){var r=e[e.length-1].slice(),i=e.slice(0,-1),o=r[r.length-1];return o&&"block"===o.style?(r[r.length-1]={style:"block",args:t(o.args,n)},i[e.length-1]=r):(Array.prototype.push.apply(r,n.output[0]),i[e.length-1]=h(r),i.push.apply(i,n.output.slice(1))),i}(this.output,t)),this},s.prototype.append=function(){var t=this.getContentFromArguments(arguments);if(t.isEmpty())return this;var e=this.output[this.output.length-1];return Array.prototype.push.apply(e,t.output[0]),this.output[this.output.length-1]=h(e),this.output.push.apply(this.output,t.output.slice(1)),this},s.prototype.prependLinesWith=function(){var e=this.getContentFromArguments(arguments);if(e.isEmpty())return this;if(1<e.output.length)throw new Error("PrependLinesWith only supports a pen with single line content");var n=this.size().height,t=this.clone();return t.block(function(){for(var t=0;t<n;t+=1)0<t&&this.nl(),this.append(e)}),t.block(this),this.output=t.output,this},s.prototype.space=s.prototype.sp=function(t){return 0===t?this:(void 0===t&&(t=1),this.text(Br(" ",t)))},r.forEach(function(e){s.prototype[e]=s.prototype[e.toLowerCase()]=function(t){return this.text(t,e)}}),s.prototype.clone=function(t){function e(){}this.isEmpty()||this.ensureCompatibleFormat(t),e.prototype=this;var n=new e;return n.styles=this.styles,n._stylesHaveNotBeenClonedYet=!0,n.indentationLevel=0,n.output=[[]],n.installedPlugins=[],n._themes=this._themes,n._themesHaveNotBeenClonedYet=!0,n.format=t||this.format,n.parent=this,n},s.prototype.isMagicPen=!0,s.prototype.size=function(){return Pr.calculateSize(this.output)},s.prototype.installPlugin=s.prototype.use=function(n){var t=Pr.findFirst(this.installedPlugins,function(t){if(t===n)return!0;if("function"!=typeof n||"function"!=typeof t)return t.name===n.name;var e=Pr.getFunctionName(n);return""!==e&&e===Pr.getFunctionName(t)});if(t){if(t===n||void 0!==n.version&&n.version===t.version)return this;throw new Error("Another instance of the plugin '"+n.name+"' is already installed"+(void 0!==t.version?" (version "+t.version+(void 0!==n.version?", trying to install "+n.version:"")+")":"")+". Please check your node_modules folder for unmet peerDependencies.")}if("function"!=typeof n&&("object"!=typeof n||"function"!=typeof n.installInto)||void 0!==n.name&&"string"!=typeof n.name||void 0!==n.dependencies&&!Array.isArray(n.dependencies))throw new Error("Plugins must be functions or adhere to the following interface\n{\n  name: <an optional plugin name>,\n  version: <an optional semver version string>,\n  dependencies: <an optional list of dependencies>,\n  installInto: <a function that will update the given magicpen instance>\n}");if(n.dependencies){for(var e=this,r=[];r.push(e),e=e.parent;);var i=n.dependencies.filter(function(e){return!r.some(function(t){return t.installedPlugins.some(function(t){return t.name===e})})});if(1===i.length)throw new Error(n.name+" requires plugin "+i[0]);if(1<i.length)throw new Error(n.name+" requires plugins "+i.slice(0,-1).join(", ")+" and "+i[i.length-1])}return this.installedPlugins.push(n),"function"==typeof n?n(this):n.installInto(this),this},s.prototype.isEmpty=function(){return 1===this.output.length&&0===this.output[0].length},s.prototype.replaceText=function(t,e){if(this.isEmpty())return this;if("string"==typeof t&&(t=new RegExp(Pr.escapeRegExp(t),"g")),"string"==typeof e){var r=e;e=function(t,e){var n=[r].concat(t);this.text.apply(this,n)}}return 1===arguments.length&&(e=t,t=/.*/),this.output=function a(u,t,c,f){var l=u;return t.forEach(function(t,e){0<e&&l.nl(),t.forEach(function(t,e){if("block"===t.style)return l.output[l.output.length-1].push({style:"block",args:a(u.clone(),t.args,c,f)});if("text"!==t.style)return l.output[l.output.length-1].push(t);var n;c.global&&(c.lastIndex=0);for(var r=!0,i=0,o=t.args.content,s=t.args.styles;null!==(n=c.exec(o))&&(c.global||r);)i<n.index&&l.text.apply(l,[o.substring(i,n.index)].concat(s)),f.apply(l,[s].concat(n)),r=!1,i=n.index+n[0].length;0===i?(0===l.output.length?l.output[0]=[]:l.output[l.output.length-1]).push(t):i<o.length&&l.text.apply(l,[o.substring(i,o.length)].concat(s))},this)},this),l.output.map(h)}(this.clone(),this.output,t,e),this},s.prototype.theme=function(t){if(!(t=t||this.format))throw new Error("Could not detect which format you want to retrieve theme information for. Set the format of the pen or provide it as an argument to the theme method.");return this._themes[t]},s.prototype.installTheme=function(t,r){var i=this;if(1===arguments.length&&(r=t,t=Object.keys(s.serializers)),"string"==typeof t&&(t=[t]),"object"!=typeof r||!Array.isArray(t)||t.some(function(t){return"string"!=typeof t}))throw new Error("Themes must be installed the following way:\nInstall theme for all formats: pen.installTheme({ comment: 'gray' })\nInstall theme for a specific format: pen.installTheme('ansi', { comment: 'gray' }) or\nInstall theme for a list of formats: pen.installTheme(['ansi', 'html'], { comment: 'gray' })");if(r.styles&&"object"==typeof r.styles||(r={styles:r}),i._themesHaveNotBeenClonedYet){var e={};Object.keys(i._themes).forEach(function(t){e[t]=Object.create(i._themes[t])}),i._themes=e,i._themesHaveNotBeenClonedYet=!1}return Object.keys(r.styles).forEach(function(e){if(Lr.test(e)||Ur[e])throw new Error("Invalid theme key: '"+e+"' you can't map build styles.");i[e]||i.addStyle(e,function(t){this.text(t,e)})}),t.forEach(function(t){var e=i._themes[t]||{styles:{}},n=o({},e,r);n.styles=o({},e.styles,r.styles),i._themes[t]=n}),this},t.exports=s}),Vi=[],Ji=[],Qi=function(t,e){if(t===e)return 0;var n=t;t.length>e.length&&(t=e,e=n);var r=t.length,i=e.length;if(0===r)return i;if(0===i)return r;for(;0<r&&t.charCodeAt(~-r)===e.charCodeAt(~-i);)r--,i--;if(0===r)return i;for(var o,s,a,u,c=0;c<r&&t.charCodeAt(c)===e.charCodeAt(c);)c++;if(i-=c,0===(r-=c))return i;for(var f=0,l=0;f<r;)Ji[c+f]=t.charCodeAt(c+f),Vi[f]=++f;for(;l<i;)for(o=e.charCodeAt(c+l),a=l++,s=l,f=0;f<r;f++)u=o===Ji[c+f]?a:a+1,a=Vi[f],s=Vi[f]=s<a?s<u?s+1:u:a<u?a+1:u;return s},Gi=e(function(t){var e=function(){return void 0===this}();if(e)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:e,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,n={}.toString,i={}.constructor.prototype,o=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e};t.exports={isArray:function(t){try{return"[object Array]"===n.call(t)}catch(t){return!1}},keys:o,names:o,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return i}},isES5:e,propertyIsWritable:function(){return!0}}}}),Xi=Gi.freeze,Zi=Gi.defineProperty,to=Gi.getDescriptor,eo=Gi.keys,no=Gi.names,ro=Gi.getPrototypeOf,io=Gi.isArray,oo=Gi.isES5,so=Gi.propertyIsWritable,ao="undefined"==typeof navigator,uo=function(){try{var t={};return Gi.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(t){return!1}}(),co={e:{}},fo;function lo(){try{var t=fo;return fo=null,t.apply(this,arguments)}catch(t){return co.e=t,co}}function ho(t){return fo=t,lo}var po=function(e,n){var r={}.hasOwnProperty;function t(){for(var t in this.constructor=e,(this.constructor$=n).prototype)r.call(n.prototype,t)&&"$"!==t.charAt(t.length-1)&&(this[t+"$"]=n.prototype[t])}return t.prototype=n.prototype,e.prototype=new t,e.prototype};function yo(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function go(t){return!yo(t)}function vo(t){return yo(t)?new Error(Co(t)):t}function mo(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function bo(t,e,n){if(!Gi.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function _o(t,e,n){if(yo(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return Gi.defineProperty(t,e,r),t}function wo(t){throw t}var Eo=function(){var i=[Array.prototype,Object.prototype,Function.prototype],a=function(t){for(var e=0;e<i.length;++e)if(i[e]===t)return!0;return!1};if(Gi.isES5){var u=Object.getOwnPropertyNames;return function(t){for(var e=[],n=Object.create(null);null!=t&&!a(t);){var r;try{r=u(t)}catch(t){return e}for(var i=0;i<r.length;++i){var o=r[i];if(!n[o]){n[o]=!0;var s=Object.getOwnPropertyDescriptor(t,o);null!=s&&null==s.get&&null==s.set&&e.push(o)}}t=Gi.getPrototypeOf(t)}return e}}var o={}.hasOwnProperty;return function(t){if(a(t))return[];var e=[];t:for(var n in t)if(o.call(t,n))e.push(n);else{for(var r=0;r<i.length;++r)if(o.call(i[r],n))continue t;e.push(n)}return e}}(),xo=/this\s*\.\s*\S+\s*=/;function Ao(t){try{if("function"==typeof t){var e=Gi.names(t.prototype),n=Gi.isES5&&1<e.length,r=0<e.length&&!(1===e.length&&"constructor"===e[0]),i=xo.test(t+"")&&0<Gi.names(t).length;if(n||r||i)return!0}return!1}catch(t){return!1}}function Fo(t){return t}var jo=/^[a-z$_][a-z$_0-9]*$/i;function ko(t){return jo.test(t)}function So(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function Co(t){try{return t+""}catch(t){return"[no string representation]"}}function To(t){try{_o(t,"isOperational",!0)}catch(t){}}function Oo(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function Po(t){return t instanceof Error&&Gi.propertyIsWritable(t,"stack")}var Mo="stack"in new Error?function(t){return Po(t)?t:new Error(Co(t))}:function(t){if(Po(t))return t;try{throw new Error(Co(t))}catch(t){return t}};function Do(t){return{}.toString.call(t)}function Ro(t,e,n){for(var r=Gi.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{Gi.defineProperty(e,o,Gi.getDescriptor(t,o))}catch(t){}}}var Io={isClass:Ao,isIdentifier:ko,inheritedDataKeys:Eo,getDataPropertyOrDefault:bo,thrower:wo,isArray:Gi.isArray,haveGetters:uo,notEnumerableProp:_o,isPrimitive:yo,isObject:go,canEvaluate:ao,errorObj:co,tryCatch:ho,inherits:po,withAppended:mo,maybeWrapAsError:vo,toFastProperties:Fo,filledRange:So,toString:Co,canAttachTrace:Po,ensureErrorObject:Mo,originatesFromRejection:Oo,markAsOriginatingFromRejection:To,classString:Do,copyDescriptors:Ro,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:void 0!==Tr&&"[object process]"===Do(Tr).toLowerCase()},Bo;Io.isRecentNode=Io.isNode&&(Bo=Tr.versions.node.split(".").map(Number),0===Bo[0]&&10<Bo[1]||0<Bo[0]),Io.isNode&&Io.toFastProperties(Tr);try{throw new Error}catch(t){Io.lastLineError=t}var Lo=Io,No,Uo=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(Lo.isNode&&"undefined"==typeof MutationObserver){var zo=s.setImmediate,qo=nr;No=Lo.isRecentNode?function(t){zo.call(s,t)}:function(t){qo.call(Tr,t)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?No="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:Uo:(No=function(t){var e=document.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},No.isStatic=!0);var Ho=No;function Ko(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function $o(t){this._capacity=t,this._length=0,this._front=0}$o.prototype._willBeOverCapacity=function(t){return this._capacity<t},$o.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},$o.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=(this._front-1&e-1^e)-e;this[n]=t,this._front=n,this._length=this.length()+1},$o.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},$o.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},$o.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},$o.prototype.length=function(){return this._length},$o.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},$o.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,Ko(this,0,this,e,this._front+this._length&e-1)};var Wo=$o,Yo;try{throw new Error}catch(t){Yo=t}var Vo=Ho;function Jo(){this._isTickUsed=!1,this._lateQueue=new Wo(16),this._normalQueue=new Wo(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=Vo.isStatic?Vo(this.drainQueues):Vo}function Qo(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function Go(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function Xo(t){this._normalQueue._pushOne(t),this._queueTick()}Jo.prototype.disableTrampolineIfNecessary=function(){Lo.hasDevTools&&(this._trampolineEnabled=!1)},Jo.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},Jo.prototype.haveItemsQueued=function(){return 0<this._normalQueue.length()},Jo.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},Lo.hasDevTools?(Vo.isStatic&&(Vo=function(t){setTimeout(t,0)}),Jo.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?Qo.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},Jo.prototype.invoke=function(t,e,n){this._trampolineEnabled?Go.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},Jo.prototype.settlePromises=function(t){this._trampolineEnabled?Xo.call(this,t):this._schedule(function(){t._settlePromises()})}):(Jo.prototype.invokeLater=Qo,Jo.prototype.invoke=Go,Jo.prototype.settlePromises=Xo),Jo.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},Jo.prototype._drainQueue=function(t){for(;0<t.length();){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},Jo.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},Jo.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},Jo.prototype._reset=function(){this._isTickUsed=!1};var Zo=new Jo,ts=Yo;Zo.firstLineError=ts;var es=Gi.freeze,ns=Lo.inherits,rs=Lo.notEnumerableProp,is,os;function ss(e,n){function r(t){if(!(this instanceof r))return new r(t);rs(this,"message","string"==typeof t?t:n),rs(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return ns(r,Error),r}var as=ss("Warning","warning"),us=ss("CancellationError","cancellation error"),cs=ss("TimeoutError","timeout error"),fs=ss("AggregateError","aggregate error");try{is=TypeError,os=RangeError}catch(t){is=ss("TypeError","type error"),os=ss("RangeError","range error")}for(var ls="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),hs=0;hs<ls.length;++hs)"function"==typeof Array.prototype[ls[hs]]&&(fs.prototype[ls[hs]]=Array.prototype[ls[hs]]);Gi.defineProperty(fs.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),fs.prototype.isOperational=!0;var ps=0;function ds(t){if(!(this instanceof ds))return new ds(t);rs(this,"name","OperationalError"),rs(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(rs(this,"message",t.message),rs(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}fs.prototype.toString=function(){var t=Array(4*ps+1).join(" "),e="\n"+t+"AggregateError of:\n";ps++,t=Array(4*ps+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(r=i.join("\n"))+"\n"}return ps--,e},ns(ds,Error);var ys=Error.__BluebirdErrorTypes__;ys||(ys=es({CancellationError:us,TimeoutError:cs,OperationalError:ds,RejectionError:ds,AggregateError:fs}),rs(Error,"__BluebirdErrorTypes__",ys));var gs={Error:Error,TypeError:is,RangeError:os,CancellationError:ys.CancellationError,OperationalError:ys.OperationalError,TimeoutError:ys.TimeoutError,AggregateError:ys.AggregateError,Warning:as},vs=function(a,u){var c=Lo,f=c.errorObj,o=c.isObject;function s(t){return t.then}var l={}.hasOwnProperty;return function(t,e){if(o(t)){if(t instanceof a)return t;if(i=t,l.call(i,"_promise0")){var n=new a(u);return t._then(n._fulfillUnchecked,n._rejectUncheckedCheckError,n._progressUnchecked,n,null),n}var r=c.tryCatch(s)(t);if(r===f)return e&&e._pushContext(),n=a.reject(r.e),e&&e._popContext(),n;if("function"==typeof r)return function(t,e,n){var r=new a(u),i=r;n&&n._pushContext(),r._captureStackTrace(),n&&n._popContext();var o=!0,s=c.tryCatch(e).call(t,function(t){r&&(r._resolveCallback(t),r=null)},function(t){r&&(r._rejectCallback(t,o,!0),r=null)},function(t){r&&"function"==typeof r._progress&&r._progress(t)});return o=!1,r&&s===f&&(r._rejectCallback(s.e,!0,!0),r=null),i}(t,r,e)}var i;return t}},ms=function(f,r,l,h){var p=Lo.isArray;function t(t){var e,n=this._promise=new f(r);t instanceof f&&(e=t,n._propagateFrom(e,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return t.prototype.length=function(){return this._length},t.prototype.promise=function(){return this._promise},t.prototype._init=function t(e,n){var r=l(this._values,this._promise);if(r instanceof f){if(r=r._target(),!(this._values=r)._isFulfilled())return r._isPending()?void r._then(t,this._reject,void 0,this,n):void this._reject(r._reason());if(r=r._value(),!p(r)){var i=new f.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(i)}}else if(!p(r))return void this._promise._reject(h("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0!==r.length){var o=this.getActualLength(r.length);this._length=o,this._values=this.shouldCopyValues()?new Array(o):this._values;for(var s=this._promise,a=0;a<o;++a){var u=this._isResolved(),c=l(r[a],s);c instanceof f?(c=c._target(),u?c._ignoreRejections():c._isPending()?c._proxyPromiseArray(this,a):c._isFulfilled()?this._promiseFulfilled(c._value(),a):this._promiseRejected(c._reason(),a)):u||this._promiseFulfilled(c,a)}}else-5===n?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{}}}(n))},t.prototype._isResolved=function(){return null===this._values},t.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},t.prototype.__hardReject__=t.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},t.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},t.prototype._promiseFulfilled=function(t,e){this._values[e]=t,++this._totalResolved>=this._length&&this._resolve(this._values)},t.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},t.prototype.shouldCopyValues=function(){return!0},t.prototype.getActualLength=function(t){return t},t},bs=function(){var i,a=Zo,s=Lo,f=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,u=null,o=null,c=!1;function l(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);r(this,l),32<e&&this.uncycle()}function h(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i=u.test(r)||"    (No stack trace)"===r,o=i&&d(r);i&&!o&&(c&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function p(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}s.inherits(l,Error),l.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(r=(t=this._length=r)-1;0<=r;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<t;++r){var s=n[e[r].stack];if(void 0!==s&&s!==r){0<s&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var a=0<r?e[r-1]:this;a._length=s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._parent._length+1):(a._parent=void 0,1);for(var u=a._length+1,c=r-2;0<=c;--c)e[c]._length=u,u++;return}}}},l.prototype.parent=function(){return this._parent},l.prototype.hasParent=function(){return void 0!==this._parent},l.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=l.parseStackAndMessage(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(h(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;0<=a;--a)if(r[a]===o){s=a;break}for(var a=s;0<=a;--a){var u=r[a];if(e[i]!==u)break;e.pop(),i--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),s.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");n<e.length&&(e[n]=e[n].join("\n"));return t+"\n"+e.join("\n")}(n,r)),s.notEnumerableProp(t,"__stackCleaned__",!0)}},l.parseStackAndMessage=function(t){var e=t.stack;return{message:t.toString(),stack:h(e="string"==typeof e&&0<e.length?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||u.test(r))break}return 0<n&&(e=e.slice(n)),e}(t):["    (No stack trace)"])}},l.formatAndLogError=function(t,e){if("undefined"!=typeof console){var n;if("object"==typeof t||"function"==typeof t){var r=t.stack;n=e+o(r,t)}else n=e+String(t);"function"==typeof i?i(n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}},l.unhandledRejection=function(t){l.formatAndLogError(t,"^--- With additional stack trace: ")},l.isSupported=function(){return"function"==typeof r},l.fireRejectionEvent=function(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){a.throwLater(t)}var o=!1;try{o=v(t,n,r)}catch(t){o=!0,a.throwLater(t)}var s=!1;if(g)try{s=g(t.toLowerCase(),{reason:n,promise:r})}catch(t){s=!0,a.throwLater(t)}o||i||s||"unhandledRejection"!==t||l.formatAndLogError(n,"Unhandled rejection ")};var d=function(){return!1},n=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function y(t){var e=t.match(n);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}l.setBounds=function(t,e){if(l.isSupported()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,u=0;u<i.length;++u){if(c=y(i[u])){n=c.fileName,s=c.line;break}}for(u=0;u<o.length;++u){var c;if(c=y(o[u])){r=c.fileName,a=c.line;break}}s<0||a<0||!n||!r||n!==r||a<=s||(d=function(t){if(f.test(t))return!0;var e=y(t);return!!(e&&e.fileName===n&&s<=e.line&&e.line<=a)})}};var g,r=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():p(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,u=t,o=e;var n=Error.captureStackTrace;return d=function(t){return f.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,n(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var r,i=new Error;if("string"==typeof i.stack&&0<=i.stack.split("\n")[0].indexOf("stackDetection@"))return u=/@/,o=e,c=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r="stack"in t}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(o=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?p(e):e.toString()},null):(u=t,o=e,function(e){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}(),v=function(){if(s.isNode)return function(t,e,n){return"rejectionHandled"===t?Tr.emit(t,n):Tr.emit(t,e,n)};var r=!1,e=!0;try{var t=new self.CustomEvent("test");r=t instanceof CustomEvent}catch(t){}if(!r)try{var n=document.createEvent("CustomEvent");n.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(n)}catch(t){e=!1}e&&(g=function(t,e){var n;return r?n=new self.CustomEvent(t,{detail:e,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(n=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!0,e),!!n&&!self.dispatchEvent(n)});var o={};return o.unhandledRejection="onunhandledRejection".toLowerCase(),o.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,n){var r=o[t],i=self[r];return!!i&&("rejectionHandled"===t?i.call(self,n):i.call(self,e,n),!0)}}();return"undefined"!=typeof console&&void 0!==console.warn&&(i=function(t){console.warn(t)},s.isNode&&Tr.stderr.isTTY?i=function(t){Tr.stderr.write("[31m"+t+"[39m\n")}:s.isNode||"string"!=typeof(new Error).stack||(i=function(t){console.warn("%c"+t,"color: red")})),l},_s=function(t,i){var n,r,o=t._getDomain,e=Zo,s=gs.Warning,a=Lo,u=a.canAttachTrace,c=a.isNode&&(!!Tr.env.BLUEBIRD_DEBUG||"development"===Tr.env.NODE_ENV);return c&&e.disableTrampolineIfNecessary(),t.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},t.prototype._ensurePossibleRejectionHandled=function(){0==(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),e.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){i.fireRejectionEvent("rejectionHandled",n,void 0,this)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),i.fireRejectionEvent("unhandledRejection",r,t,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return 0<(524288&this._bitField)},t.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return 0<(2097152&this._bitField)},t.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},t.prototype._isCarryingStackTrace=function(){return 0<(1048576&this._bitField)},t.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},t.prototype._captureStackTrace=function(t){return(c||t&&i.isSupported())&&(this._traceForced=t,this._trace=new i(this._peekContext())),this},t.prototype._attachExtraTrace=function(t,e){if((c||this._traceForced)&&u(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=i.parseStackAndMessage(t);a.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),a.notEnumerableProp(t,"__stackCleaned__",!0)}}},t.prototype._warn=function(t){var e=new s(t),n=this._peekContext();if(n)n.attachExtraTrace(e);else{var r=i.parseStackAndMessage(e);e.stack=r.message+"\n"+r.stack.join("\n")}i.formatAndLogError(e,"")},t.onPossiblyUnhandledRejection=function(t){var e=o();r="function"==typeof t?null===e?t:e.bind(t):void 0},t.onUnhandledRejectionHandled=function(t){var e=o();n="function"==typeof t?null===e?t:e.bind(t):void 0},t.longStackTraces=function(){if(e.haveItemsQueued()&&!1===c)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");(c=i.isSupported())&&e.disableTrampolineIfNecessary()},t.hasLongStackTraces=function(){return c&&i.isSupported()},i.isSupported()||(t.longStackTraces=function(){},c=!1),function(){return c}},ws=function(t,e,n){var r=[];function i(){this._trace=new e(o())}function o(){var t=r.length-1;if(0<=t)return r[t]}return i.prototype._pushContext=function(){n()&&void 0!==this._trace&&r.push(this._trace)},i.prototype._popContext=function(){n()&&void 0!==this._trace&&r.pop()},t.prototype._peekContext=o,t.prototype._pushContext=i.prototype._pushContext,t.prototype._popContext=i.prototype._popContext,function(){if(n())return new i}},Es=function(h){var t=Lo,e=gs,p=t.tryCatch,d=t.errorObj,y=Gi.keys,g=e.TypeError;function n(t,e,n){this._instances=t,this._callback=e,this._promise=n}return n.prototype.doFilter=function(t){for(var e,n,r,i=this._callback,o=this._promise._boundValue(),s=0,a=this._instances.length;s<a;++s){var u=this._instances[s],c=u===Error||null!=u&&u.prototype instanceof Error;if(c&&t instanceof u)return(f=p(i).call(o,t))===d?(h.e=f.e,h):f;if("function"==typeof u&&!c){var f,l=(e=t,void 0,n={},(r=p(u).call(n,e))===d?r:y(n).length?(d.e=new g("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),d):r);if(l===d){t=d.e;break}if(l)return(f=p(i).call(o,t))===d?(h.e=f.e,h):f}}return h.e=t,h},n},xs=Lo.maybeWrapAsError,As=gs.TimeoutError,Fs=gs.OperationalError,js=Lo.haveGetters;function ks(t){return t instanceof Error&&Gi.getPrototypeOf(t)===Error.prototype}var Ss=/^(?:name|message|stack|cause)$/,Cs;function Ts(t){var e;if(ks(t)){(e=new Fs(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=Gi.keys(t),r=0;r<n.length;++r){var i=n[r];Ss.test(i)||(e[i]=t[i])}return e}return Lo.markAsOriginatingFromRejection(t),t}function Os(s){return function(t,e){if(null!==s){if(t){var n=Ts(xs(t));s._attachExtraTrace(n),s._reject(n)}else if(2<arguments.length){for(var r=arguments.length,i=new Array(r-1),o=1;o<r;++o)i[o-1]=arguments[o];s._fulfill(i)}else s._fulfill(e);s=null}}}if(Cs=js?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=Os(t),this.callback=this.asCallback},js){var Ps={get:function(){return Os(this.promise)}};Gi.defineProperty(Cs.prototype,"asCallback",Ps),Gi.defineProperty(Cs.prototype,"callback",Ps)}Cs._nodebackForPromise=Os,Cs.prototype.toString=function(){return"[object PromiseResolver]"},Cs.prototype.resolve=Cs.prototype.fulfill=function(t){if(!(this instanceof Cs))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},Cs.prototype.reject=function(t){if(!(this instanceof Cs))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},Cs.prototype.progress=function(t){if(!(this instanceof Cs))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},Cs.prototype.cancel=function(t){this.promise.cancel(t)},Cs.prototype.timeout=function(){this.reject(new As("timeout"))},Cs.prototype.isResolved=function(){return this.promise.isResolved()},Cs.prototype.toJSON=function(){return this.promise.toJSON()};var Ms=Cs,Ds=function(a,u){var c=Lo,f=Zo,l=c.tryCatch,h=c.errorObj;a.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},a.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},a.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},a.prototype._doProgressWith=function(t){var e=t.value,n=t.handler,r=t.promise,i=t.receiver,o=l(n).call(i,e);if(o===h){if(null!=o.e&&"StopProgressPropagation"!==o.e.name){var s=c.canAttachTrace(o.e)?o.e:new Error(c.toString(o.e));r._attachExtraTrace(s),r._progress(o.e)}}else o instanceof a?o._then(r._progress,null,null,r,void 0):r._progress(o)},a.prototype._progressUnchecked=function(t){for(var e=this._length(),n=this._progress,r=0;r<e;r++){var i=this._progressHandlerAt(r),o=this._promiseAt(r);if(o instanceof a)"function"==typeof i?f.invoke(this._doProgressWith,this,{handler:i,promise:o,receiver:this._receiverAt(r),value:t}):f.invoke(n,o,t);else{var s=this._receiverAt(r);"function"==typeof i?i.call(s,t,o):s instanceof u&&!s._isResolved()&&s._promiseProgressed(t,o)}}}},Rs=function(o,s,t,a){var u=Lo,c=u.tryCatch;o.method=function(n){if("function"!=typeof n)throw new o.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var t=new o(s);t._captureStackTrace(),t._pushContext();var e=c(n).apply(this,arguments);return t._popContext(),t._resolveFromSyncValue(e),t}},o.attempt=o.try=function(t,e,n){if("function"!=typeof t)return a("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var r=new o(s);r._captureStackTrace(),r._pushContext();var i=u.isArray(e)?c(t).apply(n,e):c(t).call(n,e);return r._popContext(),r._resolveFromSyncValue(i),r},o.prototype._resolveFromSyncValue=function(t){t===u.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}},Is=function(o,s,a){var n=function(t,e){this._reject(e)},u=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(n,n,null,this,t)},c=function(t,e){this._isPending()&&this._resolveCallback(e.target)},f=function(t,e){e.promiseRejectionQueued||this._reject(t)};o.prototype.bind=function(t){var e=a(t),n=new o(s);n._propagateFrom(this,1);var r=this._target();if(n._setBoundTo(e),e instanceof o){var i={promiseRejectionQueued:!1,promise:n,target:r,bindingPromise:e};r._then(s,u,n._progress,n,i),e._then(c,f,n._progress,n,i)}else n._resolveCallback(r);return n},o.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},o.prototype._isBound=function(){return 131072==(131072&this._bitField)},o.bind=function(t,e){var n=a(t),r=new o(s);return r._setBoundTo(n),n instanceof o?n._then(function(){r._resolveCallback(e)},r._reject,r._progress,r,null):r._resolveCallback(e),r}},Bs=function(o,s,a){var t=Lo,u=t.isPrimitive,c=t.thrower;function f(){return this}function l(){throw this}function h(t,e,n){var r,i,o;return r=u(e)?n?(o=e,function(){return o}):(i=e,function(){throw i}):n?f:l,t._then(r,c,void 0,e,void 0)}function r(t){var e=this.promise,n=this.handler,r=e._isBound()?n.call(e._boundValue()):n();if(void 0!==r){var i=a(r,e);if(i instanceof o)return h(i=i._target(),t,e.isFulfilled())}return e.isRejected()?(s.e=t,s):t}function i(t){var e=this.promise,n=this.handler,r=e._isBound()?n.call(e._boundValue(),t):n(t);if(void 0!==r){var i=a(r,e);if(i instanceof o)return h(i=i._target(),t,!0)}return t}o.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var n={promise:this,handler:t};return this._then(e?r:i,e?r:void 0,void 0,n,void 0)},o.prototype.lastly=o.prototype.finally=function(t){return this._passThroughHandler(t,!0)},o.prototype.tap=function(t){return this._passThroughHandler(t,!1)}},Ls=Lo.isPrimitive,Ns=function(t){var e=function(){return this},n=function(){throw this},r=function(){},i=function(){throw void 0},o=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype.return=t.prototype.thenReturn=function(t){return void 0===t?this.then(r):Ls(t)?this._then(o(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return void 0===t?this.then(i):Ls(t)?this._then(o(t,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,t,void 0)}},Us=function(t){function e(t){this._settledValue=void 0!==t?(t=t._target(),this._bitField=t._bitField,t._settledValue):void(this._bitField=0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return 0<(268435456&this._bitField)},e.prototype.isRejected=t.prototype._isRejected=function(){return 0<(134217728&this._bitField)},e.prototype.isPending=t.prototype._isPending=function(){return 0==(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return 0<(402653184&this._bitField)},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e},zs=function(f,l,h,p){var t=Lo,d=t.canEvaluate,o=t.tryCatch,s=t.errorObj;if(d){for(var e=function(t){for(var e=[],n=1;n<=t;++n)e.push("holder.p"+n);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,e.join(", ")))},y=[],n=[void 0],r=1;r<=5;++r)y.push(new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,r))),n.push(e(r));var g=function(t,e){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=e,this.total=t,this.now=0};g.prototype.callers=n,g.prototype.checkFulfillment=function(t){var e=this.now;e++;var n=this.total;if(n<=e){var r=this.callers[n];t._pushContext();var i=o(r)(this);t._popContext(),i===s?t._rejectCallback(i.e,!1,!0):t._resolveCallback(i)}else this.now=e};var v=function(t){this._reject(t)}}f.join=function(){var t,e=arguments.length-1;if(0<e&&"function"==typeof arguments[e]&&(t=arguments[e],e<6&&d)){(c=new f(p))._captureStackTrace();for(var n=new g(e,t),r=y,i=0;i<e;++i){var o=h(arguments[i],c);o instanceof f?(o=o._target())._isPending()?o._then(r[i],v,void 0,c,n):o._isFulfilled()?r[i].call(c,o._value(),n):c._reject(o._reason()):r[i].call(c,o,n)}return c}for(var s=arguments.length,a=new Array(s),u=0;u<s;++u)a[u]=arguments[u];t&&a.pop();var c=new l(a).promise();return void 0!==t?c.spread(t):c}},qs=function(f,t,i,l,o){var s=f._getDomain,a=Zo,e=Lo,h=e.tryCatch,p=e.errorObj,d={},u=[];function c(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=s();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=1<=n?[]:u,a.invoke(y,this,void 0)}function y(){this._init$(void 0,-2)}function g(t,e,n,r){var i="object"==typeof n&&null!==n?n.concurrency:0;return new c(t,e,i="number"==typeof i&&isFinite(i)&&1<=i?i:0,r)}e.inherits(c,t),c.prototype._init=function(){},c.prototype._promiseFulfilled=function(t,e){var n=this._values,r=this.length(),i=this._preservedValues,o=this._limit;if(n[e]===d){if(n[e]=t,1<=o&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(1<=o&&this._inFlight>=o)return n[e]=t,void this._queue.push(e);null!==i&&(i[e]=t);var s=this._callback,a=this._promise._boundValue();this._promise._pushContext();var u=h(s).call(a,t,e,r);if(this._promise._popContext(),u===p)return this._reject(u.e);var c=l(u,this._promise);if(c instanceof f){if((c=c._target())._isPending())return 1<=o&&this._inFlight++,n[e]=d,c._proxyPromiseArray(this,e);if(!c._isFulfilled())return this._reject(c._reason());u=c._value()}n[e]=u}r<=++this._totalResolved&&(null!==i?this._filter(n,i):this._resolve(n))},c.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;0<t.length&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},c.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},c.prototype.preservedValues=function(){return this._preservedValues},f.prototype.map=function(t,e){return"function"!=typeof t?i("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):g(this,t,e,null).promise()},f.map=function(t,e,n,r){return"function"!=typeof e?i("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):g(t,e,n,r).promise()}},Hs=function(t){var e=Zo,n=gs.CancellationError;t.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,n=this;void 0!==(e=n._cancellationParent)&&e.isCancellable();)n=e;this._unsetCancellable(),n._target()._rejectCallback(t,!1,!0)},t.prototype.cancel=function(t){return this.isCancellable()&&(void 0===t&&(t=new n),e.invokeLater(this._cancel,this,t)),this},t.prototype.cancellable=function(){return this._cancellable()||(e.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0),this},t.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},t.prototype.fork=function(t,e,n){var r=this._then(t,e,n,void 0,void 0);return r._setCancellable(),r._cancellationParent=void 0,r}},Ks=function(c,u,f,e){var n=gs.TypeError,t=Lo.inherits,r=c.PromiseInspection;function l(t){for(var e=t.length,n=0;n<e;++n){var r=t[n];if(r.isRejected())return c.reject(r.error());t[n]=r._settledValue}return t}function h(t){setTimeout(function(){throw t},0)}function i(i,o){var s=0,a=i.length,u=c.defer();return function t(){if(a<=s)return u.resolve();var e,n,r=(e=i[s++],(n=f(e))!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&n._setDisposable(e._getDisposer()),n);if(r instanceof c&&r._isDisposable()){try{r=f(r._getDisposer().tryDispose(o),i.promise)}catch(t){return h(t)}if(r instanceof c)return r._then(t,h,null,null,null)}t()}(),u.promise}function p(t){var e=new r;return e._settledValue=t,e._bitField=268435456,i(this,e).thenReturn(t)}function d(t){var e=new r;return e._settledValue=t,e._bitField=134217728,i(this,e).thenThrow(t)}function y(t,e,n){this._data=t,this._promise=e,this._context=n}function o(t,e,n){this.constructor$(t,e,n)}function g(t){return y.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}y.prototype.data=function(){return this._data},y.prototype.promise=function(){return this._promise},y.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},y.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},y.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},t(o,y),o.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},c.using=function(){var t=arguments.length;if(t<2)return u("you must pass at least 2 arguments to Promise.using");var n=arguments[t-1];if("function"!=typeof n)return u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");t--;for(var e=new Array(t),r=0;r<t;++r){var i=arguments[r];if(y.isDisposer(i)){var o=i;(i=i.promise())._setDisposable(o)}else{var s=f(i);s instanceof c&&(i=s._then(g,null,null,{resources:e,index:r},void 0))}e[r]=i}var a=c.settle(e).then(l).then(function(t){var e;a._pushContext();try{e=n.apply(void 0,t)}finally{a._popContext()}return e})._then(p,d,void 0,e,void 0);return e.promise=a},c.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},c.prototype._isDisposable=function(){return 0<(262144&this._bitField)},c.prototype._getDisposer=function(){return this._disposer},c.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},c.prototype.disposer=function(t){if("function"==typeof t)return new o(t,this,e());throw new n}},$s=function(a,r,i,u){var s=gs.TypeError,t=Lo,c=t.errorObj,f=t.tryCatch,o=[];function l(t,e,n,r){(this._promise=new a(i))._captureStackTrace(),this._stack=r,this._generatorFunction=t,this._receiver=e,this._generator=void 0,this._yieldHandlers="function"==typeof n?[n].concat(o):o}l.prototype.promise=function(){return this._promise},l.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},l.prototype._continue=function(t){if(t===c)return this._promise._rejectCallback(t.e,!1,!0);var e=t.value;if(!0===t.done)this._promise._resolveCallback(e);else{var n=u(e,this._promise);if(!(n instanceof a)&&null===(n=function(t,e,n){for(var r=0;r<e.length;++r){n._pushContext();var i=f(e[r])(t);if(n._popContext(),i===c){n._pushContext();var o=a.reject(c.e);return n._popContext(),o}var s=u(i,n);if(s instanceof a)return s}return null}(n,this._yieldHandlers,this._promise)))return void this._throw(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",e)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));n._then(this._next,this._throw,void 0,this,null)}},l.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},l.prototype._next=function(t){this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},a.coroutine=function(n,t){if("function"!=typeof n)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=Object(t).yieldHandler,i=l,o=(new Error).stack;return function(){var t=n.apply(this,arguments),e=new i(void 0,void 0,r,o);return e._generator=t,e._next(void 0),e.promise()}},a.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new s("fn must be a function\n\n    See http://goo.gl/916lJJ\n");o.push(t)},a.spawn=function(t){if("function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var e=new l(t,this),n=e.promise();return e._run(a.spawn),n}},Ws=function(t){var r=Lo,i=Zo,o=r.tryCatch,s=r.errorObj;function a(t,e){if(!r.isArray(t))return u.call(this,t,e);var n=o(e).apply(this._boundValue(),[null].concat(t));n===s&&i.throwLater(n.e)}function u(t,e){var n=this._boundValue(),r=void 0===t?o(e).call(n,null):o(e).call(n,null,t);r===s&&i.throwLater(r.e)}function c(t,e){if(!t){var n=this._target()._getCarriedStackTrace();n.cause=t,t=n}var r=o(e).call(this._boundValue(),t);r===s&&i.throwLater(r.e)}t.prototype.asCallback=t.prototype.nodeify=function(t,e){if("function"==typeof t){var n=u;void 0!==e&&Object(e).spread&&(n=a),this._then(n,c,void 0,this,t)}return this}},Ys=Object.create;if(Ys){var Vs=Ys(null),Js=Ys(null);Vs[" size"]=Js[" size"]=0}var Qs=function(i){var o,r,s=Lo,a=s.canEvaluate,u=s.isIdentifier,e=function(t){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,t))(f)},n=function(t){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",t))},c=function(t,e,n){var r=n[t];if("function"!=typeof r){if(!u(t))return null;if(r=e(t),n[t]=r,n[" size"]++,512<n[" size"]){for(var i=Object.keys(n),o=0;o<256;++o)delete n[i[o]];n[" size"]=i.length-256}}return r};function f(t,e){var n;if(null!=t&&(n=t[e]),"function"==typeof n)return n;var r="Object "+s.classString(t)+" has no method '"+s.toString(e)+"'";throw new i.TypeError(r)}function l(t){return f(t,this.pop()).apply(t,this)}function h(t){return t[this]}function p(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}o=function(t){return c(t,e,Vs)},r=function(t){return c(t,n,Js)},i.prototype.call=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;r<e;++r)n[r-1]=arguments[r];if(a){var i=o(t);if(null!==i)return this._then(i,void 0,void 0,n,void 0)}return n.push(t),this._then(l,void 0,void 0,n,void 0)},i.prototype.get=function(t){var e;if("number"==typeof t)e=p;else if(a){var n=r(t);e=null!==n?n:h}else e=h;return this._then(e,void 0,void 0,t,void 0)}},Gs=function(r,t,i,o){var e=Lo,s=e.isObject,a=Gi;function u(t){for(var e=a.keys(t),n=e.length,r=new Array(2*n),i=0;i<n;++i){var o=e[i];r[i]=t[o],r[i+n]=o}this.constructor$(r)}function n(t){var e,n=i(t);return s(n)?(e=n instanceof r?n._then(r.props,void 0,void 0,void 0,void 0):new u(n).promise(),n instanceof r&&e._propagateFrom(n,4),e):o("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}e.inherits(u,t),u.prototype._init=function(){this._init$(void 0,-3)},u.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){for(var n={},r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i];this._resolve(n)}},u.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(t){return t>>1},r.prototype.props=function(){return n(this)},r.props=function(t){return n(t)}},Xs=function(c,f,l,h){var p=Lo.isArray,d=function(e){return e.then(function(t){return n(t,e)})};function n(t,e){var n=l(t);if(n instanceof c)return d(n);if(!p(t))return h("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var r=new c(f);void 0!==e&&r._propagateFrom(e,5);for(var i=r._fulfill,o=r._reject,s=0,a=t.length;s<a;++s){var u=t[s];(void 0!==u||s in t)&&c.cast(u)._then(i,o,void 0,r,null)}return r}c.race=function(t){return n(t,void 0)},c.prototype.race=function(){return n(this,void 0)}},Zs=function(d,t,i,y,u){var c=d._getDomain,f=Zo,e=Lo,g=e.tryCatch,v=e.errorObj;function o(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=r===u?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var i=y(n,this._promise),o=!1,s=i instanceof d;s&&((i=i._target())._isPending()?i._proxyPromiseArray(this,-1):i._isFulfilled()?(n=i._value(),this._gotAccum=!0):(this._reject(i._reason()),o=!0)),s||this._zerothIsAccum||(this._gotAccum=!0);var a=c();this._callback=null===a?e:a.bind(e),this._accum=n,o||f.invoke(l,this,void 0)}function l(){this._init$(void 0,-5)}function s(t,e,n,r){return"function"!=typeof e?i("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):new o(t,e,n,r).promise()}e.inherits(o,t),o.prototype._init=function(){},o.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},o.prototype._promiseFulfilled=function(t,e){var n=this._values;n[e]=t;var r,i=this.length(),o=this._preservedValues,s=null!==o,a=this._gotAccum,u=this._valuesPhase;if(!u)for(u=this._valuesPhase=new Array(i),r=0;r<i;++r)u[r]=0;if(r=u[e],0===e&&this._zerothIsAccum?(this._accum=t,this._gotAccum=a=!0,u[e]=0===r?1:2):-1===e?(this._accum=t,this._gotAccum=a=!0):0===r?u[e]=1:(u[e]=2,this._accum=t),a){for(var c,f=this._callback,l=this._promise._boundValue(),h=this._reducingIndex;h<i;++h)if(2!==(r=u[h])){if(1!==r)return;if(t=n[h],this._promise._pushContext(),c=s?(o.push(t),g(f).call(l,t,h,i)):g(f).call(l,this._accum,t,h,i),this._promise._popContext(),c===v)return this._reject(c.e);var p=y(c,this._promise);if(p instanceof d){if((p=p._target())._isPending())return u[h]=4,p._proxyPromiseArray(this,h);if(!p._isFulfilled())return this._reject(p._reason());c=p._value()}this._reducingIndex=h+1,this._accum=c}else this._reducingIndex=h+1;this._resolve(s?o:this._accum)}},d.prototype.reduce=function(t,e){return s(this,t,e,null)},d.reduce=function(t,e,n,r){return s(t,e,n,r)}},ta=function(t,e){var r=t.PromiseInspection;function n(t){this.constructor$(t)}Lo.inherits(n,e),n.prototype._promiseResolved=function(t,e){this._values[t]=e,++this._totalResolved>=this._length&&this._resolve(this._values)},n.prototype._promiseFulfilled=function(t,e){var n=new r;n._bitField=268435456,n._settledValue=t,this._promiseResolved(e,n)},n.prototype._promiseRejected=function(t,e){var n=new r;n._bitField=134217728,n._settledValue=t,this._promiseResolved(e,n)},t.settle=function(t){return new n(t).promise()},t.prototype.settle=function(){return new n(this).promise()}},ea=function(t,e,i){var n=Lo,r=gs.RangeError,o=gs.AggregateError,s=n.isArray;function a(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return i("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var n=new a(t),r=n.promise();return n.setHowMany(e),n.init(),r}n.inherits(a,e),a.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},a.prototype.init=function(){this._initialized=!0,this._init()},a.prototype.setUnwrap=function(){this._unwrap=!0},a.prototype.howMany=function(){return this._howMany},a.prototype.setHowMany=function(t){this._howMany=t},a.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},a.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new o,n=this.length();n<this._values.length;++n)e.push(this._values[n]);this._reject(e)}},a.prototype._fulfilled=function(){return this._totalResolved},a.prototype._rejected=function(){return this._values.length-this.length()},a.prototype._addRejected=function(t){this._values.push(t)},a.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},a.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},a.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new r(e)},a.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return u(t,e)},t.prototype.some=function(t){return u(this,t)},t._SomePromiseArray=a},na=function(l,h){var p={},d=Lo,y=Ms._nodebackForPromise,g=d.withAppended,v=d.maybeWrapAsError,t=d.canEvaluate,m=gs.TypeError,b={__isPromisified__:!0},e=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),_=function(t){return d.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function o(t){return!e.test(t)}function w(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function f(t,e,n,r){for(var i,o,s,a,u=d.inheritedDataKeys(t),c=[],f=0;f<u.length;++f){var l=u[f],h=t[l],p=r===_||_(l,h,t);"function"!=typeof h||w(h)||(i=t,o=l,s=e,void 0,(a=d.getDataPropertyOrDefault(i,o+s,b))&&w(a))||!r(l,h,t,p)||c.push(l,h)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}(c,e,n),c}var E=function(t){return t.replace(/([$])/,"\\$")};var x=t?function(t,i,e,n){var r,o=Math.max(0,("number"==typeof(r=n).length?Math.max(Math.min(r.length,1024),0):0)-1),s=function(t){for(var e=[t],n=Math.max(0,t-1-3),r=t-1;n<=r;--r)e.push(r);for(r=t+1;r<=3;++r)e.push(r);return e}(o),a="string"==typeof t||i===p;function u(t){var e,n=(e=t,d.filledRange(e,"_arg","")).join(", "),r=0<t?", ":"";return(a?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===i?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n").replace("{{args}}",n).replace(", ",r)}var c,f="string"==typeof t?"this != null ? this['"+t+"'] : fn":"fn";return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL","'use strict';                            \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise);                      \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n        ".replace("Parameters",(c=o,d.filledRange(Math.max(c,3),"_arg",""))).replace("[CodeForSwitchCase]",function(){for(var t="",e=0;e<s.length;++e)t+="case "+s[e]+":"+u(s[e]);return t+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",a?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}()).replace("[GetFunctionCode]",f))(l,n,i,g,v,y,d.tryCatch,d.errorObj,d.notEnumerableProp,h)}:function(i,o,t,e){var s=function(){return this}(),a=i;function n(){var t=o;o===p&&(t=this);var e=new l(h);e._captureStackTrace();var n="string"==typeof a&&this!==s?this[a]:i,r=y(e);try{n.apply(t,g(arguments,r))}catch(t){e._rejectCallback(v(t),!0,!0)}return e}return"string"==typeof a&&(i=e),d.notEnumerableProp(n,"__isPromisified__",!0),n};function u(t,e,n,r){for(var i=new RegExp(E(e)+"$"),o=f(t,e,i,n),s=0,a=o.length;s<a;s+=2){var u=o[s],c=o[s+1];t[u+e]=r===x?x(u,p,u,c,e):r(c,function(){return x(u,p,u,c,e)})}return d.toFastProperties(t),t}l.promisify=function(t,e){if("function"!=typeof t)throw new m("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(w(t))return t;var n,r,i=(n=t,r=arguments.length<2?p:e,x(n,r,void 0,n));return d.copyDescriptors(t,i,o),i},l.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");var n=(e=Object(e)).suffix;"string"!=typeof n&&(n="Async");var r=e.filter;"function"!=typeof r&&(r=_);var i=e.promisifier;if("function"!=typeof i&&(i=x),!d.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=d.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&d.isClass(a)&&(u(a.prototype,n,r,i),u(a,n,r,i))}return u(t,n,r,i)}},ra=function(t){var r=t._SomePromiseArray;function e(t){var e=new r(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}},ia=function(t,n){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,n)},t.each=function(t,e){return r(t,e,null,n)}},oa=function(r,i){var o=Lo,s=r.TimeoutError,a=function(t){return e(+this).thenReturn(t)},e=r.delay=function(t,e){if(void 0!==e)return e=+e,r.resolve(t)._then(a,null,null,e,void 0);e=t,t=void 0;var n=new r(i);return setTimeout(function(){n._fulfill()},e),n};function u(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function c(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}r.prototype.delay=function(t){return e(this,t)},r.prototype.timeout=function(t,e){t=+t;var n=this.then().cancellable();n._cancellationParent=this;var r=setTimeout(function(){!function(t,e){if(t.isPending()){"string"!=typeof e&&(e="operation timed out");var n=new s(e);o.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._cancel(n)}}(n,e)},t);return n._then(u,c,void 0,r,void 0)}},sa=function(t,r){var i=t.map;t.prototype.filter=function(t,e){return i(this,t,e,r)},t.filter=function(t,e,n){return i(t,e,n,r)}},aa=function(){var c,a=function(){return new u("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},t=function(){return new w.PromiseInspection(this._target())},e=function(t){return w.reject(new u(t))},o=Lo;c=o.isNode?function(){var t=Tr.domain;return void 0===t&&(t=null),t}:function(){return null},o.notEnumerableProp(w,"_getDomain",c);var f=Zo,n=gs,u=w.TypeError=n.TypeError;w.RangeError=n.RangeError,w.CancellationError=n.CancellationError,w.TimeoutError=n.TimeoutError,w.OperationalError=n.OperationalError,w.RejectionError=n.OperationalError,w.AggregateError=n.AggregateError;var l=function(){},s={},h={e:null},p=vs(w,l),d=ms(w,l,p,e),r=bs(),i=_s(w,r),y=ws(w,r,i),g=Es(h),v=Ms,m=v._nodebackForPromise,b=o.errorObj,_=o.tryCatch;function w(t){if("function"!=typeof t)throw new u("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==w)throw new u("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==l&&this._resolveFromResolver(t)}function E(t){var e=new w(l);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._progressHandler0=t,e._promise0=t,e._receiver0=t,e._settledValue=t}return w.prototype.toString=function(){return"[object Promise]"},w.prototype.caught=w.prototype.catch=function(t){var e=arguments.length;if(1<e){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var o=arguments[n];if("function"!=typeof o)return w.reject(new u("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));r[i++]=o}r.length=i,t=arguments[n];var s=new g(r,t,this);return this._then(void 0,s.doFilter,void 0,s,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},w.prototype.reflect=function(){return this._then(t,t,void 0,this,void 0)},w.prototype.then=function(t,e,n){if(i()&&0<arguments.length&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+o.classString(t);1<arguments.length&&(r+=", "+o.classString(e)),this._warn(r)}return this._then(t,e,n,void 0,void 0)},w.prototype.done=function(t,e,n){this._then(t,e,n,void 0,void 0)._setIsFinal()},w.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,s,void 0)},w.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},w.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},w.prototype.all=function(){return new d(this).promise()},w.prototype.error=function(t){return this.caught(o.originatesFromRejection,t)},w.is=function(t){return t instanceof w},w.fromNode=function(t){var e=new w(l),n=_(t)(m(e));return n===b&&e._rejectCallback(n.e,!0,!0),e},w.all=function(t){return new d(t).promise()},w.defer=w.pending=function(){var t=new w(l);return new v(t)},w.resolve=w.fulfilled=w.cast=function(t){var e=p(t);if(!(e instanceof w)){var n=e;(e=new w(l))._fulfillUnchecked(n)}return e},w.reject=w.rejected=function(t){var e=new w(l);return e._captureStackTrace(),e._rejectCallback(t,!0),e},w.setScheduler=function(t){if("function"!=typeof t)throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=f._schedule;return f._schedule=t,e},w.prototype._then=function(t,e,n,r,i){var o=void 0!==i,s=o?i:new w(l);o||(s._propagateFrom(this,5),s._captureStackTrace());var a=this._target();a!==this&&(void 0===r&&(r=this._boundTo),o||s._setIsMigrated());var u=a._addCallbacks(t,e,n,s,r,c());return a._isResolved()&&!a._isSettlePromisesQueued()&&f.invoke(a._settlePromiseAtPostResolution,a,u),s},w.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},w.prototype._length=function(){return 131071&this._bitField},w.prototype._isFollowingOrFulfilledOrRejected=function(){return 0<(939524096&this._bitField)},w.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},w.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},w.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},w.prototype._setRejected=function(){this._bitField=134217728|this._bitField},w.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},w.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},w.prototype._isFinal=function(){return 0<(33554432&this._bitField)},w.prototype._cancellable=function(){return 0<(67108864&this._bitField)},w.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},w.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},w.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},w.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},w.prototype._isMigrated=function(){return 0<(4194304&this._bitField)},w.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];return void 0===e&&this._isBound()?this._boundValue():e},w.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},w.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},w.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},w.prototype._boundValue=function(){var t=this._boundTo;return void 0!==t&&t instanceof w?t.isFulfilled()?t.value():void 0:t},w.prototype._migrateCallbacks=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._progressHandlerAt(e),o=t._promiseAt(e),s=t._receiverAt(e);o instanceof w&&o._setIsMigrated(),this._addCallbacks(n,r,i,o,s,null)},w.prototype._addCallbacks=function(t,e,n,r,i,o){var s=this._length();if(131066<=s&&(s=0,this._setLength(0)),0===s)this._promise0=r,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===o?t:o.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===o?e:o.bind(e)),"function"==typeof n&&(this._progressHandler0=null===o?n:o.bind(n));else{var a=5*s-5;this[a+3]=r,this[a+4]=i,"function"==typeof t&&(this[a+0]=null===o?t:o.bind(t)),"function"==typeof e&&(this[a+1]=null===o?e:o.bind(e)),"function"==typeof n&&(this[a+2]=null===o?n:o.bind(n))}return this._setLength(s+1),s},w.prototype._setProxyHandlers=function(t,e){var n=this._length();if(131066<=n&&(n=0,this._setLength(0)),0===n)this._promise0=e,this._receiver0=t;else{var r=5*n-5;this[r+3]=e,this[r+4]=t}this._setLength(n+1)},w.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},w.prototype._resolveCallback=function(t,e){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(a(),!1,!0);var n=p(t,this);if(!(n instanceof w))return this._fulfill(t);var r=1|(e?4:0);this._propagateFrom(n,r);var i=n._target();if(i._isPending()){for(var o=this._length(),s=0;s<o;++s)i._migrateCallbacks(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else i._isFulfilled()?this._fulfillUnchecked(i._value()):this._rejectUnchecked(i._reason(),i._getCarriedStackTrace())}},w.prototype._rejectCallback=function(t,e,n){n||o.markAsOriginatingFromRejection(t);var r=o.ensureErrorObject(t),i=r===t;this._attachExtraTrace(r,!!e&&i),this._reject(t,i?void 0:r)},w.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=_(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,n),e=null)});n=!1,this._popContext(),void 0!==r&&r===b&&null!==e&&(e._rejectCallback(r.e,!0,!0),e=null)},w.prototype._settlePromiseFromHandler=function(t,e,n,r){var i;if(!r._isRejected())if(r._pushContext(),i=e!==s||this._isRejected()?_(t).call(e,n):_(t).apply(this._boundValue(),n),r._popContext(),i===b||i===r||i===h){var o=i===r?a():i.e;r._rejectCallback(o,!1,!0)}else r._resolveCallback(i)},w.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},w.prototype._followee=function(){return this._rejectionHandler0},w.prototype._setFollowee=function(t){this._rejectionHandler0=t},w.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},w.prototype._propagateFrom=function(t,e){0<(1&e)&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),0<(4&e)&&t._isBound()&&this._setBoundTo(t._boundTo)},w.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},w.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},w.prototype._settlePromiseAt=function(t){var e=this._promiseAt(t),n=e instanceof w;if(n&&e._isMigrated())return e._unsetIsMigrated(),f.invoke(this._settlePromiseAt,this,t);var r=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),i=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,o=this._settledValue,s=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof r?n?this._settlePromiseFromHandler(r,s,o,e):r.call(s,o,e):s instanceof d?s._isResolved()||(this._isFulfilled()?s._promiseFulfilled(o,e):s._promiseRejected(o,e)):n&&(this._isFulfilled()?e._fulfill(o):e._reject(o,i)),4<=t&&4==(31&t)&&f.invokeLater(this._setLength,this,0)},w.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},w.prototype._isSettlePromisesQueued=function(){return-1073741824==(-1073741824&this._bitField)},w.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},w.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},w.prototype._queueSettlePromises=function(){f.settlePromises(this),this._setSettlePromisesQueued()},w.prototype._fulfillUnchecked=function(t){if(t===this){var e=a();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),0<this._length()&&this._queueSettlePromises()},w.prototype._rejectUncheckedCheckError=function(t){var e=o.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},w.prototype._rejectUnchecked=function(t,e){if(t===this){var n=a();return this._attachExtraTrace(n),this._rejectUnchecked(n)}this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?f.throwLater(function(t){throw"stack"in t&&f.invokeFirst(r.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),0<this._length()?this._queueSettlePromises():this._ensurePossibleRejectionHandled())},w.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;e<t;e++)this._settlePromiseAt(e)},o.notEnumerableProp(w,"_makeSelfResolutionError",a),Ds(w,d),Rs(w,l,p,e),Is(w,l,p),Bs(w,h,p),Ns(w),Us(w),zs(w,d,p,l),qs(w.Promise=w,d,e,p,l),Hs(w),Ks(w,e,p,y),$s(w,e,l,p),Ws(w),Qs(w),Gs(w,d,p,e),Xs(w,l,p,e),Zs(w,d,e,p,l),ta(w,d),ea(w,d,e),na(w,l),ra(w),ia(w,l),oa(w,l),sa(w,l),o.toFastProperties(w),o.toFastProperties(w.prototype),E({a:1}),E({b:2}),E({c:3}),E(1),E(function(){}),E(void 0),E(!1),E(new w(l)),r.setBounds(f.firstLineError,o.lastLineError),w},ua;function ca(){try{Promise===fa&&(Promise=ua)}catch(t){}return fa}"undefined"!=typeof Promise&&(ua=Promise);var fa=aa();fa.noConflict=ca;var la=fa,ha={queue:[],drain:function(){this.queue.forEach(function(t){t()}),this.queue=[]}},pa=la.setScheduler(function(t){ha.queue.push(t),pa(function(){ha.drain()})});la.prototype._notifyUnhandledRejection=function(){var t=this;pa(function(){if(t._isRejectionUnhandled())throw t.reason()})};var da=ha,ya=!1;"undefined"!=typeof window&&void 0!==window.location&&(ya=!!window.location.search.match(/[?&]full-trace=true(?:$|&)/)),void 0!==Tr&&Tr.env&&Tr.env.UNEXPECTED_FULL_TRACE&&(la.longStackTraces(),ya=!0);var ga=ya,va=function(e){if(!e||"function"!=typeof e.then)return e;if(!e.isRejected)return e;if(e.isFulfilled())return e;if(e.isRejected())throw e.caught(function(){}),e.reason();var n=function(){},r=function(){},i=!1,o=void 0;if(e.then(function(t){i=!0,n(e)},function(t){i=!0,r(o=t)}),da.drain(),i&&o)throw o._isUnexpected&&Error.captureStackTrace&&Error.captureStackTrace(o),o;return i?e:(e._captureStackTrace&&!ga&&e._captureStackTrace(!0),new la(function(t,e){n=t,r=e}))};function ma(t){if(t&&"aggregate error"===t.message)for(var e=0;e<t.length;e+=1)ma(t[e]);else if(!t||!t._isUnexpected)throw t}var ba=ma,_a=e(function(t){var i=e(Wt),o=e(hn);function e(t){return t&&t.__esModule?t:{default:t}}function r(u){if("function"!=typeof u)throw new TypeError("expect.promise(...) requires a function argument to be supplied.\nSee http://unexpected.js.org/api/promise/ for more details.");return 2===u.length?new la(u):new la(function(t,n){var r=0,e=void 0,i=!1;function o(){i&&0===r&&t(e)}function s(t){void 0!==t&&void 0===e&&(e=t)}try{var a=va(u(function(e){return r+=1,function(){r-=1;var t=void 0;try{"function"==typeof e&&(c(t=va(e.apply(void 0,arguments)))?(r+=1,t.then(function(t){s(t),r-=1,o()},n)):s(t))}catch(t){return n(t)}return o(),t}}));c(a)?(r+=1,a.then(function(t){s(t),r-=1,o()},n)):s(a)}catch(t){return n(t)}i=!0,o()})}function c(t){return t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&"function"==typeof t.then}["all","any","settle"].forEach(function(n){r[n]=function(t){var e=la[n](function e(n){if(c(n))return[n];if(n&&"object"===(void 0===n?"undefined":(0,o.default)(n))){var r=[];return Object.keys(n).forEach(function(t){r.push.apply(r,(0,i.default)(e(n[t])))}),r}return[]}(t));return"settle"===n?e.then(function(t){return t.forEach(function(t){t.isRejected()&&ba(t.reason())}),t}):e}}),Object.keys(la).forEach(function(t){/^_|^on|^setScheduler|ongStackTraces/.test(t)||"function"!=typeof la[t]||void 0!==r[t]||(r[t]=la[t])}),t.exports=r});function wa(t,i,o){return t.and=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];function r(){return i.findTypeOf(e[0]).is("expect.it")?wa(e[0](o),i,o):i.apply(void 0,[o].concat(e))}return this.isFulfilled()?r():wa(this.then(r),i,o)},t}t(_a);var Ea=wa,xa=function(t){return"function"!=typeof t.isPending?_a(function(){return t}):t},Aa=3,Fa="undefined"!=typeof window&&void 0!==window.location&&window.location.search.match(/[?&]depth=(\d+)(?:$|&)/);Fa?Aa=parseInt(Fa[1],10):void 0!==Tr&&Tr.env.UNEXPECTED_DEPTH&&(Aa=parseInt(Tr.env.UNEXPECTED_DEPTH,10));var ja=Aa,ka=["message","line","sourceId","sourceURL","stack","stackArray"].reduce(function(t,e){return t[e]=!0,t},{});function Sa(t,e){this.errorMode=t&&t.errorMode||"default";var n=Error.call(this,"");if(Error.captureStackTrace)Error.captureStackTrace(this,Sa);else{try{throw n}catch(t){}this.stack=n.stack}this.expect=t,this.parent=e||null,this.name="UnexpectedError"}Sa.prototype=Object.create(Error.prototype),Sa.prototype.useFullStackTrace=ga;var Ca="You must either provide a format or a magicpen instance";function Ta(t){for(var e=t.length-1;0<=e;e-=1)if(""===t[e])return e+1;return-1}Sa.prototype.outputFromOptions=function(t){if(!t)throw new Error(Ca);if("string"==typeof t)return this.expect.createOutput(t);if(t.isMagicPen)return t.clone();if(t.output)return t.output.clone();if(t.format)return this.expect.createOutput(t.format);throw new Error(Ca)},Sa.prototype._isUnexpected=!0,Sa.prototype.isUnexpected=!0,Sa.prototype.buildDiff=function(t){var n=this.outputFromOptions(t),r=this.expect;return this.createDiff&&this.createDiff(n,function(t,e){return r.diff(t,e,n.clone())},function(t,e){return n.clone().appendInspected(t,(e||ja)-1)},function(t,e){return r.equal(t,e)})},Sa.prototype.getDefaultErrorMessage=function(t){var e=this.outputFromOptions(t);this.expect.testDescription?e.append(this.expect.standardErrorMessage(e.clone(),t)):"function"==typeof this.output&&this.output.call(e,e);for(var n=this;!n.createDiff&&n.parent;)n=n.parent;if(n&&n.createDiff){var r=n.buildDiff(t);r&&e.nl(2).append(r)}return e},Sa.prototype.getNestedErrorMessage=function(t){var e=this.outputFromOptions(t);this.expect.testDescription?e.append(this.expect.standardErrorMessage(e.clone(),t)):"function"==typeof this.output&&this.output.call(e,e);for(var n=this.parent;"bubble"===n.getErrorMode();)n=n.parent;return"string"==typeof t?t={format:t}:t&&t.isMagicPen&&(t={output:t}),e.nl().indentLines().i().block(n.getErrorMessage(_n.extend({},t||{},{compact:this.expect.subject===n.expect.subject}))),e},Sa.prototype.getDefaultOrNestedMessage=function(t){return this.hasDiff()?this.getDefaultErrorMessage(t):this.getNestedErrorMessage(t)},Sa.prototype.hasDiff=function(){return!!this.getDiffMethod()},Sa.prototype.getDiffMethod=function(){for(var t=this;!t.createDiff&&t.parent;)t=t.parent;return t&&t.createDiff||null},Sa.prototype.getDiff=function(t){for(var e=this;!e.createDiff&&e.parent;)e=e.parent;return e&&e.buildDiff(t)},Sa.prototype.getDiffMessage=function(t){var e=this.outputFromOptions(t),n=this.getDiff(t);return n?e.append(n):this.expect.testDescription?e.append(this.expect.standardErrorMessage(e.clone(),t)):"function"==typeof this.output&&this.output.call(e,e),e},Sa.prototype.getErrorMode=function(){if(this.parent)return this.errorMode;switch(this.errorMode){case"default":case"bubbleThrough":return this.errorMode;default:return"default"}},Sa.prototype.getErrorMessage=function(t){for(var e=this.parent;e&&"bubbleThrough"!==e.getErrorMode();)e=e.parent;if(e)return e.getErrorMessage(t);var n=this.getErrorMode();switch(n){case"nested":return this.getNestedErrorMessage(t);case"default":case"bubbleThrough":return this.getDefaultErrorMessage(t);case"bubble":return this.parent.getErrorMessage(t);case"diff":return this.getDiffMessage(t);case"defaultOrNested":return this.getDefaultOrNestedMessage(t);default:throw new Error("Unknown error mode: '"+n+"'")}},Sa.prototype.serializeMessage=function(t){if(!this._hasSerializedErrorMessage){var e="html"===t;if(e&&("htmlMessage"in this||(this.htmlMessage=this.getErrorMessage({format:"html"}).toString())),this.message="\n"+this.getErrorMessage({format:e?"text":t}).toString()+"\n",this.originalError&&this.originalError instanceof Error&&"string"==typeof this.originalError.stack){var n=this.originalError.stack.indexOf(this.originalError.message);this.stack=-1===n?this.message+"\n"+this.originalError.stack:this.message+this.originalError.stack.substr(n+this.originalError.message.length)}else if(/^(Unexpected)?Error:?\n/.test(this.stack)){var r=/^(?:Unexpected)?Error:?\n/.exec(this.stack);r&&(this.stack=this.message+this.stack.substr(r[0].length))}if(this.stack&&!this.useFullStackTrace){var i=this.stack.split(/\n/),o=Ta(i),s=i.filter(function(t,e){return e<o||!/node_modules[/\\]unexpected(?:-[^/\\]+)?[/\\]/.test(t)&&!/executeExpect.*node_modules[/\\]unexpected[/\\]/.test(i[e+1])});if(s.length!==i.length){var a=/^(\s*)/.exec(i[i.length-1])[1];"html"===t?s.push(a+"set the query parameter full-trace=true to see the full stack trace"):s.push(a+"set UNEXPECTED_FULL_TRACE=true to see the full stack trace")}this.stack=s.join("\n")}this._hasSerializedErrorMessage=!0}},Sa.prototype.clone=function(){var e=this,n=new Sa(this.expect);return Object.keys(e).forEach(function(t){ka[t]||(n[t]=e[t])}),n},Sa.prototype.getLabel=function(){for(var t=this;t&&!t.label;)t=t.parent;return t&&t.label||null},Sa.prototype.getParents=function(){for(var t=[],e=this.parent;e;)t.push(e),e=e.parent;return t},Sa.prototype.getAllErrors=function(){var t=this.getParents();return t.unshift(this),t},Object.__defineGetter__&&Object.defineProperty(Sa.prototype,"htmlMessage",{enumerable:!0,get:function(){return this.getErrorMessage({format:"html"}).toString()}});var Oa=Sa,Pa=e(function(t){var e,r=(e=hn)&&e.__esModule?e:{default:e};var i=[],n=!1,o=null;function s(t){return t.isPending()||t.isRejected()&&t.reason().uncaught}function a(){if("function"==typeof afterEach&&!n){n=!0;try{afterEach(function(){var t=void 0,e=!0;if(i.some(s)){var n=void 0;this.currentTest?(e="passed"===this.currentTest.state,n=this.currentTest.title):"object"===(void 0===o?"undefined":(0,r.default)(o))&&(e=0===o.failedExpectations.length,n=o.fullName),t=new Error(n+": You have created a promise that was not returned from the it block")}if(i=[],t&&e)throw t})}catch(t){}}}"object"===("undefined"==typeof jasmine?"undefined":(0,r.default)(jasmine))&&jasmine.getEnv().addReporter({specStarted:function(t){o=t},specDone:function(t){o=null}}),a(),t.exports=function(t){i.push(t),a()}});t(Pa);var Ma=e(function(t){t.exports="inspect";try{var e=n("util");e&&"function"==typeof e.inspect&&e.inspect.custom&&(t.exports=e.inspect.custom)}catch(t){}}),Da=e(function(t){var r=e(hn),u=e(Wt);function e(t){return t&&t.__esModule?t:{default:t}}function a(t){return t.type.is("assertion")}function s(t,e){for(var n=[],r=e;r;r=r.parent)r.assertions[t]&&n.push.apply(n,(0,u.default)(r.assertions[t]));return n}function c(t,e){if("string"!=typeof t)return null;var n=s(t,e);if(0<n.length)return n;for(var r=t.split(" "),i=r.length-1;0<i;i-=1){var o=s(r.slice(i).join(" "),e);if(c(r.slice(0,i).join(" "),e)&&0<o.length)return o}return null}t.exports=function(s){var t={promise:_a,errorMode:"default",equal:s.equal,inspect:s.inspect,createOutput:s.createOutput.bind(s),findTypeOf:s.findTypeOf.bind(s),findTypeOfWithParentType:s.findTypeOfWithParentType.bind(s),findCommonType:s.findCommonType.bind(s),it:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return"string"==typeof e[0]&&(e[0]=_n.forwardFlags(e[0],this.flags)),s.it.apply(s,e)},diff:s.diff,getType:s.getType,output:s.output,outputFormat:s.outputFormat.bind(s),format:s.format,withError:s.withError,fail:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.context.expect;this.callInNestedContext(function(){r.fail.apply(r,e)})},standardErrorMessage:function(t,e){var n=this;return e="object"===(void 0===e?"undefined":(0,r.default)(e))?e:{},"omitSubject"in t&&(e.subject=this.subject),e&&e.compact&&(e.compactSubject=function(t){t.jsFunctionName(n.subjectType.name)}),dn(t,n.subjectOutput,n.testDescription,n.argsOutput,e)},callInNestedContext:function(t){var n=this;try{var e=va(t());return _n.isPromise(e)?(e=xa(e)).isPending()&&(e=e.then(void 0,function(t){if(t&&t._isUnexpected){var e=new Oa(n,t);throw e.originalError=t.originalError,e}throw t})):e=_a.resolve(e),Ea(e,n.execute,n.subject)}catch(t){if(t&&t._isUnexpected){var r=new Oa(n,t);throw r.originalError=t.originalError,r}throw t}},shift:function(t,e){if(arguments.length<=1){0===arguments.length&&(t=this.subject),e=-1;for(var n=0;n<this.assertionRule.args.length;n+=1){var r=this.assertionRule.args[n].type;if(r.is("assertion")||r.is("expect.it")){e=n;break}}}else 3===arguments.length&&(t=arguments[1],e=arguments[2]);if(-1===e)return t;var i=this.args.slice(0,e),o=this.args.slice(e),s=this.findTypeOf(o[0]);if(1<arguments.length&&(this.argsOutput=function(n){i.forEach(function(t,e){0<e&&n.text(", "),n.appendInspected(t)}),0<i.length&&n.sp(),s.is("string")?n.error(o[0]):0<o.length&&n.appendInspected(o[0]),1<o.length&&n.sp(),o.slice(1).forEach(function(t,e){0<e&&n.text(", "),n.appendInspected(t)})}),s.is("expect.it")){var a=this;return this.withError(function(){return o[0](t)},function(t){a.fail(t)})}return s.is("string")?this.execute.apply(this,[t].concat((0,u.default)(o))):t},_getSubjectType:function(){return this.findTypeOfWithParentType(this.subject,this.assertionRule.subject.type)},_getArgTypes:function(t){var n=this.assertionRule.args.length-1;return this.args.map(function(t,e){return this.findTypeOfWithParentType(t,this.assertionRule.args[Math.min(e,n)].type)},this)},_getAssertionIndices:function(){if(!this._assertionIndices){var t=[],e=this.args,n=this.assertionRule,r=0;t:for(;;){if(1<n.args.length&&a(n.args[n.args.length-2])){t.push(r+n.args.length-2);var i=c(e[r+n.args.length-2],s);if(i)for(var o=0;o<i.length;o+=1)if(i[o].args.some(a)){r+=n.args.length-1,n=i[o];continue t}}break}this._assertionIndices=t}return this._assertionIndices}};return"inspect"!==Ma&&(t[Ma]=s[Ma]),Object.__defineGetter__&&(Object.defineProperty(t,"subjectType",{enumerable:!0,get:function(){return this.assertionRule&&this._getSubjectType()}}),Object.defineProperty(t,"argTypes",{enumerable:!0,get:function(){return this.assertionRule&&this._getArgTypes()}})),_n.setPrototypeOfOrExtend(t,Function.prototype),t}});t(Da);var Ra=e(function(t){var v=e(Wt),h=e(hn);function e(t){return t&&t.__esModule?t:{default:t}}var m=_n.extend;function p(t){return t.type.is("assertion")}function f(t){this.expect=t,this.level=0}f.prototype.child=function(){var t=Object.create(this);return t.level++,t};var n={_unexpectedType:!0,name:"any",level:0,identify:function(){return!0},equal:_n.objectIs,inspect:function(t,e,n){return n&&n.isMagicPen?n.text(t):"type: "+this.name},diff:function(t,e,n,r,i){return null},typeEqualityCache:{},is:function(t){var e=void 0;e="string"==typeof t?t:t.name;var n=this.typeEqualityCache[e];if(void 0!==n)return n;var r=!1;return this.name===e?r=!0:this.baseType&&(r=this.baseType.is(e)),this.typeEqualityCache[e]=r}};function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.assertions=t.assertions||{},this.typeByName=t.typeByName||{any:n},this.types=t.types||[n],t.output?this.output=t.output:(this.output=Yi(),this.output.inline=!1,this.output.diff=!1),this._outputFormat=t.format||Yi.defaultFormat,this.installedPlugins=t.installedPlugins||[];var r=this;this.getType=function(t){return r.typeByName[t]||r.parent&&r.parent.getType(t)},this.findTypeOf=function(e){return _n.findFirst(r.types||[],function(t){return t.identify&&t.identify(e)})||r.parent&&r.parent.findTypeOf(e)},this.findTypeOfWithParentType=function(e,n){return _n.findFirst(r.types||[],function(t){return t.identify&&t.identify(e)&&(!n||t.is(n))})||r.parent&&r.parent.findTypeOfWithParentType(e,n)},this.findCommonType=function(t,e){for(var n={},r=this.findTypeOf(t);r;)r=(n[r.name]=r).baseType;for(r=this.findTypeOf(e);r;){if(n[r.name])return r;r=r.baseType}},this._wrappedExpectProto=Da(this)}"inspect"!==Ma&&(n[Ma]=function(){return"type: "+this.name});var o={};function s(u,i){var e,t=(e=[[]],i.forEach(function(t){t===o?e.push([]):e[e.length-1].push(t)}),e);function n(o,s){if(s=s&&"object"===(void 0===s?"undefined":(0,h.default)(s))&&s instanceof f?s:new f(u),1===t.length&&1===t[0].length&&1===t[0][0].length&&"function"==typeof t[0][0][0])return va(t[0][0][0](o));var c=[],a=[];return t.forEach(function(t){var n,r,i,e=(n=u,r=s,i=o,t.map(function(t){var e=Array.prototype.slice.call(t);return e.unshift(i),{expectation:e,promise:_a(function(){if("function"!=typeof e[1])return n._expect(r.child(),e);if(2<e.length)throw new Error("expect.it(<function>) does not accept additional arguments");return e[1](e[0])})}}));e.forEach(function(t){var e=t.promise;a.push(e)}),c.push(e)}),va(_a.settle(a).then(function(){c.forEach(function(t){t.forEach(function(t){var e=t.promise;if(e.isRejected()&&"bubbleThrough"===e.reason().errorMode)throw e.reason()})}),c.some(function(t){return t.every(function(t){return t.promise.isFulfilled()})})||u.fail(function(t){var s,e,a,u;s=t,a=1<(e=c).length,u=e.some(function(t){return 1<t.length}),e.forEach(function(t,e){0<e&&(u?s.nl():s.sp(),s.jsComment("or").nl());var o=!1;t.forEach(function(t,e){0<e&&s.jsComment(" and").nl();var n=t.promise.isRejected();if(n&&!o){o=!0;var r=t.promise.reason();(u||a)&&s.error("â¨¯ "),s.block(function(t){t.append(r.getErrorMessage(t))})}else{n?s.error("â¨¯ "):s.success("â ");var i=t.expectation;s.block(function(t){var e=i[0],n=i.slice(2).map(function(e){return function(t){t.appendInspected(e)}}),r=i[1];dn(t,function(t){t.appendInspected(e)},r,n,{subject:e})})}})})})}))}return n._expectIt=!0,n._expectations=i,n._OR=o,n.and=function(){for(var t=i.slice(),e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.push(n),s(u,t)},n.or=function(){for(var t=i.slice(),e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.push(o,n),s(u,t)},n}i.prototype.it=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return s(this,[e])},i.prototype.equal=function(t,e,n,r){var i=this;if((n="number"==typeof n?n:100)<=0){if(-1!==(r=r||[]).indexOf(t))throw new Error("Cannot compare circular structures");r.push(t)}return this.findCommonType(t,e).equal(t,e,function(t,e){return i.equal(t,e,n-1,r)})},i.prototype.inspect=function(t,e,n){var s=[],a=this;var r="string"==typeof n?this.createOutput(n):n;return r=r||this.createOutput(),function n(r,i,o){var t=a.findTypeOf(r);return i<=0&&t.is("object")&&!t.is("expect.it")?o.text("..."):-1!==(s=s||[]).indexOf(r)?o.text("[Circular]"):t.inspect(r,i,o,function(t,e){return o=o.clone(),s.push(r),void 0===e&&(e=i-1),o=n(t,e,o)||o,s.pop(),o})}(t,"number"==typeof e?e:ja,r)||r},"inspect"!==Ma&&(i.prototype[Ma]=i.prototype.inspect),i.prototype.expandTypeAlternations=function(n){var s=this;var r=[];return n.subject.forEach(function(e){n.args.length?function n(r,i){if(i===r.length)return[];var o=[];return r[i].forEach(function(e){var t=n(r,i+1);t.length?t.forEach(function(t){o.push([e].concat(t))}):e.type.is("assertion")?(o.push([{type:e.type,minimum:1,maximum:1},{type:s.getType("any"),minimum:0,maximum:1/0}]),o.push([{type:s.getType("expect.it"),minimum:1,maximum:1}]),0===e.minimum&&o.push([])):o.push([e])}),o}(n.args,0).forEach(function(t){r.push(m({},n,{subject:e,args:t}))}):r.push(m({},n,{subject:e,args:[]}))}),r},i.prototype.parseAssertion=function(o){var i=this,s=[],a=0;function u(t){return t.split("|").map(function(t){var e=t.match(/^([a-z_](?:|[a-z0-9_.-]*[_a-z0-9]))([+*?]|)$/i);if(!e)throw new SyntaxError("Cannot parse type declaration:"+t);var n=i.getType(e[1]);if(!n)throw new Error("Unknown type: "+e[1]+" in "+o);var r=e[2];return{minimum:r&&"+"!==r?0:1,maximum:"*"===r||"+"===r?1/0:1,type:n}})}function t(t){return t.some(function(t){var e=t.minimum,n=t.maximum;return 1!==e||1!==n})}o.replace(/\s*<((?:[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])[?*+]?)(?:\|(?:[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])[?*+]?))*)>|\s*([^<]+)/gi,function(t,e,n,r){var i=t.length;if(r!==a)throw new SyntaxError("Cannot parse token at index "+a+" in "+o);e?s.push(u(e)):s.push(n.trim()),a+=i});var e=void 0;if(e=1===s.length&&"string"==typeof s[0]?{subject:u("any"),assertion:s[0],args:[u("any*")]}:{subject:s[0],assertion:s[1],args:s.slice(2)},!Array.isArray(e.subject))throw new SyntaxError("Missing subject type in "+o);if("string"!=typeof e.assertion)throw new SyntaxError("Missing assertion in "+o);if(t(e.subject))throw new SyntaxError("The subject type cannot have varargs: "+o);if(e.args.some(function(t){return"string"==typeof t}))throw new SyntaxError("Only one assertion string is supported (see #225)");if(e.args.slice(0,-1).some(t))throw new SyntaxError("Only the last argument type can have varargs: "+o);if([e.subject].concat(e.args.slice(0,-1)).some(function(t){return t.some(function(t){return t.type.is("assertion")})}))throw new SyntaxError("Only the last argument type can be <assertion>: "+o);var n=e.args[e.args.length-1]||[],r=n.filter(function(t){return t.type.is("assertion")});if(0<r.length&&1<n.length)throw new SyntaxError("<assertion> cannot be alternated with other types: "+o);if(r.some(function(t){return 1!==t.maximum}))throw new SyntaxError("<assertion+> and <assertion*> are not allowed: "+o);return this.expandTypeAlternations(e)};var r=/(\{(?:\d+)\})/g,a=/\{(\d+)\}/;function d(t,e){for(var n=0;n<Math.min(t.length,e.length);n+=1){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function u(t){return"function"==typeof t?_n.getFunctionName(t):t.name}function c(t){var r,e,n=((e=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r._expect(new f(r),e)}).it=(r=t).it.bind(r),e.equal=r.equal.bind(r),e.inspect=r.inspect.bind(r),"inspect"!==Ma&&(e[Ma]=r[Ma].bind(r)),e.findTypeOf=r.findTypeOf,e.fail=function(){try{r.fail.apply(r,arguments)}catch(t){throw t&&t._isUnexpected&&r.setErrorMessage(t),t}},e.createOutput=r.createOutput.bind(r),e.diff=r.diff.bind(r),e.promise=_a,e.withError=r.withError,e.addAssertion=r.addAssertion.bind(r),e.addStyle=r.addStyle.bind(r),e.installTheme=r.installTheme.bind(r),e.addType=r.addType.bind(r),e.getType=r.getType,e.clone=r.clone.bind(r),e.child=r.child.bind(r),e.freeze=r.freeze.bind(r),e.toString=r.toString.bind(r),e.assertions=r.assertions,e.use=e.installPlugin=r.use.bind(r),e.output=r.output,e.outputFormat=r.outputFormat.bind(r),e.notifyPendingPromise=Pa,e.hook=function(t){r._expect=t(r._expect.bind(r))},e.parseAssertion=r.parseAssertion.bind(r),e);return t.expect=n}i.prototype.fail=function(e){if(e instanceof Oa)throw e._hasSerializedErrorMessage=!1,e;if(_n.isError(e))throw e;var n=new Oa(this.expect);if("function"==typeof e)n.errorMode="bubble",n.output=e;else if(e&&"object"===(void 0===e?"undefined":(0,h.default)(e))){void 0!==e.message&&(n.errorMode="bubble"),n.output=function(t){void 0!==e.message?e.message.isMagicPen?t.append(e.message):"function"==typeof e.message?e.message.call(t,t):t.text(String(e.message)):t.error("Explicit failure")};var s=this.expect;Object.keys(e).forEach(function(t){var o=e[t];"diff"===t?"function"==typeof o&&this.parent?n.createDiff=function(t,e,n,r){var i=s.createOutput(t.format);return i.inline=t.inline,i.output=t.output,o(i,function(t,e){return s.diff(t,e,i.clone())},function(t,e){return i.clone().appendInspected(t,(e||ja)-1)},function(t,e){return s.equal(t,e)})}:n.createDiff=o:"message"!==t&&(n[t]=o)},this)}else{var o=void 0;if(0<arguments.length){o=new Array(arguments.length-1);for(var t=1;t<arguments.length;t+=1)o[t-1]=arguments[t]}n.errorMode="bubble",n.output=function(i){(e?String(e):"Explicit failure").split(r).forEach(function(t){var e=a.exec(t);if(e){var n=e[1];if(n in o){var r=o[n];r&&r.isMagicPen?i.append(r):i.appendInspected(r)}else i.text(e[0])}else i.error(t)})}}throw n},i.prototype.addAssertion=function(t,a,u){if(this._frozen)throw new Error("Cannot add an assertion to a frozen instance, please run .clone() first");var e=void 0;if(e="object"===(void 0===u?"undefined":(0,h.default)(u))?3:2,arguments.length>e||"function"!=typeof a||"string"!=typeof t&&!Array.isArray(t)){var n="Syntax: expect.addAssertion(<string|array[string]>, function (expect, subject, ...) { ... });";throw"string"!=typeof a&&!Array.isArray(a)||"function"!=typeof u||(n+="\nAs of Unexpected 10, the syntax for adding assertions that apply only to specific\ntypes has changed. See http://unexpected.js.org/api/addAssertion/"),new Error(n)}var r=Array.isArray(t)?t:[t];r.forEach(function(t){if("string"!=typeof t||""===t)throw new Error("Assertion patterns must be a non-empty string");if(t!==t.trim())throw new Error("Assertion patterns can't start or end with whitespace:\n\n    "+JSON.stringify(t))});var i=this,s=this.assertions,c={},f=[],l=0;if(r.forEach(function(s){i.parseAssertion(s).forEach(function(t){var e=t.assertion,i=t.args,o=t.subject;!function(t){for(var e={"[":0,"]":0,"(":0,")":0},n=0;n<t.length;n+=1){var r=t.charAt(n);if(r in e&&(e[r]+=1),"]"===r&&e["["]>=e["]"]){if(e["["]===e["]"]+1)throw new Error("Assertion patterns must not contain flags with brackets: '"+t+"'");if(e["("]!==e[")"])throw new Error("Assertion patterns must not contain flags with parentheses: '"+t+"'");if("["===t.charAt(n-1))throw new Error("Assertion patterns must not contain empty flags: '"+t+"'")}else if(")"===r&&e["("]>=e[")"]){if(e["("]===e[")"]+1)throw new Error("Assertion patterns must not contain alternations with parentheses: '"+t+"'");if(e["["]!==e["]"])throw new Error("Assertion patterns must not contain alternations with brackets: '"+t+"'")}}if(e["["]!==e["]"])throw new Error("Assertion patterns must not contain unbalanced brackets: '"+t+"'");if(e["("]!==e[")"])throw new Error("Assertion patterns must not contain unbalanced parentheses: '"+t+"'")}(e),y(e).forEach(function(t){var e=t.flags,n=t.alternations,r=t.text;Object.keys(e).forEach(function(t){c[t]=!1}),l=Math.max(l,i.reduce(function(t,e){var n=e.maximum;return t+(null===n?1/0:n)},0)),f.push({handler:a,alternations:n,flags:e,subject:o,args:i,testDescriptionString:r,declaration:s,unexpected:u})})})}),a.length-2>l)throw new Error("The provided assertion handler takes "+(a.length-2)+" parameters, but the type signature specifies a maximum of "+l+":\n\n    "+JSON.stringify(r));return f.forEach(function(t){t.flags=m({},c,t.flags);var e,n,r,i=s[t.testDescriptionString];if(t.specificity=(n=(e=t).subject,r=e.args,[n.type.level].concat(r.map(function(t){var e=t.minimum,n=t.maximum;return(1===e&&1===n?.5:0)+t.type.level}))),i){for(var o=0;o<i.length&&0<d(t.specificity,i[o].specificity);)o+=1;i.splice(o,0,t)}else s[t.testDescriptionString]=[t]}),this.expect},i.prototype.addType=function(o,a){if(this._frozen)throw new Error("Cannot add a type to a frozen instance, please run .clone() first");var r=this,i=void 0;if("string"!=typeof o.name||!/^[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])$/i.test(o.name))throw new Error("A type must be given a non-empty name and must match ^[a-z_](?:|[a-z0-9_.-]*[_a-z0-9])$");if("function"!=typeof o.identify&&!1!==o.identify)throw new Error("Type "+o.name+" must specify an identify function or be declared abstract by setting identify to false");if(this.typeByName[o.name])throw new Error("The type with the name "+o.name+" already exists");if(o.base){if(!(i=this.getType(o.base)))throw new Error("Unknown base type: "+o.base)}else i=n;var t=Object.create(i);t.inspect=function(t,e,n){if(!n||!n.isMagicPen)throw new Error("You need to pass the output to baseType.inspect() as the third parameter");return i.inspect(t,e,n,function(t,e){return n.clone().appendInspected(t,e)})},"inspect"!==Ma&&(t[Ma]=t.inspect),t.diff=function(t,e,n){if(!n||!n.isMagicPen)throw new Error("You need to pass the output to baseType.diff() as the third parameter");return i.diff(t,e,n.clone(),function(t,e){return r.diff(t,e,n.clone())},function(t,e){return n.clone().appendInspected(t,e)},r.equal.bind(r))},t.equal=function(t,e){return i.equal(t,e,r.equal.bind(r))};var e=m({},i,o,{baseType:t}),s=e.inspect;if("inspect"!==Ma&&(e[Ma]=function(){return"type: "+o.name}),e.inspect=function(t,e,n,r){if(arguments.length<2||!n||!n.isMagicPen)return"type: "+o.name;if(a){var i=a.createOutput(n.format);return s.call(this,t,e,i,r)||i}return s.call(this,t,e,n,r)||n},a){e.childUnexpected=a;var u=e.diff;e.diff=function(t,e,n,r,i,o){var s=a.createOutput(n.format);return s.output=n.output,u.call(this,t,e,s,r,i,o)||n}}return!1===e.identify?this.types.push(e):this.types.unshift(e),e.level=i.level+1,e.typeEqualityCache={},this.typeByName[e.name]=e,this.expect},i.prototype.addStyle=function(){var t;if(this._frozen)throw new Error("Cannot add a style to a frozen instance, please run .clone() first");return(t=this.output).addStyle.apply(t,arguments),this.expect},i.prototype.installTheme=function(){var t;if(this._frozen)throw new Error("Cannot install a theme into a frozen instance, please run .clone() first");return(t=this.output).installTheme.apply(t,arguments),this.expect},i.prototype.use=function(e){if(this._frozen)throw new Error("Cannot install a plugin into a frozen instance, please run .clone() first");if("function"!=typeof e&&("object"!==(void 0===e?"undefined":(0,h.default)(e))||"function"!=typeof e.installInto)||void 0!==e.name&&"string"!=typeof e.name)throw new Error("Plugins must be functions or adhere to the following interface\n{\n  name: <an optional plugin name>,\n  version: <an optional semver version string>,\n  installInto: <a function that will update the given expect instance>\n}");var n=u(e),t=_n.findFirst(this.installedPlugins,function(t){return t===e||n&&n===u(t)});if(t){if(t===e||void 0!==e.version&&e.version===t.version)return this.expect;throw new Error("Another instance of the plugin '"+n+"' is already installed"+(void 0!==t.version?" (version "+t.version+(void 0!==e.version?", trying to install "+e.version:"")+")":"")+". Please check your node_modules folder for unmet peerDependencies.")}if("unexpected-promise"===n)throw new Error("The unexpected-promise plugin was pulled into Unexpected as of 8.5.0. This means that the plugin is no longer supported.");return this.installedPlugins.push(e),"function"==typeof e?e(this.expect):e.installInto(this.expect),this.expect},i.prototype.withError=function(t,e){return va(_a(t).caught(function(t){return ba(t),e(t)}))},i.prototype.installPlugin=i.prototype.use,i.prototype.throwAssertionNotFoundError=function(a,r,u){for(var t=this.assertions[r],c=this,e=this;e&&!t;)t=e.assertions[r],e=e.parent;t&&this.fail({message:function(n){n.append(dn(n.clone(),function(t){t.appendInspected(a)},r,function(t){t.appendItems(u,", ")})).nl().indentLines(),n.i().error("The assertion does not have a matching signature for:").nl().indentLines().i().text("<").text(c.findTypeOf(a).name).text(">").sp().text(r),u.forEach(function(t,e){n.sp().text("<").text(c.findTypeOf(t).name).text(">")}),n.outdentLines().nl().i().text("did you mean:").indentLines().nl(),Object.keys(t.reduce(function(t,e){return t[e.declaration]=!0,t},{})).sort().forEach(function(t,e){n.nl(0<e?1:0).i().text(t)}),n.outdentLines()}});var n=[],i=[];for(e=this;e;)i.push.apply(i,(0,v.default)(Object.keys(e.assertions))),e=e.parent;i.forEach(function(t){var e=Qi(r,t);n.push({assertion:t,score:e})},this);var o=n.sort(function(t,e){var n=t.score-e.score;return 0!==n?n:t.assertion<e.assertion?-1:1}).slice(0,10).filter(function(t,e,n){var r=t.score;return Math.abs(r-n[0].score)<=2}).sort(function(t,e){var n,r,i,o,s=(n=t.assertion,r=e.assertion,i=c.lookupAssertionRule(a,n,u),o=c.lookupAssertionRule(a,r,u),i||o?i&&!o?-1:!i&&o?1:d(i.specificity,o.specificity):0);return 0!==s?s:t.score-e.score})[0];this.fail({errorMode:"bubbleThrough",message:function(t){t.error("Unknown assertion '").jsString(r).error("', did you mean: '").jsString(o.assertion).error("'")}})},i.prototype.lookupAssertionRule=function(e,t,o,s){var a=this;if("string"!=typeof t)throw new Error("The expect function requires the second parameter to be a string or an expect.it.");for(var n=void 0,r=this;r;){var i=r.assertions[t];i&&(n=n?n.concat(i):i),r=r.parent}if(!n)return null;var u={};function c(e,n,t,r){return!(!n.is("assertion")||"string"!=typeof e)||(r?!1===n.identify?a.types.some(function(t){return t.identify&&t.is(n)&&t.identify(e)}):n.identify(e):(i=e,o=t,s=u[o],s||(s=a.findTypeOf(i),u[o]=s),s).is(n));var i,o,s}function f(n,r){if(!c(e,n.subject.type,"subject",r))return!1;if(s&&!n.args.some(p))return!1;var t=n.args.reduce(function(t,e){var n=e.minimum,r=e.maximum;return t.minimum+=n,t.maximum+=r,t},{minimum:0,maximum:0});if(o.length<t.minimum||t.maximum<o.length)return!1;if(0===o.length&&0===t.maximum)return!0;var i=n.args[n.args.length-1];return o.every(function(t,e){return e<n.args.length-1?c(t,n.args[e].type,e,r):c(t,i.type,e,r)})}var l=void 0,h=void 0;for(l=0;l<n.length;l+=1)if(f(h=n[l]))return h;for(l=0;l<n.length;l+=1)if(f(h=n[l],!0))return h;return null},i.prototype.setErrorMessage=function(t){t.serializeMessage(this.outputFormat())},i.prototype._expect=function(e,t){var g=this,n=t[0],r=t[1];if(t.length<2)throw new Error("The expect function requires at least two parameters.");if("function"==typeof r)return g.expect.withError(function(){return r(n)},function(t){g.fail(t)});try{var i=function o(s,e,t,n){var r,i,a=g.lookupAssertionRule(e,t,n);if(!a){var u=t.split(" ");t:for(var c=u.length-1;0<c;c-=1){var f=u.slice(0,c).join(" "),l=u.slice(c),h=[l.join(" ")].concat(n);if(a=g.lookupAssertionRule(e,f,h,!0))for(var p=1;p<l.length;p+=1)if(g.assertions.hasOwnProperty(l.slice(0,p+1).join(" "))){t=f,n=h;break t}}a||g.throwAssertionNotFoundError(e,t,n)}if(a&&a.unexpected&&a.unexpected!==g)return(i=a.unexpected).expect.apply(i,[e,t].concat((0,v.default)(n)));var d=m({},a.flags),y=function e(t,n){if(0===arguments.length)throw new Error("The expect function requires at least one parameter.");if(1===arguments.length)return Ea(_a.resolve(t),e,t);if("function"==typeof n)return e.errorMode="nested",e.withError(function(){return n(t)},function(t){e.fail(t)});n=_n.forwardFlags(n,d);for(var r=new Array(arguments.length-2),i=2;i<arguments.length;i+=1)r[i-2]=arguments[i];return e.callInNestedContext(function(){return o(s.child(),t,n,r)})};return _n.setPrototypeOfOrExtend(y,g._wrappedExpectProto),y.context=s,(y.execute=y).alternations=a.alternations,y.flags=d,y.subject=e,y.testDescription=t,y.args=n,y.assertionRule=a,y.subjectOutput=function(t){t.appendInspected(e)},y.argsOutput=n.map(function(e,t){var n=y.assertionRule.args[t];return"string"==typeof e&&(n&&n.type.is("assertion")||0<=y._getAssertionIndices().indexOf(t))?new pn(e):function(t){t.appendInspected(e)}}),Object.__defineGetter__||(y.subjectType=y._getSubjectType(),y.argTypes=y._getArgTypes()),va((r=a).handler.apply(r,[y,e].concat((0,v.default)(n))))}(e,n,r,Array.prototype.slice.call(t,2));return _n.isPromise(i)?(i=xa(i)).isPending()&&(g.expect.notifyPendingPromise(i),i=i.then(void 0,function(t){throw t&&t._isUnexpected&&0===e.level&&g.setErrorMessage(t),t})):i=_a.resolve(i),Ea(i,g.expect,n)}catch(t){if(t&&t._isUnexpected){var o=t;throw"undefined"!=typeof mochaPhantomJS&&(o=t.clone()),0===e.level&&g.setErrorMessage(o),o}throw t}},i.prototype.diff=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.createOutput(),r=arguments[3],i=arguments[4],o=this;if((r="number"==typeof r?r:100)<=0){if(-1!==(i=i||[]).indexOf(t))throw new Error("Cannot compare circular structures");i.push(t)}return this.findCommonType(t,e).diff(t,e,n,function(t,e){return o.diff(t,e,n.clone(),r-1,i)},function(t,e){return n.clone().appendInspected(t,e)},function(t,e){return o.equal(t,e)})},i.prototype.toString=function(){var e=this.assertions,n={},r=[],i=Yi();return Object.keys(e).sort().forEach(function(t){e[t].forEach(function(t){var e=t.declaration;n[e]||(r.push(e),n[e]=!0)})}),r.forEach(function(t){i.text(t).nl()}),i.toString()},i.prototype.clone=function(){var e={};Object.keys(this.assertions).forEach(function(t){e[t]=[].concat(this.assertions[t])},this);var t=new i({assertions:e,types:[].concat(this.types),typeByName:m({},this.typeByName),output:this.output.clone(),format:this.outputFormat(),installedPlugins:[].concat(this.installedPlugins)});return t._expect=this._expect,t.output.preferredWidth=this.output.preferredWidth,c(t)},i.prototype.child=function(){var n=new i({assertions:{},types:[],typeByName:{},output:this.output.clone(),format:this.outputFormat(),installedPlugins:[]}),r=n.parent=this,o=c(n);return o.exportAssertion=function(t,e){return r.addAssertion(t,e,n),this},o.exportType=function(t){return o.getType(t.name)!==t&&o.addType(t),r.addType(t,n),this},o.exportStyle=function(t,i){return r.addStyle(t,function(){for(var t=o.createOutput(this.format),e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];this.append(i.call.apply(i,[t].concat(n))||t)}),this},o},i.prototype.freeze=function(){return this._frozen=!0,this.expect},i.prototype.outputFormat=function(t){return void 0===t?this._outputFormat:(this._outputFormat=t,this.expect)},i.prototype.createOutput=function(t){var n=this,e=this.output.clone(t||"text");return e.addStyle("appendInspected",function(t,e){this.append(n.inspect(t,e,this.clone()))}),e},i.create=function(){return c(new i)};var y=function(t){t=t.replace(/(\[[^\]]+\]) ?/g,"$1");for(var e=/\[[^\]]+\]|\([^)]+\)/g,n=[],r=void 0,i=0;r=e.exec(t);)n.push(t.slice(i,r.index)),n.push(t.slice(r.index,e.lastIndex)),i=e.lastIndex;n.push(t.slice(i));var o=function t(e,n){if(n===e.length)return[{text:"",flags:{},alternations:[]}];var i=e[n],r=t(e,n+1);if("["!==(s=i).slice(0,1)||"]"!==s.slice(-1))return"("===(o=i).slice(0,1)&&")"===o.slice(-1)?i.substr(1,i.length-2).split(/\|/).reduce(function(t,i){return t.concat(r.map(function(t){var e=t.text,n=t.flags,r=t.alternations;return{text:i?i+e:e.replace(/^ /,""),flags:n,alternations:[i].concat(r)}}))},[]):r.map(function(t){var e=t.text,n=t.flags,r=t.alternations;return{text:i+e,flags:n,alternations:r}});var o,s,a=i.slice(1,-1);return r.map(function(t){var e={};return e[a]=!0,{text:a+" "+t.text,flags:m(e,t.flags),alternations:t.alternations}}).concat(r.map(function(t){var e={};return e[a]=!1,{text:t.text,flags:m(e,t.flags),alternations:t.alternations}}))}(n=n.filter(function(t){return""!==t}),0);return o.forEach(function(t){if(t.text=t.text.trim(),""===t.text)throw new Error("Assertion patterns must not only contain flags")}),o};t.exports=i});function Ia(){}function Ba(t,e,n,r,i){for(var o=0,s=e.length,a=0,u=0;o<s;o++){var c=e[o];if(c.removed){if(c.value=t.join(r.slice(u,u+c.count)),u+=c.count,o&&e[o-1].added){var f=e[o-1];e[o-1]=e[o],e[o]=f}}else{if(!c.added&&i){var l=n.slice(a,a+c.count);l=l.map(function(t,e){var n=r[u+e];return n.length>t.length?n:t}),c.value=t.join(l)}else c.value=t.join(n.slice(a,a+c.count));a+=c.count,c.added||(u+=c.count)}}var h=e[s-1];return 1<s&&"string"==typeof h.value&&(h.added||h.removed)&&t.equals("",h.value)&&(e[s-2].value+=h.value,e.pop()),e}function La(t){return{newPos:t.newPos,components:t.components.slice(0)}}t(Ra),Ia.prototype={diff:function(a,u){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=t.callback;"function"==typeof t&&(e=t,t={}),this.options=t;var c=this;function f(t){return e?(setTimeout(function(){e(void 0,t)},0),!0):t}a=this.castInput(a),u=this.castInput(u),a=this.removeEmpty(this.tokenize(a));var l=(u=this.removeEmpty(this.tokenize(u))).length,h=a.length,p=1,n=l+h,d=[{newPos:-1,components:[]}],r=this.extractCommon(d[0],u,a,0);if(d[0].newPos+1>=l&&h<=r+1)return f([{value:this.join(u),count:u.length}]);function i(){for(var t=-1*p;t<=p;t+=2){var e=void 0,n=d[t-1],r=d[t+1],i=(r?r.newPos:0)-t;n&&(d[t-1]=void 0);var o=n&&n.newPos+1<l,s=r&&0<=i&&i<h;if(o||s){if(!o||s&&n.newPos<r.newPos?(e=La(r),c.pushComponent(e.components,void 0,!0)):((e=n).newPos++,c.pushComponent(e.components,!0,void 0)),i=c.extractCommon(e,u,a,t),e.newPos+1>=l&&h<=i+1)return f(Ba(c,e.components,u,a,c.useLongestToken));d[t]=e}else d[t]=void 0}p++}if(e)!function t(){setTimeout(function(){if(n<p)return e();i()||t()},0)}();else for(;p<=n;){var o=i();if(o)return o}},pushComponent:function(t,e,n){var r=t[t.length-1];r&&r.added===e&&r.removed===n?t[t.length-1]={count:r.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,r){for(var i=e.length,o=n.length,s=t.newPos,a=s-r,u=0;s+1<i&&a+1<o&&this.equals(e[s+1],n[a+1]);)s++,a++,u++;return u&&t.components.push({count:u}),t.newPos=s,a},equals:function(t,e){return this.options.comparator?this.options.comparator(t,e):t===e||this.options.ignoreCase&&t.toLowerCase()===e.toLowerCase()},removeEmpty:function(t){for(var e=[],n=0;n<t.length;n++)t[n]&&e.push(t[n]);return e},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};var Na=new Ia;function Ua(t,e,n){return Na.diff(t,e,n)}function za(t,e){if("function"==typeof t)e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var qa=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Ha=/\S/,Ka=new Ia;function $a(t,e,n){return n=za(n,{ignoreWhitespace:!0}),Ka.diff(t,e,n)}function Wa(t,e,n){return Ka.diff(t,e,n)}Ka.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!Ha.test(t)&&!Ha.test(e)},Ka.tokenize=function(t){for(var e=t.split(/(\s+|[()[\]{}'"]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&qa.test(e[n])&&qa.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var Ya=new Ia;function Va(t,e,n){return Ya.diff(t,e,n)}function Ja(t,e,n){var r=za(n,{ignoreWhitespace:!0});return Ya.diff(t,e,r)}Ya.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};var Qa=new Ia;function Ga(t,e,n){return Qa.diff(t,e,n)}Qa.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Xa=new Ia;function Za(t,e,n){return Xa.diff(t,e,n)}function tu(t){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eu(t){return nu(t)||ru(t)||iu()}function nu(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function ru(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function iu(){throw new TypeError("Invalid attempt to spread non-iterable instance")}Xa.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};var ou=Object.prototype.toString,su=new Ia;function au(t,e,n){return su.diff(t,e,n)}function uu(t,e,n,r,i){var o,s;for(e=e||[],n=n||[],r&&(t=r(i,t)),o=0;o<e.length;o+=1)if(e[o]===t)return n[o];if("[object Array]"===ou.call(t)){for(e.push(t),s=new Array(t.length),n.push(s),o=0;o<t.length;o+=1)s[o]=uu(t[o],e,n,r,i);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),"object"===tu(t)&&null!==t){e.push(t),s={},n.push(s);var a,u=[];for(a in t)t.hasOwnProperty(a)&&u.push(a);for(u.sort(),o=0;o<u.length;o+=1)s[a=u[o]]=uu(t[a],e,n,r,a);e.pop(),n.pop()}else s=t;return s}su.useLongestToken=!0,su.tokenize=Ya.tokenize,su.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=void 0===r?function(t,e){return void 0===e?n:e}:r;return"string"==typeof t?t:JSON.stringify(uu(t,null,null,i),i,"  ")},su.equals=function(t,e){return Ia.prototype.equals.call(su,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};var cu=new Ia;function fu(t,e,n){return cu.diff(t,e,n)}function lu(t){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=t.split(/\r\n|[\n\v\f\r\x85]/),u=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],c=0;function e(){var t={};for(i.push(t);c<a.length;){var e=a[c];if(/^(\-\-\-|\+\+\+|@@)\s/.test(e))break;var n=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(e);n&&(t.index=n[1]),c++}for(o(t),o(t),t.hunks=[];c<a.length;){var r=a[c];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(r))break;if(/^@@/.test(r))t.hunks.push(f());else{if(r&&s.strict)throw new Error("Unknown line "+(c+1)+" "+JSON.stringify(r));c++}}}function o(t){var e=/^(---|\+\+\+)\s+(.*)$/.exec(a[c]);if(e){var n="---"===e[1]?"old":"new",r=e[2].split("\t",2),i=r[0].replace(/\\\\/g,"\\");/^".*"$/.test(i)&&(i=i.substr(1,i.length-2)),t[n+"FileName"]=i,t[n+"Header"]=(r[1]||"").trim(),c++}}function f(){for(var t=c,e=a[c++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),n={oldStart:+e[1],oldLines:+e[2]||1,newStart:+e[3],newLines:+e[4]||1,lines:[],linedelimiters:[]},r=0,i=0;c<a.length&&!(0===a[c].indexOf("--- ")&&c+2<a.length&&0===a[c+1].indexOf("+++ ")&&0===a[c+2].indexOf("@@"));c++){var o=0==a[c].length&&c!=a.length-1?" ":a[c][0];if("+"!==o&&"-"!==o&&" "!==o&&"\\"!==o)break;n.lines.push(a[c]),n.linedelimiters.push(u[c]||"\n"),"+"===o?r++:"-"===o?i++:" "===o&&(r++,i++)}if(r||1!==n.newLines||(n.newLines=0),i||1!==n.oldLines||(n.oldLines=0),s.strict){if(r!==n.newLines)throw new Error("Added line count did not match for hunk at line "+(t+1));if(i!==n.oldLines)throw new Error("Removed line count did not match for hunk at line "+(t+1))}return n}for(;c<a.length;)e();return i}function hu(e,n,r){var i=!0,o=!1,s=!1,a=1;return function t(){if(i&&!s){if(o?a++:i=!1,e+a<=r)return a;s=!0}if(!o)return s||(i=!0),n<=e-a?-a++:(o=!0,t())}}function pu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof e&&(e=lu(e)),Array.isArray(e)){if(1<e.length)throw new Error("applyPatch only works with a single input.");e=e[0]}var r,i,s=t.split(/\r\n|[\n\v\f\r\x85]/),o=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=e.hunks,u=n.compareLine||function(t,e,n,r){return e===r},c=0,f=n.fuzzFactor||0,l=0,h=0;function p(t,e){for(var n=0;n<t.lines.length;n++){var r=t.lines[n],i=0<r.length?r[0]:" ",o=0<r.length?r.substr(1):r;if(" "===i||"-"===i){if(!u(e+1,s[e],i,o)&&f<++c)return!1;e++}}return!0}for(var d=0;d<a.length;d++){for(var y=a[d],g=s.length-y.oldLines,v=0,m=h+y.oldStart-1,b=hu(m,l,g);void 0!==v;v=b())if(p(y,m+v)){y.offset=h+=v;break}if(void 0===v)return!1;l=y.offset+y.oldStart+y.oldLines}for(var _=0,w=0;w<a.length;w++){var E=a[w],x=E.oldStart+E.offset+_-1;_+=E.newLines-E.oldLines,x<0&&(x=0);for(var A=0;A<E.lines.length;A++){var F=E.lines[A],j=0<F.length?F[0]:" ",k=0<F.length?F.substr(1):F,S=E.linedelimiters[A];if(" "===j)x++;else if("-"===j)s.splice(x,1),o.splice(x,1);else if("+"===j)s.splice(x,0,k),o.splice(x,0,S),x++;else if("\\"===j){var C=E.lines[A-1]?E.lines[A-1][0]:null;"+"===C?r=!0:"-"===C&&(i=!0)}}}if(r)for(;!s[s.length-1];)s.pop(),o.pop();else i&&(s.push(""),o.push("\n"));for(var T=0;T<s.length-1;T++)s[T]=s[T]+o[T];return s.join("")}function du(t,o){"string"==typeof t&&(t=lu(t));var e=0;!function r(){var i=t[e++];if(!i)return o.complete();o.loadFile(i,function(t,e){if(t)return o.complete(t);var n=pu(e,i,o);o.patched(i,n,function(t){if(t)return o.complete(t);r()})})}()}function yu(t,e,h,p,n,r,d){d||(d={}),void 0===d.context&&(d.context=4);var y=Va(h,p,d);function g(t){return t.map(function(t){return" "+t})}y.push({value:"",lines:[]});for(var v=[],m=0,b=0,_=[],w=1,E=1,i=function(t){var e=y[t],n=e.lines||e.value.replace(/\n$/,"").split("\n");if(e.lines=n,e.added||e.removed){var r;if(!m){var i=y[t-1];m=w,b=E,i&&(_=0<d.context?g(i.lines.slice(-d.context)):[],m-=_.length,b-=_.length)}(r=_).push.apply(r,eu(n.map(function(t){return(e.added?"+":"-")+t}))),e.added?E+=n.length:w+=n.length}else{if(m)if(n.length<=2*d.context&&t<y.length-2){var o;(o=_).push.apply(o,eu(g(n)))}else{var s,a=Math.min(n.length,d.context);(s=_).push.apply(s,eu(g(n.slice(0,a))));var u={oldStart:m,oldLines:w-m+a,newStart:b,newLines:E-b+a,lines:_};if(t>=y.length-2&&n.length<=d.context){var c=/\n$/.test(h),f=/\n$/.test(p),l=0==n.length&&_.length>u.oldLines;!c&&l&&_.splice(u.oldLines,0,"\\ No newline at end of file"),(c||l)&&f||_.push("\\ No newline at end of file")}v.push(u),b=m=0,_=[]}w+=n.length,E+=n.length}},o=0;o<y.length;o++)i(o);return{oldFileName:t,newFileName:e,oldHeader:n,newHeader:r,hunks:v}}function gu(t,e,n,r,i,o,s){var a=yu(t,e,n,r,i,o,s),u=[];t==e&&u.push("Index: "+t),u.push("==================================================================="),u.push("--- "+a.oldFileName+(void 0===a.oldHeader?"":"\t"+a.oldHeader)),u.push("+++ "+a.newFileName+(void 0===a.newHeader?"":"\t"+a.newHeader));for(var c=0;c<a.hunks.length;c++){var f=a.hunks[c];u.push("@@ -"+f.oldStart+","+f.oldLines+" +"+f.newStart+","+f.newLines+" @@"),u.push.apply(u,f.lines)}return u.join("\n")+"\n"}function vu(t,e,n,r,i,o){return gu(t,t,e,n,r,i,o)}function mu(t,e){return t.length===e.length&&bu(t,e)}function bu(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function _u(t){var e=Bu(t.lines),n=e.oldLines,r=e.newLines;void 0!==n?t.oldLines=n:delete t.oldLines,void 0!==r?t.newLines=r:delete t.newLines}function wu(t,e,n){t=Eu(t,n),e=Eu(e,n);var r={};(t.index||e.index)&&(r.index=t.index||e.index),(t.newFileName||e.newFileName)&&(xu(t)?xu(e)?(r.oldFileName=Au(r,t.oldFileName,e.oldFileName),r.newFileName=Au(r,t.newFileName,e.newFileName),r.oldHeader=Au(r,t.oldHeader,e.oldHeader),r.newHeader=Au(r,t.newHeader,e.newHeader)):(r.oldFileName=t.oldFileName,r.newFileName=t.newFileName,r.oldHeader=t.oldHeader,r.newHeader=t.newHeader):(r.oldFileName=e.oldFileName||t.oldFileName,r.newFileName=e.newFileName||t.newFileName,r.oldHeader=e.oldHeader||t.oldHeader,r.newHeader=e.newHeader||t.newHeader)),r.hunks=[];for(var i=0,o=0,s=0,a=0;i<t.hunks.length||o<e.hunks.length;){var u=t.hunks[i]||{oldStart:1/0},c=e.hunks[o]||{oldStart:1/0};if(Fu(u,c))r.hunks.push(ju(u,s)),i++,a+=u.newLines-u.oldLines;else if(Fu(c,u))r.hunks.push(ju(c,a)),o++,s+=c.newLines-c.oldLines;else{var f={oldStart:Math.min(u.oldStart,c.oldStart),oldLines:0,newStart:Math.min(u.newStart+s,c.oldStart+a),newLines:0,lines:[]};ku(f,u.oldStart,u.lines,c.oldStart,c.lines),o++,i++,r.hunks.push(f)}}return r}function Eu(t,e){if("string"!=typeof t)return t;if(/^@@/m.test(t)||/^Index:/m.test(t))return lu(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return yu(void 0,void 0,e,t)}function xu(t){return t.newFileName&&t.newFileName!==t.oldFileName}function Au(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}function Fu(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}function ju(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}function ku(t,e,n,r,i){var o={offset:e,lines:n,index:0},s={offset:r,lines:i,index:0};for(Ou(t,o,s),Ou(t,s,o);o.index<o.lines.length&&s.index<s.lines.length;){var a=o.lines[o.index],u=s.lines[s.index];if("-"!==a[0]&&"+"!==a[0]||"-"!==u[0]&&"+"!==u[0])if("+"===a[0]&&" "===u[0]){var c;(c=t.lines).push.apply(c,eu(Mu(o)))}else if("+"===u[0]&&" "===a[0]){var f;(f=t.lines).push.apply(f,eu(Mu(s)))}else"-"===a[0]&&" "===u[0]?Cu(t,o,s):"-"===u[0]&&" "===a[0]?Cu(t,s,o,!0):a===u?(t.lines.push(a),o.index++,s.index++):Tu(t,Mu(o),Mu(s));else Su(t,o,s)}Pu(t,o),Pu(t,s),_u(t)}function Su(t,e,n){var r=Mu(e),i=Mu(n);if(Ru(r)&&Ru(i)){var o,s;if(bu(r,i)&&Iu(n,r,r.length-i.length))return void(o=t.lines).push.apply(o,eu(r));if(bu(i,r)&&Iu(e,i,i.length-r.length))return void(s=t.lines).push.apply(s,eu(i))}else if(mu(r,i)){var a;return void(a=t.lines).push.apply(a,eu(r))}Tu(t,r,i)}function Cu(t,e,n,r){var i,o=Mu(e),s=Du(n,o);s.merged?(i=t.lines).push.apply(i,eu(s.merged)):Tu(t,r?s:o,r?o:s)}function Tu(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}function Ou(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r),e.offset++}}function Pu(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}function Mu(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var r=t.lines[t.index];if("-"===n&&"+"===r[0]&&(n="+"),n!==r[0])break;e.push(r),t.index++}return e}function Du(t,e){for(var n=[],r=[],i=0,o=!1,s=!1;i<e.length&&t.index<t.lines.length;){var a=t.lines[t.index],u=e[i];if("+"===u[0])break;if(o=o||" "!==a[0],r.push(u),i++,"+"===a[0])for(s=!0;"+"===a[0];)n.push(a),a=t.lines[++t.index];u.substr(1)===a.substr(1)?(n.push(a),t.index++):s=!0}if("+"===(e[i]||"")[0]&&o&&(s=!0),s)return n;for(;i<e.length;)r.push(e[i++]);return{merged:r,changes:n}}function Ru(t){return t.reduce(function(t,e){return t&&"-"===e[0]},!0)}function Iu(t,e,n){for(var r=0;r<n;r++){var i=e[e.length-n+r].substr(1);if(t.lines[t.index+r]!==" "+i)return!1}return t.index+=n,!0}function Bu(t){var r=0,i=0;return t.forEach(function(t){if("string"!=typeof t){var e=Bu(t.mine),n=Bu(t.theirs);void 0!==r&&(e.oldLines===n.oldLines?r+=e.oldLines:r=void 0),void 0!==i&&(e.newLines===n.newLines?i+=e.newLines:i=void 0)}else void 0===i||"+"!==t[0]&&" "!==t[0]||i++,void 0===r||"-"!==t[0]&&" "!==t[0]||r++}),{oldLines:r,newLines:i}}function Lu(t){for(var e,n,r=[],i=0;i<t.length;i++)n=(e=t[i]).added?1:e.removed?-1:0,r.push([n,e.value]);return r}function Nu(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(Uu(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")}function Uu(t){var e=t;return e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")}cu.tokenize=function(t){return t.slice()},cu.join=cu.removeEmpty=function(t){return t};var zu=Object.freeze({Diff:Ia,diffChars:Ua,diffWords:$a,diffWordsWithSpace:Wa,diffLines:Va,diffTrimmedLines:Ja,diffSentences:Ga,diffCss:Za,diffJson:au,diffArrays:fu,structuredPatch:yu,createTwoFilesPatch:gu,createPatch:vu,applyPatch:pu,applyPatches:du,parsePatch:lu,merge:wu,convertChangesToDMP:Lu,convertChangesToXML:Nu,canonicalize:uu}),qu=/([\x00-\x09\x0B-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BA-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF])/g,Hu=e(function(t){var e,i=(e=hn)&&e.__esModule?e:{default:e};t.exports=function(t){t.installTheme({styles:{jsBoolean:"jsPrimitive",jsNumber:"jsPrimitive",error:["red","bold"],success:["green","bold"],diffAddedLine:"green",diffAddedHighlight:["bgGreen","white"],diffAddedSpecialChar:["bgGreen","cyan","bold"],diffRemovedLine:"red",diffRemovedHighlight:["bgRed","white"],diffRemovedSpecialChar:["bgRed","cyan","bold"],partialMatchHighlight:["bgYellow"]}}),t.installTheme("html",{palette:["#993333","#669933","#314575","#337777","#710071","#319916","#BB1A53","#999933","#4311C2","#996633","#993399","#333399","#228842","#C24747","#336699","#663399"],styles:{jsComment:"#969896",jsFunctionName:"#795da3",jsKeyword:"#a71d5d",jsPrimitive:"#0086b3",jsRegexp:"#183691",jsString:"#df5000",jsKey:"#555"}}),t.installTheme("ansi",{palette:["#FF1A53","#E494FF","#1A53FF","#FF1AC6","#1AFF53","#D557FF","#81FF57","#C6FF1A","#531AFF","#AFFF94","#C61AFF","#53FF1A","#FF531A","#1AFFC6","#FFC61A","#1AC6FF"],styles:{jsComment:"gray",jsFunctionName:"jsKeyword",jsKeyword:"magenta",jsNumber:[],jsPrimitive:"cyan",jsRegexp:"green",jsString:"cyan",jsKey:"#666",diffAddedHighlight:["bgGreen","black"],diffRemovedHighlight:["bgRed","black"],partialMatchHighlight:["bgYellow","black"]}}),t.addStyle("colorByIndex",function(t,e){var n=this.theme().palette;if(n){var r=n[e%n.length];this.text(t,r)}else this.text(t)}),t.addStyle("singleQuotedString",function(t){t=String(t),this.jsString("'").jsString(t.replace(/[\\\x00-\x1f']/g,function(t){if("\n"===t)return"\\n";if("\r"===t)return"\\r";if("'"===t)return"\\'";if("\\"===t)return"\\\\";if("\t"===t)return"\\t";if("\b"===t)return"\\b";if("\f"===t)return"\\f";var e=t.charCodeAt(0);return"\\x"+(e<16?"0":"")+e.toString(16)})).jsString("'")}),t.addStyle("propertyForObject",function(t,e,n){var r=!1;"symbol"===(void 0===t?"undefined":(0,i.default)(t))?this.text("[").appendInspected(t).text("]").text(":"):(t=String(t),/^[a-z$_][a-z0-9$_]*$/i.test(t)?this.text(t,"jsKey").text(":"):/^(?:0|[1-9][0-9]*)$/.test(t)?n?r=!0:this.jsNumber(t).text(":"):this.singleQuotedString(t).text(":")),e.isEmpty()||(r||(5<t.length&&e.isBlock()&&e.isMultiline()?(this.indentLines(),this.nl().i()):this.sp()),this.append(e))}),t.addStyle("code",function(t,e){this.text(t)}),t.addStyle("annotationBlock",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.getContentFromArguments(e),i=r.size().height;this.block(function(){for(var t=0;t<i;t+=1)0<t&&this.nl(),this.error("//")}),this.sp().block(r)}),t.addStyle("commentBlock",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.getContentFromArguments(e),i=r.size().height;this.block(function(){for(var t=0;t<i;t+=1)0<t&&this.nl(),this.jsComment("//")}),this.sp().block(r)}),t.addStyle("removedHighlight",function(t){this.alt({text:function(){t.split(/(\n)/).forEach(function(t){this.block(function(){this.text(t.replace(/\n/g,"\\n")).nl().text(t.replace(/[\s\S]/g,"^"))}),"\n"===t&&this.nl()},this)},fallback:function(){var e=this;t.split(/(\n)/).forEach(function(t){"\n"===t?e.diffRemovedSpecialChar("\\n").nl():e.diffRemovedHighlight(t)})}})}),t.addStyle("match",function(t){this.alt({text:function(){t.split(/(\n)/).forEach(function(t){"\n"===t?this.nl():this.block(function(){this.text(t).nl().text(t.replace(/[\s\S]/g,"^"))})},this)},fallback:function(){this.diffAddedHighlight(t)}})}),t.addStyle("partialMatch",function(t){this.alt({text:function(){this.match(t)},fallback:function(){this.partialMatchHighlight(t)}})}),t.addStyle("shouldEqualError",function(t){this.error(void 0===t?"should be":"should equal").sp().block(function(){this.appendInspected(t)})}),t.addStyle("errorName",function(t){var e=t.name,n=t.constructor;"string"==typeof e&&"Error"!==e?this.text(e):n&&"string"==typeof n.name?this.text(n.name):this.text("Error")}),t.addStyle("appendErrorMessage",function(t,e){t&&t.isUnexpected?this.append(t.getErrorMessage(_n.extend({output:this},e))):this.appendInspected(t)}),t.addStyle("appendItems",function(t,n){var r=this;n=n||"",t.forEach(function(t,e){0<e&&r.append(n),r.appendInspected(t)})}),t.addStyle("stringDiffFragment",function(o,t,s,a){t.split(/\n/).forEach(function(t,e,n){var r=n.length;this.isAtStartOfLine()&&this.alt({text:o,fallback:function(){""!==t||" "===o||0!==e&&e===r-1||this["+"===o?"diffAddedSpecialChar":"diffRemovedSpecialChar"]("\\n")}});var i=t.match(/^(.*[^ ])?( +)$/);i&&(t=i[1]||""),a?t.split(qu).forEach(function(t){qu.test(t)?this[{"+":"diffAddedSpecialChar","-":"diffRemovedSpecialChar"}[o]||s](_n.escapeChar(t)):this[s](t)},this):this[s](t),i&&this[{"+":"diffAddedHighlight","-":"diffRemovedHighlight"}[o]||s](i[2]),e!==r-1&&this.nl()},this)}),t.addStyle("stringDiff",function(t,e){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},f=c.type||"WordsWithSpace",l=[],n=void 0;zu.diffLines(t,e).forEach(function(t){n=n&&n.removed&&t.added?(l.push({oldValue:n.value,newValue:t.value,replaced:!0}),null):(n&&l.push(n),t)}),n&&l.push(n),l.forEach(function(t,e){if(t.replaced){var n=t.oldValue,r=t.newValue,i=this.clone(),o="\n"===n.slice(-1),s="\n"===r.slice(-1);o&&(n=n.slice(0,-1)),s&&(r=r.slice(0,-1)),zu["diff"+f](n,r).forEach(function(t){var e=t.added,n=t.value,r=t.removed;e?i.stringDiffFragment("+",n,"diffAddedHighlight",c.markUpSpecialCharacters):r?this.stringDiffFragment("-",n,"diffRemovedHighlight",c.markUpSpecialCharacters):(i.stringDiffFragment("+",n,"diffAddedLine"),this.stringDiffFragment("-",n,"diffRemovedLine"))},this),s&&!o&&i.diffAddedSpecialChar("\\n"),o&&!s&&this.diffRemovedSpecialChar("\\n"),this.nl().append(i).nl(o&&e<l.length-1?1:0)}else{var a=/\n$/.test(t.value),u=a?t.value.slice(0,-1):t.value;t.added?this.stringDiffFragment("+",u,"diffAddedLine",c.markUpSpecialCharacters):t.removed?this.stringDiffFragment("-",u,"diffRemovedLine",c.markUpSpecialCharacters):this.stringDiffFragment(" ",u,"text"),a&&this.nl()}},this)}),t.addStyle("arrow",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.styles||[],n=void 0;for(this.nl(t.top||0).sp(t.left||0).text("â",e),n=1;n<t.width;n+=1)this.text(n===t.width-1&&"up"===t.direction?"â·":"â",e);for(this.nl(),n=1;n<t.height-1;n+=1)this.sp(t.left||0).text("â",e).nl();for(this.sp(t.left||0).text("â",e),n=1;n<t.width;n+=1)this.text(n===t.width-1&&"down"===t.direction?"â·":"â",e)});var h=Vr;t.addStyle("merge",function(t){for(var e=t.map(function(t){var e=t.output;return h(e)}).reverse(),n=e.reduce(function(t,e){var n=e.length;return Math.max(t,n)},0),r=new Array(e.length),i=new Array(e.length),o=0;o<n;o+=1){0<o&&this.nl();var s=void 0;for(s=0;s<r.length;s+=1)r[s]=0,i[s]=0;var a=void 0;do{var u=a=!1;for(s=0;s<e.length;s+=1){var c=e[s][o];if(c){for(;c[r[s]]&&i[s]>=c[r[s]].args.content.length;)r[s]+=1,i[s]=0;var f=c[r[s]];if(f){if(a=!0,!u){var l=f.args.content.charAt(i[s]);" "!==l&&(this.text(l,f.args.styles),u=!0)}i[s]+=1}}}!u&&a&&this.sp()}while(a)}}),t.addStyle("arrowsAlongsideChangeOutputs",function(n,t){if(n){var s={},r=0;t.forEach(function(t,e){s[e]=r,r+=t.size().height});var a=this,u=[];n.forEach(function(t,i,e){var o=e.length;t.forEach(function(t){var e=t.start,n=t.end,r=t.direction;u.push(a.clone().arrow({left:2*i,top:s[e],width:1+2*(o-i),height:s[n]-s[e]+1,direction:r}))})}),1===u.length?this.block(u[0]):1<u.length&&this.block(function(){this.merge(u)})}else this.i();this.block(function(){t.forEach(function(t,e){this.nl(0<e?1:0),t.isEmpty()||this.sp(n?1:0).append(t)},this)})})}});t(Hu);var Ku=[],$u=[],Wu="undefined"!=typeof Uint8Array?Uint8Array:Array,Yu=!1;function Vu(){Yu=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)Ku[e]=t[e],$u[t.charCodeAt(e)]=e;$u["-".charCodeAt(0)]=62,$u["_".charCodeAt(0)]=63}function Ju(t){var e,n,r,i,o,s;Yu||Vu();var a=t.length;if(0<a%4)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[a-2]?2:"="===t[a-1]?1:0,s=new Wu(3*a/4-o),r=0<o?a-4:a;var u=0;for(n=e=0;e<r;e+=4,n+=3)i=$u[t.charCodeAt(e)]<<18|$u[t.charCodeAt(e+1)]<<12|$u[t.charCodeAt(e+2)]<<6|$u[t.charCodeAt(e+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===o?(i=$u[t.charCodeAt(e)]<<2|$u[t.charCodeAt(e+1)]>>4,s[u++]=255&i):1===o&&(i=$u[t.charCodeAt(e)]<<10|$u[t.charCodeAt(e+1)]<<4|$u[t.charCodeAt(e+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s}function Qu(t){return Ku[t>>18&63]+Ku[t>>12&63]+Ku[t>>6&63]+Ku[63&t]}function Gu(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(Qu(r));return i.join("")}function Xu(t){var e;Yu||Vu();for(var n=t.length,r=n%3,i="",o=[],s=0,a=n-r;s<a;s+=16383)o.push(Gu(t,s,a<s+16383?a:s+16383));return 1===r?(e=t[n-1],i+=Ku[e>>2],i+=Ku[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=Ku[e>>10],i+=Ku[e>>4&63],i+=Ku[e<<2&63],i+="="),o.push(i),o.join("")}function Zu(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=a;0<f;o=256*o+t[e+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;0<f;s=256*s+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)}function tc(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(e+=1<=s+l?h/u:h*Math.pow(2,1-l))*u&&(s++,u/=2),f<=s+l?(a=0,s=f):1<=s+l?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;0<c;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*y}var ec={}.toString,nc=Array.isArray||function(t){return"[object Array]"==ec.call(t)},rc=50;function ic(){return sc.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function oc(t,e){if(ic()<e)throw new RangeError("Invalid typed array length");return sc.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=sc.prototype:(null===t&&(t=new sc(e)),t.length=e),t}function sc(t,e,n){if(!(sc.TYPED_ARRAY_SUPPORT||this instanceof sc))return new sc(t,e,n);if("number"!=typeof t)return ac(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return fc(this,t)}function ac(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?pc(t,e,n,r):"string"==typeof e?lc(t,e,n):dc(t,e)}function uc(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function cc(t,e,n,r){return uc(e),e<=0?oc(t,e):void 0!==n?"string"==typeof r?oc(t,e).fill(n,r):oc(t,e).fill(n):oc(t,e)}function fc(t,e){if(uc(e),t=oc(t,e<0?0:0|yc(e)),!sc.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function lc(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!sc.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|vc(e,n),i=(t=oc(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}function hc(t,e){var n=e.length<0?0:0|yc(e.length);t=oc(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function pc(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),sc.TYPED_ARRAY_SUPPORT?(t=e).__proto__=sc.prototype:t=hc(t,e),t}function dc(t,e){if(gc(e)){var n=0|yc(e.length);return 0===(t=oc(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Xc(e.length)?oc(t,0):hc(t,e);if("Buffer"===e.type&&nc(e.data))return hc(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function yc(t){if(t>=ic())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ic().toString(16)+" bytes");return 0|t}function gc(t){return!(null==t||!t._isBuffer)}function vc(t,e){if(gc(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Yc(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Qc(t).length;default:if(r)return Yc(t).length;e=(""+e).toLowerCase(),r=!0}}function mc(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Dc(this,e,n);case"utf8":case"utf-8":return Cc(this,e,n);case"ascii":return Pc(this,e,n);case"latin1":case"binary":return Mc(this,e,n);case"base64":return Sc(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Rc(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function bc(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _c(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=sc.from(e,r)),gc(e))return 0===e.length?-1:wc(t,e,n,r,i);if("number"==typeof e)return e&=255,sc.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):wc(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function wc(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=s=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var f=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(a<n+u&&(n=a-u),o=n;0<=o;o--){for(var l=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){l=!1;break}if(l)return o}return-1}function Ec(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?i<(r=Number(r))&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function xc(t,e,n,r){return Gc(Yc(e,t.length-n),t,n,r)}function Ac(t,e,n,r){return Gc(Vc(e),t,n,r)}function Fc(t,e,n,r){return Ac(t,e,n,r)}function jc(t,e,n,r){return Gc(Qc(e),t,n,r)}function kc(t,e,n,r){return Gc(Jc(e,t.length-n),t,n,r)}function Sc(t,e,n){return 0===e&&n===t.length?Xu(t):Xu(t.slice(e,n))}function Cc(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],f=null,l=239<c?4:223<c?3:191<c?2:1;if(i+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&c)<<6|63&o)&&(f=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(f=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(f=u)}null===f?(f=65533,l=1):65535<f&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=l}return Oc(r)}sc.TYPED_ARRAY_SUPPORT=void 0===Hn.TYPED_ARRAY_SUPPORT||Hn.TYPED_ARRAY_SUPPORT,sc.poolSize=8192,sc._augment=function(t){return t.__proto__=sc.prototype,t},sc.from=function(t,e,n){return ac(null,t,e,n)},sc.TYPED_ARRAY_SUPPORT&&(sc.prototype.__proto__=Uint8Array.prototype,sc.__proto__=Uint8Array),sc.alloc=function(t,e,n){return cc(null,t,e,n)},sc.allocUnsafe=function(t){return fc(null,t)},sc.allocUnsafeSlow=function(t){return fc(null,t)},sc.isBuffer=Zc,sc.compare=function(t,e){if(!gc(t)||!gc(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},sc.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},sc.concat=function(t,e){if(!nc(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return sc.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var r=sc.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!gc(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},sc.byteLength=vc,sc.prototype._isBuffer=!0,sc.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)bc(this,e,e+1);return this},sc.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)bc(this,e,e+3),bc(this,e+1,e+2);return this},sc.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)bc(this,e,e+7),bc(this,e+1,e+6),bc(this,e+2,e+5),bc(this,e+3,e+4);return this},sc.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Cc(this,0,t):mc.apply(this,arguments)},sc.prototype.equals=function(t){if(!gc(t))throw new TypeError("Argument must be a Buffer");return this===t||0===sc.compare(this,t)},sc.prototype.inspect=function(){var t="",e=rc;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},sc.prototype.compare=function(t,e,n,r,i){if(!gc(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=t.slice(e,n),f=0;f<a;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},sc.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},sc.prototype.indexOf=function(t,e,n){return _c(this,t,e,n,!0)},sc.prototype.lastIndexOf=function(t,e,n){return _c(this,t,e,n,!1)},sc.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return Ec(this,t,e,n);case"utf8":case"utf-8":return xc(this,t,e,n);case"ascii":return Ac(this,t,e,n);case"latin1":case"binary":return Fc(this,t,e,n);case"base64":return jc(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kc(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},sc.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Tc=4096;function Oc(t){var e=t.length;if(e<=Tc)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Tc));return n}function Pc(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function Mc(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function Dc(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;++o)i+=Wc(t[o]);return i}function Rc(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function Ic(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function Bc(t,e,n,r,i,o){if(!gc(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Lc(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Nc(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function Uc(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function zc(t,e,n,r,i){return i||Uc(t,e,n,4,34028234663852886e22,-34028234663852886e22),tc(t,e,n,r,23,4),n+4}function qc(t,e,n,r,i){return i||Uc(t,e,n,8,17976931348623157e292,-17976931348623157e292),tc(t,e,n,r,52,8),n+8}sc.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),sc.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=sc.prototype;else{var i=e-t;n=new sc(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},sc.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Ic(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},sc.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Ic(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},sc.prototype.readUInt8=function(t,e){return e||Ic(t,1,this.length),this[t]},sc.prototype.readUInt16LE=function(t,e){return e||Ic(t,2,this.length),this[t]|this[t+1]<<8},sc.prototype.readUInt16BE=function(t,e){return e||Ic(t,2,this.length),this[t]<<8|this[t+1]},sc.prototype.readUInt32LE=function(t,e){return e||Ic(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},sc.prototype.readUInt32BE=function(t,e){return e||Ic(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},sc.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Ic(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},sc.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Ic(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},sc.prototype.readInt8=function(t,e){return e||Ic(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},sc.prototype.readInt16LE=function(t,e){e||Ic(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},sc.prototype.readInt16BE=function(t,e){e||Ic(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},sc.prototype.readInt32LE=function(t,e){return e||Ic(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},sc.prototype.readInt32BE=function(t,e){return e||Ic(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},sc.prototype.readFloatLE=function(t,e){return e||Ic(t,4,this.length),Zu(this,t,!0,23,4)},sc.prototype.readFloatBE=function(t,e){return e||Ic(t,4,this.length),Zu(this,t,!1,23,4)},sc.prototype.readDoubleLE=function(t,e){return e||Ic(t,8,this.length),Zu(this,t,!0,52,8)},sc.prototype.readDoubleBE=function(t,e){return e||Ic(t,8,this.length),Zu(this,t,!1,52,8)},sc.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||Bc(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},sc.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||Bc(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},sc.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Bc(this,t,e,1,255,0),sc.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},sc.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Bc(this,t,e,2,65535,0),sc.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Lc(this,t,e,!0),e+2},sc.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Bc(this,t,e,2,65535,0),sc.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Lc(this,t,e,!1),e+2},sc.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Bc(this,t,e,4,4294967295,0),sc.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Nc(this,t,e,!0),e+4},sc.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Bc(this,t,e,4,4294967295,0),sc.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Nc(this,t,e,!1),e+4},sc.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Bc(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},sc.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Bc(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},sc.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Bc(this,t,e,1,127,-128),sc.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},sc.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Bc(this,t,e,2,32767,-32768),sc.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Lc(this,t,e,!0),e+2},sc.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Bc(this,t,e,2,32767,-32768),sc.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Lc(this,t,e,!1),e+2},sc.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Bc(this,t,e,4,2147483647,-2147483648),sc.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Nc(this,t,e,!0),e+4},sc.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Bc(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),sc.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Nc(this,t,e,!1),e+4},sc.prototype.writeFloatLE=function(t,e,n){return zc(this,t,e,!0,n)},sc.prototype.writeFloatBE=function(t,e,n){return zc(this,t,e,!1,n)},sc.prototype.writeDoubleLE=function(t,e,n){return qc(this,t,e,!0,n)},sc.prototype.writeDoubleBE=function(t,e,n){return qc(this,t,e,!1,n)},sc.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;0<=i;--i)t[i+e]=this[i+n];else if(o<1e3||!sc.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},sc.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!sc.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=gc(t)?t:Yc(new sc(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var Hc=/[^+\/0-9A-Za-z-_]/g;function Kc(t){if((t=$c(t).replace(Hc,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function $c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Wc(t){return t<16?"0"+t.toString(16):t.toString(16)}function Yc(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Vc(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Jc(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}function Qc(t){return Ju(Kc(t))}function Gc(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Xc(t){return t!=t}function Zc(t){return null!=t&&(!!t._isBuffer||tf(t)||ef(t))}function tf(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function ef(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&tf(t.slice(0,0))}var nf=uf;function rf(t,e){this.index=t,this.values=e}function of(t,e){this.index=t,this.howMany=e}function sf(t,e,n){this.from=t,this.to=e,this.howMany=n}function af(t,e){return t===e}function uf(t,e,n){n||(n=af);for(var r=t.length,i=e.length,o=[],s={},a={},u=0;u<r;u++)for(var c=t[u],f=0;f<i;f++)if(!a[f]&&n(c,e[f],u,f)){for(var l=u,h=f,p=0;s[u++]=a[f++]=!0,p++,u<r&&f<i&&n(t[u],e[f],u,f)&&!a[f];);o.push(new sf(l,h,p)),u--;break}var d=[];for(u=0;u<r;)if(s[u])u++;else{var y=u;for(p=0;u<r&&!s[u++];)p++;d.push(new of(y,p))}var g=[];for(f=0;f<i;)if(a[f])f++;else{for(y=f,p=0;f<i&&!a[f++];)p++;var v=e.slice(y,y+p);g.push(new rf(y,v))}var m,b,_=g.length,w=d.length,E=o.length,x=0;for(m=0;m<w;m++){var A=d[m];for(A.index-=x,x+=A.howMany,b=0;b<E;b++){(S=o[b]).from>=A.index&&(S.from-=A.howMany)}}for(m=_;m--;){var F=g[m];p=F.values.length;for(b=E;b--;){(S=o[b]).to>=F.index&&(S.to-=p)}}for(m=E;1<m--;){if((S=o[m]).to!==S.from)for(b=m;b--;){var j=o[b];j.to>=S.to&&(j.to-=S.howMany),j.to>=S.from&&(j.to+=S.howMany)}}var k=[];for(m=0;m<E;m++){var S;if((S=o[m]).to!==S.from)for(k.push(S),b=m+1;b<E;b++){var C=o[b];C.from>=S.from&&(C.from-=S.howMany),C.from>=S.to&&(C.from+=S.howMany)}}return d.concat(k,g)}function cf(e){for(var t=1;t<arguments.length;t+=1){var n=arguments[t];Object.keys(n).forEach(function(t){e[t]=n[t]})}return e}uf.InsertDiff=rf,uf.RemoveDiff=of,uf.MoveDiff=sf,rf.prototype.type="insert",rf.prototype.toJSON=function(){return{type:this.type,index:this.index,values:this.values}},of.prototype.type="remove",of.prototype.toJSON=function(){return{type:this.type,index:this.index,howMany:this.howMany}},sf.prototype.type="move",sf.prototype.toJSON=function(){return{type:this.type,from:this.from,to:this.to,howMany:this.howMany}};var ff=function(r,i,o,s,t){if(Array.isArray(t)||"boolean"==typeof t)throw new Error(["It looks like you are using arrayChanges includeNonNumericalProperties,","the API has changed. You need to supply it as an entry to an option object:","arrayChanges(actual, expected, equal, similar, {",'  includeNonNumericalProperties: ["foo", "bar"]',"})"].join("\n"));for(var e=(t=t||{}).includeNonNumericalProperties,n=(!("fallbackToItemByItemDiff"in t)||t.fallbackToItemByItemDiff),a=new Array(r.length),u=0;u<r.length;u+=1)a[u]={type:"similar",value:r[u],actualIndex:u};o=o||function(t,e){return t===e},s=s||function(t,e){return!1};var c=nf(Array.prototype.slice.call(r),Array.prototype.slice.call(i),function(t,e,n,r){return o(t,e,n,r)||s(t,e,n,r)});function f(t){var e,n=0;for(e=0;e<a.length&&n<t;e+=1)"remove"!==a[e].type&&"moveSource"!==a[e].type&&n++;return e}var l=c.filter(function(t){return"remove"===t.type}),h=0;l.forEach(function(t){var e=h+t.index;a.slice(e,t.howMany+e).forEach(function(t){t.type="remove"}),h+=t.howMany}),c.filter(function(t){return"move"===t.type}).forEach(function(t){var e=f(t.from+1)-1,n=a.slice(e,t.howMany+e),r=n.map(function(t){return cf({},t,{last:!1,type:"moveTarget"})});n.forEach(function(t){t.type="moveSource"});var i=f(t.to);Array.prototype.splice.apply(a,[i,0].concat(r))}),c.filter(function(t){return"insert"===t.type}).forEach(function(t){for(var e=new Array(t.values.length),n=0;n<t.values.length;n+=1)e[n]={type:"insert",value:t.values[n],expectedIndex:t.index};var r=f(t.index);Array.prototype.splice.apply(a,[r,0].concat(e))});var p=0;a.forEach(function(t,e){var n=t.type;"remove"===n||"moveSource"===n?p-=1:"similar"===n&&(t.expected=i[p+e],t.expectedIndex=p+e)});var d=a.reduce(function(t,e){return"similar"===e.type||"moveSource"===e.type||"moveTarget"===e.type?t:t+1},0);if(n){var y,g;for(y=g=0;g<Math.max(r.length,i.length)&&y<=d;g+=1)(g>=r.length||g>=i.length||!o(r[g],i[g],g,g)&&!s(r[g],i[g],g,g))&&(y+=1);if(y<=d){var v;for(a=[],v=0;v<Math.min(r.length,i.length);v+=1)a.push({type:"similar",value:r[v],expected:i[v],actualIndex:v,expectedIndex:v});if(r.length<i.length)for(;v<Math.max(r.length,i.length);v+=1)a.push({type:"insert",value:i[v],expectedIndex:v});else for(;v<Math.max(r.length,i.length);v+=1)a.push({type:"remove",value:r[v],actualIndex:v})}}if(a.forEach(function(t){"similar"===t.type&&o(t.value,t.expected,t.actualIndex,t.expectedIndex)&&(t.type="equal")}),e){var m;if(Array.isArray(e))m=e;else{var b={};m=[],[r,i].forEach(function(t){Object.keys(t).forEach(function(t){/^(?:0|[1-9][0-9]*)$/.test(t)||b[t]||(b[t]=!0,m.push(t))}),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(function(t){b[t]||(b[t]=!0,m.push(t))})})}m.forEach(function(t){var e;if(t in r){var n=r[t];e=i[t],t in i&&void 0!==e?(e=i[t],a.push({type:o(n,e,t,t)?"equal":"similar",expectedIndex:t,actualIndex:t,value:n,expected:e})):void 0!==n&&a.push({type:"remove",actualIndex:t,value:n})}else void 0!==(e=i[t])&&a.push({type:"insert",expectedIndex:t,value:e})})}return 0<a.length&&(a[a.length-1].last=!0),a},lf=Number.isNaN||function(t){return t!=t},hf=Number.isFinite||function(t){return!("number"!=typeof t||lf(t)||t===1/0||t===-1/0)},pf=function(t,e){if("string"!=typeof t)throw new TypeError("Expected a string as the first argument");if(e<0||!hf(e))throw new TypeError("Expected a finite positive number");for(var n="";1&e&&(n+=t),t+=t,e>>=1;);return n},df=/^(?:( )+|\t+)/;function yf(t){var e=0,n=0,r=0;for(var i in t){var o=t[i],s=o[0],a=o[1];(n<s||s===n&&r<a)&&(n=s,r=a,e=+i)}return e}var gf=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");var i,o,s=0,a=0,u=0,c={};t.split(/\n/g).forEach(function(t){if(t){var e,n=t.match(df);n?(e=n[0].length,n[1]?a++:s++):e=0;var r=e-u;u=e,r?(i=c[(o=0<r)?r:-r])?i[0]++:i=c[r]=[1,0]:i&&(i[1]+=+o)}});var e,n,r=yf(c);return n=r?s<=a?(e="space",pf(" ",r)):(e="tab",pf("\t",r)):(e=null,""),{amount:r,type:e,indent:n}},vf=e(function(t){var r=e(Wt),u=e(hn);function e(t){return t&&t.__esModule?t:{default:t}}var o=_n.isRegExp,c=_n.leftPad;t.exports=function(i){i.addType({name:"wrapperObject",identify:!1,equal:function(t,e,n){return t===e||n(this.unwrap(t),this.unwrap(e))},inspect:function(t,e,n,r){return n.append(this.prefix(n.clone(),t)),n.append(r(this.unwrap(t),e)),n.append(this.suffix(n.clone(),t)),n},diff:function(t,e,n,r,i){n.inline=!0,t=this.unwrap(t),e=this.unwrap(e);var o=r(t,e),s=this.prefix(n.clone(),t),a=this.suffix(n.clone(),t);return o&&o.inline?n.append(s).append(o).append(a):n.append(s).nl().indentLines().i().block(function(){this.append(i(t)).sp().annotationBlock(function(){this.shouldEqualError(e,i),o&&this.nl(2).append(o)})}).nl().outdentLines().append(a)}}),"function"==typeof Symbol&&i.addType({name:"Symbol",identify:function(t){return"symbol"===(void 0===t?"undefined":(0,u.default)(t))},inspect:function(t,e,n,r){return n.jsKeyword("Symbol").text("(").singleQuotedString(t.toString().replace(/^Symbol\(|\)$/g,"")).text(")")}}),i.addType({name:"object",indent:!0,forceMultipleLines:!1,identify:function(t){return t&&"object"===(void 0===t?"undefined":(0,u.default)(t))},prefix:function(t,e){var n=e.constructor,r=n&&"function"==typeof n&&n!==Object&&_n.getFunctionName(n);return r&&"Object"!==r&&t.text(r+"("),t.text("{")},property:function(t,e,n,r){return t.propertyForObject(e,n,r)},suffix:function(t,e){t.text("}");var n=e.constructor,r=n&&"function"==typeof n&&n!==Object&&_n.getFunctionName(n);return r&&"Object"!==r&&t.text(")"),t},delimiter:function(t,e,n){return e<n-1&&t.text(","),t},getKeys:Object.getOwnPropertySymbols?function(t){var e=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols(t);return 0<n.length?e.concat(n):e}:Object.getOwnPropertyNames,keyComparator:"function"==typeof Symbol?function(t,e){var n,r,i=t,o=e;if(n="symbol"===(void 0===t?"undefined":(0,u.default)(t)),r="symbol"===(void 0===e?"undefined":(0,u.default)(e)),n){if(!r)return 1;i=t.toString(),o=e.toString()}else if(r)return-1;return i<o?-1:o<i?1:0}:void 0,equal:function(t,e,n){return _n.checkObjectEqualityUsingType(t,e,this,n)},hasKey:function(t,e,n){return n?Object.prototype.hasOwnProperty.call(t,e):e in t},inspect:function(u,t,c,f){var l=this.getKeys(u);if(0===l.length)return this.prefix(c,u),this.suffix(c,u),c;var h=this,e=l.map(function(t,e){var n=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(u,t),r=n&&n.get,i=n&&n.set,o=c.clone();i&&!r&&o.text("set").sp();var s=void 0;s=i&&!r?i:h.valueForKey(u,t);var a=f(s);return s&&s._expectIt&&(a=c.clone().block(a)),h.property(o,t,a),o.amend(h.delimiter(c.clone(),e,l.length)),r&&i?o.sp().jsComment("/* getter/setter */"):r&&o.sp().jsComment("/* getter */"),o}),r=c.preferredWidth-2*(t===1/0?0:t)-2,n=0,i=5<e.length||e.every(function(t){return!t.isMultiline()&&(n+=t.size().width)<r}),o=c.clone();if(i){var s=0;e.forEach(function(t,e){var n=t.size();s+=n.width+1,0<e&&(1===n.height&&s<r?o.sp():(o.nl(),s=n.width),1<n.height&&(s=r)),o.append(t)})}else e.forEach(function(t,e){0<e&&o.nl(),o.append(t)});var a=this.prefix(c.clone(),u),p=this.suffix(c.clone(),u);return c.append(a),this.forceMultipleLines||o.isMultiline()?(a.isEmpty()||c.nl(),this.indent&&c.indentLines().i(),c.block(o),this.indent&&c.outdentLines(),p.isEmpty()||c.nl()):c.sp(a.isEmpty()?0:1).append(o).sp(p.isEmpty()?0:1),c.append(p)},diff:function(c,f,l,h,p,d){if(c.constructor!==f.constructor)return l.text("Mismatching constructors ").text(c.constructor&&_n.getFunctionName(c.constructor)||c.constructor).text(" should be ").text(f.constructor&&_n.getFunctionName(f.constructor)||f.constructor);l.inline=!0;var y=this.getKeys(c),t=this.getKeys(f),e=this.uniqueKeys(y,t),n=this.prefix(l.clone(),c);l.append(n).nl(n.isEmpty()?0:1),this.indent&&l.indentLines();var g=this;e.forEach(function(a,u){l.nl(0<u?1:0).i().block(function(){var t=g.valueForKey(c,a),e=g.valueForKey(f,a),n=l.clone(),r=!d(t,e),i=!1,o=void 0;if(r)if(g.hasKey(f,a))if(g.hasKey(c,a)){var s=h(t,e);!s||s&&!s.inline?(n.shouldEqualError(e),s&&n.nl(2).append(s)):(i=!0,o=s)}else this.error("// missing").sp(),o=l.clone().appendInspected(e),i=!0;else n.error("should be removed"),i=!0;else i=!0;o||(o=p(t,r?1/0:null)),o.amend(g.delimiter(l.clone(),u,y.length)),i||(o=l.clone().block(o)),g.property(this,a,o),n.isEmpty()||this.sp().annotationBlock(n)})}),this.indent&&l.outdentLines();var r=this.suffix(l.clone(),c);return l.nl(r.isEmpty()?0:1).append(r)},similar:function(e,n){var r=this;if(null===e||null===n)return!1;var t=void 0===e?"undefined":(0,u.default)(e);if(t!==(void 0===n?"undefined":(0,u.default)(n)))return!1;if("string"===t)return Qi(e,n)<e.length/2;if("object"!==t||!e)return!1;if(_n.isArray(e)&&_n.isArray(n))return!0;var i=this.getKeys(e),o=this.getKeys(n),s=0,a=Math.round(Math.max(i.length,o.length)/2);return i.concat(o).some(function(t){return r.hasKey(e,t)&&r.hasKey(n,t)&&(s+=1),a<=s})},uniqueKeys:_n.uniqueStringsAndSymbols,valueForKey:function(t,e){return t[e]}}),i.addType({name:"type",base:"object",identify:function(t){return t&&t._unexpectedType},inspect:function(t,e,n){var r=t.name;return n.text("type: ").jsKeyword(r)}}),i.addType({name:"array-like",base:"object",identify:!1,numericalPropertiesOnly:!0,getKeys:function(t){for(var e=new Array(t.length),n=0;n<t.length;n+=1)e[n]=n;return this.numericalPropertiesOnly||e.push.apply(e,(0,r.default)(this.getKeysNonNumerical(t))),e},getKeysNonNumerical:Object.getOwnPropertySymbols?function(t){var e=[];Object.keys(t).forEach(function(t){_n.numericalRegExp.test(t)||e.push(t)});var n=Object.getOwnPropertySymbols(t);return 0<n.length&&e.push.apply(e,(0,r.default)(n)),e}:function(t){var e=[];return Object.keys(t).forEach(function(t){_n.numericalRegExp.test(t)||e.push(t)}),e},equal:function(e,n,t){var r=this;if(e===n)return!0;if(e.constructor!==n.constructor||e.length!==n.length)return!1;var i=void 0;for(i=0;i<e.length;i+=1)if(!t(this.valueForKey(e,i),this.valueForKey(n,i)))return!1;if(!this.numericalPropertiesOnly){var o=this.getKeysNonNumerical(e).filter(function(t){return void 0!==r.valueForKey(e,t)}),s=this.getKeysNonNumerical(n).filter(function(t){return void 0!==r.valueForKey(n,t)||void 0!==r.valueForKey(e,t)});if(o.length!==s.length)return!1;for(i=0;i<o.length;i+=1)if(!t(this.valueForKey(e,o[i]),this.valueForKey(n,s[i])))return!1}return!0},prefix:function(t){return t.text("[")},suffix:function(t){return t.text("]")},inspect:function(n,t,r,i){var o=this,e=this.prefix(r.clone(),n),s=this.suffix(r.clone(),n),a=this.getKeys(n);if(0===a.length)return r.append(e).append(s);if(1===t&&10<n.length)return r.append(e).text("...").append(s);var u=a.map(function(t){var e=void 0;return e=o.hasKey(n,t)?i(o.valueForKey(n,t)):_n.numericalRegExp.test(t)?r.clone():i(void 0),o.property(r.clone(),t,e,!0)}),c=ja-Math.min(ja,t),f=r.preferredWidth-20-c*r.indentationWidth-2,l=0,h=this.forceMultipleLines||u.some(function(t){if(t.isMultiline())return!0;var e=t.size();return l+=e.width,f<l});return u.forEach(function(t,e){t.amend(o.delimiter(r.clone(),e,a.length))}),h?(r.append(e),e.isEmpty()||r.nl(),this.indent&&r.indentLines(),u.forEach(function(t,e){r.nl(0<e?1:0).i().block(t)}),this.indent&&r.outdentLines(),s.isEmpty()||r.nl(),r.append(s)):(r.append(e).sp(e.isEmpty()?0:1),u.forEach(function(t,e){r.append(t),e===u.length-1||r.sp()}),r.sp(s.isEmpty()?0:1).append(s))},diffLimit:512,diff:function(t,e,i,o,s,n){if(i.inline=!0,Math.max(t.length,e.length)>this.diffLimit)return i.jsComment("Diff suppressed due to size > "+this.diffLimit),i;if(t.constructor!==e.constructor)return this.baseType.diff(t,e,i);var r=this.prefix(i.clone(),t);i.append(r).nl(r.isEmpty()?0:1),this.indent&&i.indentLines();var a=_n.duplicateArrayLikeUsingType(t,this),u=this.getKeys(t),c=_n.duplicateArrayLikeUsingType(e,this),f=this.getKeys(e),l=!this.numericalPropertiesOnly&&_n.uniqueNonNumericalStringsAndSymbols(u,f),h=this,p=ff(a,c,n,function(t,e){return h.similar(t,e)},{includeNonNumericalProperties:l}),d=p.reduce(function(t,e,n){return"insert"===e.type?t:n},-1),y=_n.packArrows(p);i.arrowsAlongsideChangeOutputs(y,p.map(function(n,t){var r=h.delimiter(i.clone(),t,d+1);return"moveTarget"===n.type?i.clone():i.clone().block(function(){if("moveSource"===n.type){var t=h.property(i.clone(),n.actualIndex,s(n.value),!0);this.amend(t).amend(r).sp().error("// should be moved")}else"insert"===n.type?this.annotationBlock(function(){this.error("missing ").block(function(){var t=void 0!==n.actualIndex?n.actualIndex:n.expectedIndex,e=h.property(i.clone(),t,s(n.value),!0);this.amend(e)})}):"remove"===n.type?this.block(function(){var t=h.property(i.clone(),n.actualIndex,s(n.value),!0);this.amend(t).amend(r).sp().error("// should be removed")}):"equal"===n.type?this.block(function(){var t=h.property(i.clone(),n.actualIndex,s(n.value),!0);this.amend(t).amend(r)}):this.block(function(){var t=o(n.value,n.expected);if(t&&t.inline)this.append(t).append(r);else{var e=h.property(i.clone(),n.actualIndex,s(n.value),!0);this.append(e).append(r).sp().annotationBlock(function(){this.shouldEqualError(n.expected,s),t&&this.nl(2).append(t)})}})})})),this.indent&&i.outdentLines();var g=this.suffix(i.clone(),t);return i.nl(g.isEmpty()?0:1).append(g)}}),i.addType({name:"array",base:"array-like",numericalPropertiesOnly:!1,identify:function(t){return _n.isArray(t)}}),i.addType({name:"arguments",base:"array-like",prefix:function(t){return t.text("arguments(","cyan")},suffix:function(t){return t.text(")","cyan")},identify:function(t){return"[object Arguments]"===Object.prototype.toString.call(t)}});var n=["message","name","description","line","number","column","sourceId","sourceURL","stack","stackArray","__stackCleaned__","isOperational"].reduce(function(t,e){return t[e]=!0,t},{});(new Error).hasOwnProperty("arguments")&&(n.arguments=!0,n.type=!0),i.addType({base:"object",name:"Error",identify:function(t){return _n.isError(t)},getKeys:function(t){var e=this.baseType.getKeys(t).filter(function(t){return!n[t]});return e.unshift("message"),e},unwrap:function(n){return this.getKeys(n).reduce(function(t,e){return t[e]=n[e],t},{})},equal:function(t,e,n){return t===e||n(t.message,e.message)&&_n.checkObjectEqualityUsingType(t,e,this,n)},inspect:function(t,e,n,r){n.errorName(t).text("(");var i=this.getKeys(t);return 1===i.length&&"message"===i[0]?""!==t.message&&n.append(r(t.message)):n.append(r(this.unwrap(t),e)),n.text(")")},diff:function(t,e,n,r){return t.constructor!==e.constructor?n.text("Mismatching constructors ").errorName(t).text(" should be ").errorName(e):((n=r(this.unwrap(t),this.unwrap(e)))&&((n=n.clone().errorName(t).text("(").append(n).text(")")).inline=!1),n)}});var e=["output","_isUnexpected","htmlMessage","_hasSerializedErrorMessage","expect","assertion","originalError"].reduce(function(t,e){return t[e]=!0,t},{});i.addType({base:"Error",name:"UnexpectedError",identify:function(t){return t&&"object"===(void 0===t?"undefined":(0,u.default)(t))&&t._isUnexpected&&this.baseType.identify(t)},getKeys:function(t){return this.baseType.getKeys(t).filter(function(t){return!e[t]})},inspect:function(t,e,n){n.jsFunctionName(this.name).text("(");var r=t.getErrorMessage(n);return r.isMultiline()?n.nl().indentLines().i().block(r).nl():n.append(r),n.text(")")}}),i.addType({name:"date",identify:function(t){return"[object Date]"===Object.prototype.toString.call(t)},equal:function(t,e){return t.getTime()===e.getTime()},inspect:function(t,e,n,r){var i=t.toUTCString().replace(/UTC/,"GMT"),o=t.getUTCMilliseconds();if(0<o){for(var s=String(o);s.length<3;)s="0"+s;i=i.replace(" GMT","."+s+" GMT")}return n.jsKeyword("new").sp().text("Date(").append(r(i).text(")"))}}),i.addType({base:"object",name:"function",identify:function(t){return"function"==typeof t},getKeys:Object.keys,equal:function(t,e){return t===e},inspect:function(t,e,n,r){var i=Function.prototype.toString.call(t).replace(/\r\n?|\n\r?/g,"\n"),o=_n.getFunctionName(t)||"",s=void 0,a=void 0,u=void 0,c=i.match(/^\s*((?:async )?\s*(?:\S+\s*=>|\([^)]*\)\s*=>|class|function\s?(?:\*\s*)?\w*\s*\([^)]*\)))([\s\S]*)$/);if(c){"function ()"===(s=c[1].replace(/function(\S)/,"function $1").replace(/\* /,"*"))&&o&&(s="function "+o+"()");var f=(a=c[2]).match(/^(\s*\{)([\s\S]*?)([ ]*)\}\s*$/),l=void 0,h=!0,p="}",d=0;if(f)l=f[1],a=f[2],1===(u=f[3]||"").length&&(p=" }");else if(f=a.match(/^(\s*)([\s\S]*?)([ ]*)\s*$/)){l=f[1],h=!1,a=f[2];var y=l.match(/^\n( +)/);y?(l="\n",/\n/.test(a)?(u=y[1],d=1):a=a.replace(/^\s*/,"  ")):u=f[3]||"",p=""}if(/\n/.test(a)&&!/\\\n/.test(a)){a=a.replace(new RegExp("^ {"+u.length+"}","mg"),"");var g=gf(a);a=a.replace(new RegExp("^(?:"+g.indent+")*","mg"),function(t){var e=t.length;return _n.leftPad("",(e/g.amount+d)*n.indentationWidth," ")})}o&&"anonymous"!==o||(o=""),/^\s*\[native code\]\s*$/.test(a)?(a=" /* native code */ ",p="}"):/^\s*$/.test(a)?a="":/^\s*[^\r\n]{1,30}\s*$/.test(a)&&-1===a.indexOf("//")&&h?(a=" "+a.trim()+" ",p="}"):a=a.replace(/^((?:.*\n){3}( *).*\n)[\s\S]*?\n[\s\S]*?\n((?:.*\n){3})$/,"$1$2// ... lines removed ...\n$3"),a=f?l+a+p:a.replace(/[ ]*$/,"")}else s="function "+o+"( /*...*/ ) ",a="{ /*...*/ }";return n.code(s+a,"javascript")},diff:function(t,e,n){if("function"!=typeof t||"function"!=typeof e)return this.baseType.diff(t,e,n)}}),i.addType({base:"function",name:"expect.it",identify:function(t){return"function"==typeof t&&t._expectIt},inspect:function(t,e,n,r){var i=t._expectations,o=t._OR;n.text("expect.it(");var s=!1;return i.forEach(function(t,e){t!==o?(s?n.text(")\n      .or("):0<e&&n.text(")\n        .and("),Array.prototype.slice.call(t).forEach(function(t,e){0<e&&n.text(", "),n.append(r(t))}),s=!1):s=!0}),n.amend(")")}}),i.addType({name:"Promise",base:"object",identify:function(t){return t&&this.baseType.identify(t)&&"function"==typeof t.then},inspect:function(t,e,n,r){if(n.jsFunctionName("Promise"),t.isPending&&t.isPending())n.sp().yellow("(pending)");else if(t.isFulfilled&&t.isFulfilled()){if(n.sp().green("(fulfilled)"),t.value){var i=t.value();void 0!==i&&n.sp().text("=>").sp().append(r(i))}}else if(t.isRejected&&t.isRejected()){n.sp().red("(rejected)"),void 0!==t.reason()&&n.sp().text("=>").sp().append(r(t.reason()))}return n}}),i.addType({name:"regexp",base:"object",identify:o,equal:function(t,e){return t===e||t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline},inspect:function(t,e,n){return n.jsRegexp(t)},diff:function(t,e,n,r,i){return n.inline=!1,n.stringDiff(String(t),String(e),{type:"Chars",markUpSpecialCharacters:!0})}}),i.addType({name:"binaryArray",base:"array-like",digitWidth:2,hexDumpWidth:16,identify:!1,prefix:function(t){return t.code(this.name+"([","javascript")},suffix:function(t){return t.code("])","javascript")},equal:function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0},hexDump:function(t,e){var n="";"number"==typeof e&&0!==e||(e=t.length);for(var r=0;r<e;r+=this.hexDumpWidth){0<n.length&&(n+="\n");for(var i="",o=" â",s=0;s<this.hexDumpWidth;s+=1)if(r+s<e){var a=t[r+s];i+=c(a.toString(16).toUpperCase(),this.digitWidth,"0")+" ",o+=String.fromCharCode(a).replace(/\n/g,"â").replace(/\r/g,"â")}else 2===this.digitWidth&&(i+="   ");2===this.digitWidth?n+=i+o+"â":n+=i.replace(/\s+$/,"")}return n},inspect:function(t,e,n){this.prefix(n,t);for(var r="",i=0;i<Math.min(this.hexDumpWidth,t.length);i+=1){0<i&&(r+=", ");var o=t[i];r+="0x"+c(o.toString(16).toUpperCase(),this.digitWidth,"0")}return t.length>this.hexDumpWidth&&(r+=" /* "+(t.length-this.hexDumpWidth)+" more */ "),n.code(r,"javascript"),this.suffix(n,t),n},diffLimit:512,diff:function(t,e,n,r,i){return n.inline=!1,Math.max(t.length,e.length)>this.diffLimit?n.jsComment("Diff suppressed due to size > "+this.diffLimit):n.stringDiff(this.hexDump(t),this.hexDump(e),{type:"Chars",markUpSpecialCharacters:!1}).replaceText(/[\x00-\x1f\x7f-\xffââ]/g,".").replaceText(/[â ]/g,function(t,e){this.text(e)}),n}}),[8,16,32].forEach(function(r){["Int","Uint"].forEach(function(t){var e=t+r+"Array",n=s[e];void 0!==n&&i.addType({name:e,base:"binaryArray",hexDumpWidth:128/r,digitWidth:r/4,identify:function(t){return t instanceof n}})},this)},this),void 0!==sc&&i.addType({name:"Buffer",base:"binaryArray",identify:Zc}),i.addType({name:"string",identify:function(t){return"string"==typeof t},inspect:function(t,e,n){return n.singleQuotedString(t)},diffLimit:4096,diff:function(t,e,n,r,i){return Math.max(t.length,e.length)>this.diffLimit?n.jsComment("Diff suppressed due to size > "+this.diffLimit):(n.stringDiff(t,e,{type:"WordsWithSpace",markUpSpecialCharacters:!0}),n.inline=!1),n}}),i.addType({name:"number",identify:function(t){return"number"==typeof t&&!isNaN(t)},inspect:function(t,e,n){return t=0===t&&1/t==-1/0?"-0":String(t),n.jsNumber(String(t))}}),i.addType({name:"NaN",identify:function(t){return"number"==typeof t&&isNaN(t)},inspect:function(t,e,n){return n.jsPrimitive(t)}}),i.addType({name:"boolean",identify:function(t){return"boolean"==typeof t},inspect:function(t,e,n){return n.jsPrimitive(t)}}),i.addType({name:"undefined",identify:function(t){return void 0===t},inspect:function(t,e,n){return n.jsPrimitive(t)}}),i.addType({name:"null",identify:function(t){return null===t},inspect:function(t,e,n){return n.jsPrimitive(t)}}),i.addType({name:"assertion",identify:function(t){return t instanceof pn}})}});t(vf);var mf=Af,bf=1e3;function _f(t,e){this.index=t,this.values=e}function wf(t,e){this.index=t,this.howMany=e}function Ef(t,e,n){this.from=t,this.to=e,this.howMany=n}function xf(t,e,n,r,i){return i(t===e)}function Af(u,b,c,_){c||(c=xf);var w=u.length,E=b.length,x=[],A={},F={};!function o(e,n,s,a){E<=n&&(e++,n=0),w<=e?a():F[n]?s?o(e,n+1,s-1,a):setTimeout(function(){o(e,n+1,bf,a)},0):c(u[e],b[n],e,n,function(t){if(t){var r=e,i=n;!function e(n,r,i,o){A[n++]=F[r++]=!0,i++,n<w&&r<E&&!F[r]?c(u[n],b[r],n,r,function(t){t?setTimeout(function(){e(n,r,i,o)},0):o(n,r,i)}):o(n,r,i)}(e,n,0,function(t,e,n){x.push(new Ef(r,i,n)),s?o(t,0,s-1,a):setTimeout(function(){o(t,0,bf,a)},0)})}else s?o(e,n+1,s-1,a):setTimeout(function(){o(e,n+1,bf,a)},0)})}(0,0,bf,function(){for(var t=[],e=0;e<w;)if(A[e])e++;else{for(var n=e,r=0;e<w&&!A[e++];)r++;t.push(new wf(n,r))}for(var i=[],o=0;o<E;)if(F[o])o++;else{for(n=o,r=0;o<E&&!F[o++];)r++;var s=b.slice(n,n+r);i.push(new _f(n,s))}var a,u,c=i.length,f=t.length,l=x.length,h=0;for(a=0;a<f;a++){var p=t[a];for(p.index-=h,h+=p.howMany,u=0;u<l;u++){(v=x[u]).from>=p.index&&(v.from-=p.howMany)}}for(a=c;a--;){var d=i[a];r=d.values.length;for(u=l;u--;){(v=x[u]).to>=d.index&&(v.to-=r)}}for(a=l;1<a--;){if((v=x[a]).to!==v.from)for(u=a;u--;){var y=x[u];y.to>=v.to&&(y.to-=v.howMany),y.to>=v.from&&(y.to+=v.howMany)}}var g=[];for(a=0;a<l;a++){var v;if((v=x[a]).to!==v.from)for(g.push(v),u=a+1;u<l;u++){var m=x[u];m.from>=v.from&&(m.from-=v.howMany),m.from>=v.to&&(m.from+=v.howMany)}}_(t.concat(g,i))})}Af.InsertDiff=_f,Af.RemoveDiff=wf,Af.MoveDiff=Ef,_f.prototype.type="insert",_f.prototype.toJSON=function(){return{type:this.type,index:this.index,values:this.values}},wf.prototype.type="remove",wf.prototype.toJSON=function(){return{type:this.type,index:this.index,howMany:this.howMany}},Ef.prototype.type="move",Ef.prototype.toJSON=function(){return{type:this.type,from:this.from,to:this.to,howMany:this.howMany}};var Ff=1e3;function jf(e){for(var t=1;t<arguments.length;t+=1){var n=arguments[t];Object.keys(n).forEach(function(t){e[t]=n[t]})}return e}var kf=function(c,f,l,h,p,d){"function"==typeof p&&(d=p,p=!1);for(var y=new Array(c.length),t=0;t<c.length;t+=1)y[t]={type:"similar",actualIndex:t,value:c[t]};h=h||function(t,e,n,r,i){return i(!1)},mf([].concat(c),[].concat(f),function(e,n,r,i,o){l(e,n,r,i,function(t){if(t)return o(!0);h(e,n,r,i,function(t){return o(t)})})},function(t){function o(t){var e,n=0;for(e=0;e<y.length&&n<t;e+=1)"remove"!==y[e].type&&"moveSource"!==y[e].type&&(n+=1);return e}var e=t.filter(function(t){return"remove"===t.type}),n=0;e.forEach(function(t){var e=n+t.index;y.slice(e,t.howMany+e).forEach(function(t){t.type="remove"}),n+=t.howMany}),t.filter(function(t){return"move"===t.type}).forEach(function(t){var e=o(t.from+1)-1,n=y.slice(e,t.howMany+e),r=n.map(function(t){return jf({},t,{last:!1,type:"moveTarget"})});n.forEach(function(t){t.type="moveSource"});var i=o(t.to);Array.prototype.splice.apply(y,[i,0].concat(r))}),t.filter(function(t){return"insert"===t.type}).forEach(function(t){for(var e=new Array(t.values.length),n=0;n<t.values.length;n+=1)e[n]={type:"insert",value:t.values[n]};Array.prototype.splice.apply(y,[o(t.index),0].concat(e))});var r=0;y.forEach(function(t,e){var n=t.type;"remove"===n||"moveSource"===n?r-=1:"similar"===n&&(t.expected=f[r+e],t.expectedIndex=r+e)});var s=y.reduce(function(t,e){return"similar"===e.type||"moveSource"===e.type||"moveTarget"===e.type?t:t+1},0),a=Math.max(c.length,f.length),u=function(e,n,r,i){if(a<=e||s<n)return setTimeout(function(){i(n)},0);h(c[e],f[e],e,e,function(t){if(!t)return n+=1,0===r?setTimeout(function(){u(e+1,n,Ff,i)}):u(e+1,n,r-1,i);l(c[e],f[e],e,e,function(t){return t||(n+=1),0===r?setTimeout(function(){u(e+1,n,Ff,i)}):u(e+1,n,r-1,i)})})};u(0,0,Ff,function(t){if(t<=s){var e;for(y=[],e=0;e<Math.min(c.length,f.length);e+=1)y.push({type:"similar",actualIndex:e,expectedIndex:e,value:c[e],expected:f[e]});if(c.length<f.length)for(;e<Math.max(c.length,f.length);e+=1)y.push({type:"insert",value:f[e]});else for(;e<Math.max(c.length,f.length);e+=1)y.push({type:"remove",value:c[e]})}var i=function(e,n,r){if(e>=y.length)return r();var t=y[e];return"similar"===t.type?l(t.value,t.expected,t.actualIndex,t.expectedIndex,function(t){if(t&&(y[e].type="equal"),0===n)return setTimeout(function(){i(e+1,Ff,r)});i(e+1,n-1,r)}):0===n?setTimeout(function(){i(e+1,Ff,r)}):i(e+1,n-1,r)};if(p){var n;if(Array.isArray(p))n=p;else{var r={};n=[],[c,f].forEach(function(t){Object.keys(t).forEach(function(t){/^(?:0|[1-9][0-9]*)$/.test(t)||r[t]||(r[t]=!0,n.push(t))}),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(function(t){r[t]||(r[t]=!0,n.push(t))})})}n.forEach(function(t){var e;if(t in c){var n=c[t];e=f[t],t in f&&void 0!==e?(e=f[t],y.push({type:"similar",expectedIndex:t,actualIndex:t,value:n,expected:e})):void 0!==n&&y.push({type:"remove",actualIndex:t,value:n})}else void 0!==(e=f[t])&&y.push({type:"insert",expectedIndex:t,value:e})})}i(0,Ff,function(){0<y.length&&(y[y.length-1].last=!0),d(y)})})})},Sf=e(function(t){var s=e(Wt),a=e(hn);function e(t){return t&&t.__esModule?t:{default:t}}var u=_n.objectIs,c=_n.extend;t.exports=function(t){function i(t,o,s){var a=t.getDiffMethod();if(a)return function(t){o.prefix(t,s);for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=a.call.apply(a,[this,t].concat(n));return o.suffix(t,s),i}}function o(t,e){function n(){return t.apply(this,e)}return n.prototype=t.prototype,new n}t.addAssertion("<any> [not] to be (ok|truthy)",function(t,e){!!e===!!t.flags.not&&t.fail()}),t.addAssertion("<any> [not] to be (ok|truthy) <string>",function(t,e,n){!!e===!!t.flags.not&&t.fail({errorMode:"bubble",message:n})}),t.addAssertion("<any> [not] to be <any>",function(t,e,n){u(e,n)===t.flags.not&&t.fail({label:"should be"})}),t.addAssertion("<string> [not] to be <string>",function(t,e,n){t(e,"[not] to equal",n)}),t.addAssertion("<boolean> [not] to be true",function(t,e){t(e,"[not] to be",!0)}),t.addAssertion("<boolean> [not] to be false",function(t,e){t(e,"[not] to be",!1)}),t.addAssertion("<any> [not] to be falsy",function(t,e){t(e,"[!not] to be truthy")}),t.addAssertion("<any> [not] to be falsy <string>",function(t,e,n){!!e!==!!t.flags.not&&t.fail({errorMode:"bubble",message:n})}),t.addAssertion("<any> [not] to be null",function(t,e){t(e,"[not] to be",null)}),t.addAssertion("<any> [not] to be undefined",function(t,e){t(void 0===e,"[not] to be truthy")}),t.addAssertion("<any> to be defined",function(t,e){t(e,"not to be undefined")}),t.addAssertion("<number|NaN> [not] to be NaN",function(t,e){t(isNaN(e),"[not] to be truthy")}),t.addAssertion("<number> [not] to be close to <number> <number?>",function(e,n,r,i){e.errorMode="bubble","number"!=typeof i&&(i=1e-9),e.withError(function(){e(Math.abs(n-r),"[not] to be less than or equal to",i)},function(t){e.fail(function(t){t.error("expected ").appendInspected(n).sp().error(e.testDescription).sp().appendInspected(r).sp().text("(epsilon: ").jsNumber(i.toExponential()).text(")")})})}),t.addAssertion("<any> [not] to be (a|an) <type>",function(t,e,n){t.argsOutput[0]=function(t){t.text(n.name)},t(n.identify(e),"[not] to be true")}),t.addAssertion("<any> [not] to be (a|an) <string>",function(t,e,n){n=/^reg(?:exp?|ular expression)$/.test(n)?"regexp":n,t.argsOutput[0]=function(t){t.jsString(n)},t.getType(n)||(t.errorMode="nested",t.fail(function(t){t.error("Unknown type:").sp().jsString(n)})),t(t.subjectType.is(n),"[not] to be truthy")}),t.addAssertion("<any> [not] to be (a|an) <function>",function(t,e,n){var r=_n.getFunctionName(n);r&&(t.argsOutput[0]=function(t){t.text(r)}),t(e instanceof n,"[not] to be truthy")}),t.addAssertion("<any> [not] to be one of <array>",function(t,e,n){for(var r=!1,i=0;i<n.length;i+=1)r=r||u(e,n[i]);r===t.flags.not&&t.fail()}),t.addAssertion("<any> [not] to be an (object|array)",function(t,e){t(e,"[not] to be an",t.alternations[0])}),t.addAssertion("<any> [not] to be a (boolean|number|string|function|regexp|regex|regular expression|date)",function(t,e){t(e,"[not] to be a",t.alternations[0])}),t.addAssertion("<string> to be (the empty|an empty|a non-empty) string",function(t,e){t(e,"a non-empty"===t.alternations[0]?"not to be empty":"to be empty")}),t.addAssertion("<array-like> to be (the empty|an empty|a non-empty) array",function(t,e){t(e,"a non-empty"===t.alternations[0]?"not to be empty":"to be empty")}),t.addAssertion("<string> to match <regexp>",function(e,n,r){return e.withError(function(){var t=n.match(r);return e(t,"to be truthy"),t},function(t){t.label="should match",e.fail(t)})}),t.addAssertion("<string> not to match <regexp>",function(e,o,s){return e.withError(function(){e(s.test(o),"to be false")},function(t){e.fail({label:"should not match",diff:function(n){n.inline=!1;var r=0;function i(t){r<t&&(n.text(o.substring(r,t)),r=t)}return o.replace(new RegExp(s.source,"g"),function(t,e){i(e),r+=t.length,n.removedHighlight(t)}),i(o.length),n}})})}),t.addAssertion("<object|function> [not] to have own property <string>",function(t,e,n){return t(e.hasOwnProperty(n),"[not] to be truthy"),e[n]}),t.addAssertion("<object|function> [not] to have (enumerable|configurable|writable) property <string>",function(t,e,n){var r=t.alternations[0];return t(Object.getOwnPropertyDescriptor(e,n)[r],"[not] to be truthy"),e[n]}),t.addAssertion("<object|function> [not] to have property <string>",function(t,e,n){var r=t.findTypeOf(e),i=r.is("function")?e[n]:r.valueForKey(e,n);return t(i,"[!not] to be undefined"),i}),t.addAssertion("<object|function> to have [own] property <string> <any>",function(e,t,n,r){return e(t,"to have [own] property",n).then(function(t){return e.argsOutput=function(){this.appendInspected(n).sp().error("with a value of").sp().appendInspected(r)},e(t,"to equal",r),t})}),t.addAssertion("<object|function> [not] to have [own] properties <array>",function(e,n,t){var r=[];t.forEach(function(t){"string"!=typeof t&&"number"!=typeof t&&r.push(t)}),0<r.length&&(e.errorMode="nested",e.fail(function(){this.error("All expected properties must be passed as strings or numbers, but these are not:").indentLines(),r.forEach(function(t){this.nl().i().appendInspected(t)},this),this.outdentLines()})),t.forEach(function(t){e(n,"[not] to have [own] property",String(t))})}),t.addAssertion("<object|function> to have [own] properties <object>",function(s,a,u){s.withError(function(){Object.keys(u).forEach(function(t){var e=u[t];void 0===e?s(a,"not to have [own] property",t):s(a,"to have [own] property",t,e)})},function(t){s.fail({diff:function(t,e){t.inline=!1;var n=c({},u),r={},i=s.findTypeOf(a).getKeys(a);for(var o in a)a.hasOwnProperty(o)||i.push(o);return i.forEach(function(t){s.flags.own&&!a.hasOwnProperty(t)||t in u||(n[t]=a[t]),s.flags.own&&!a.hasOwnProperty(t)||t in r||(r[t]=a[t])}),_n.wrapConstructorNameAroundOutput(e(r,n),a)}})})}),t.addAssertion("<string|array-like> [not] to have length <number>",function(t,e,n){t.flags.not||(t.errorMode="nested"),t(e.length,"[not] to be",n)}),t.addAssertion("<string|array-like> [not] to be empty",function(t,e){t(e,"[not] to have length",0)}),t.addAssertion("<string|array-like|object> to be non-empty",function(t,e){t(e,"not to be empty")}),t.addAssertion("<object> to [not] [only] have keys <array>",function(t,u,n){var e={},c=t.findTypeOf(u),f=c.getKeys(u);if(f.forEach(function(t){e[t]=!0}),!t.flags.not||0!==n.length){var r=n.every(function(t){return e[t]});t.flags.only?(t(r,"to be truthy"),t.withError(function(){t(f.length===n.length,"[not] to be truthy")},function(){t.fail({diff:!t.flags.not&&function(i,t,o,e){i.inline=!0;var s={};n.forEach(function(t){s[t]=!0});var a=c.is("array-like");return c.prefix(i,u),i.nl().indentLines(),f.forEach(function(t,e){var n=c.property(i.clone(),t,o(c.valueForKey(u,t)),a),r=c.delimiter(i.clone(),e,f.length);i.i().block(function(){this.append(n).amend(r),s[t]||this.sp().annotationBlock(function(){this.error("should be removed")})}).nl()}),i.outdentLines(),c.suffix(i,u),i}})})):t(r,"[not] to be truthy")}}),t.addAssertion("<object> [not] to be empty",function(t,e){if(t.flags.not&&!t.findTypeOf(e).getKeys(e).length)return t.fail();t(e,"to [not] only have keys",[])}),t.addAssertion("<object> not to have keys <array>",function(t,e,n){t(e,"to not have keys",n)}),t.addAssertion("<object> not to have key <string>",function(t,e,n){t(e,"to not have keys",[n])}),t.addAssertion("<object> not to have keys <string+>",function(t,e,n){t(e,"to not have keys",Array.prototype.slice.call(arguments,2))}),t.addAssertion("<object> to [not] [only] have key <string>",function(t,e,n){t(e,"to [not] [only] have keys",[n])}),t.addAssertion("<object> to [not] [only] have keys <string+>",function(t,e){t(e,"to [not] [only] have keys",Array.prototype.slice.call(arguments,2))}),t.addAssertion("<string> [not] to contain <string+>",function(e,c){var n=Array.prototype.slice.call(arguments,2);n.forEach(function(t){if(""===t)throw new Error("The '"+e.testDescription+"' assertion does not support the empty string")}),e.withError(function(){n.forEach(function(t){e(-1!==c.indexOf(t),"[not] to be truthy")})},function(t){e.fail({diff:function(o){o.inline=!1;var s=0;function a(t){s<t&&(o.text(c.substring(s,t)),s=t)}if(e.flags.not)c.replace(new RegExp(n.map(function(t){return _n.escapeRegExpMetaChars(t)}).join("|"),"g"),function(t,e){a(e),s+=t.length,o.removedHighlight(t)}),a(c.length);else{var u=[];n.forEach(function(t){for(var e=t,n=!1;1<e.length;){var r=!1;s=-1;for(var i=void 0;-1!==(i=c.indexOf(e,s+1))&&(r=!0,u.push({startIndex:i,endIndex:i+e.length,partial:n})),-1!==(s=i););if(r)break;e=t.substr(0,e.length-1),n=!0}}),s=0,u.sort(function(t,e){return t.startIndex-e.startIndex}).forEach(function(t){var e=t.startIndex,n=t.endIndex,r=t.partial;a(e);var i=Math.max(e,s);i<n&&(r?o.partialMatch(c.substring(i,n)):o.match(c.substring(i,n)),s=n)}),a(c.length)}return o}})})}),t.addAssertion("<array-like> [not] to contain <any+>",function(n,i){var o=Array.prototype.slice.call(arguments,2);n.withError(function(){o.forEach(function(e){n(i&&Array.prototype.some.call(i,function(t){return n.equal(t,e)}),"[not] to be truthy")})},function(t){n.fail({diff:n.flags.not&&function(t,e,n,r){return e(i,Array.prototype.filter.call(i,function(e){return!o.some(function(t){return r(e,t)})}))}})})}),t.addAssertion(["<string> [not] to begin with <string>","<string> [not] to start with <string>"],function(n,r,i){if(""===i)throw new Error("The '"+n.testDescription+"' assertion does not support a prefix of the empty string");var o=!1,s=_n.truncateSubjectStringForBegin(r,i);null===s?s=r:o=!0,n.subjectOutput=function(t){t=t.jsString("'"+s.replace(/\n/g,"\\n")+"'"),o&&t.jsComment("...")},n.withError(function(){n(r.substr(0,i.length),"[not] to equal",i)},function(){n.fail({diff:function(t){if(t.inline=!1,n.flags.not)t.removedHighlight(i).text(r.substr(i.length));else{for(var e=0;r[e]===i[e];)e+=1;if(0===e)return null;t.partialMatch(r.substr(0,e)).text(s.substr(e)).jsComment(o?"...":"")}return t}})})}),t.addAssertion("<string> [not] to end with <string>",function(n,r,i){if(""===i)throw new Error("The '"+n.testDescription+"' assertion does not support a suffix of the empty string");var o=!1,s=_n.truncateSubjectStringForEnd(r,i);null===s?s=r:o=!0,n.subjectOutput=function(t){o&&(t=t.jsComment("...")),t.jsString("'"+s.replace(/\n/g,"\\n")+"'")},n.withError(function(){n(r.substr(-i.length),"[not] to equal",i)},function(){n.fail({diff:function(t){if(t.inline=!1,n.flags.not)t.text(r.substr(0,r.length-i.length)).removedHighlight(i);else{for(var e=0;s[s.length-1-e]===i[i.length-1-e];)e+=1;if(0===e)return null;t.jsComment(o?"...":"").text(s.substr(0,s.length-e)).partialMatch(s.substr(s.length-e,s.length))}return t}})})}),t.addAssertion("<number> [not] to be finite",function(t,e){t(isFinite(e),"[not] to be truthy")}),t.addAssertion("<number> [not] to be infinite",function(t,e){t(!isNaN(e)&&!isFinite(e),"[not] to be truthy")}),t.addAssertion("<number> [not] to be within <number> <number>",function(t,e,n,r){t.argsOutput=function(t){t.appendInspected(n).text("..").appendInspected(r)},t(n<=e&&e<=r,"[not] to be truthy")}),t.addAssertion("<string> [not] to be within <string> <string>",function(t,e,n,r){t.argsOutput=function(t){t.appendInspected(n).text("..").appendInspected(r)},t(n<=e&&e<=r,"[not] to be truthy")}),t.addAssertion("<number> [not] to be (less than|below) <number>",function(t,e,n){t(e<n,"[not] to be truthy")}),t.addAssertion("<string> [not] to be (less than|below) <string>",function(t,e,n){t(e<n,"[not] to be truthy")}),t.addAssertion("<number> [not] to be less than or equal to <number>",function(t,e,n){t(e<=n,"[not] to be truthy")}),t.addAssertion("<string> [not] to be less than or equal to <string>",function(t,e,n){t(e<=n,"[not] to be truthy")}),t.addAssertion("<number> [not] to be (greater than|above) <number>",function(t,e,n){t(n<e,"[not] to be truthy")}),t.addAssertion("<string> [not] to be (greater than|above) <string>",function(t,e,n){t(n<e,"[not] to be truthy")}),t.addAssertion("<number> [not] to be greater than or equal to <number>",function(t,e,n){t(n<=e,"[not] to be truthy")}),t.addAssertion("<string> [not] to be greater than or equal to <string>",function(t,e,n){t(n<=e,"[not] to be truthy")}),t.addAssertion("<number> [not] to be positive",function(t,e){t(e,"[not] to be greater than",0)}),t.addAssertion("<number> [not] to be negative",function(t,e){t(e,"[not] to be less than",0)}),t.addAssertion("<any> to equal <any>",function(e,n,r){e.withError(function(){e(e.equal(r,n),"to be truthy")},function(t){e.fail({label:"should equal",diff:function(t,e){return e(n,r)}})})}),t.addAssertion("<any> not to equal <any>",function(t,e,n){t(t.equal(n,e),"to be falsy")}),t.addAssertion("<function> to error",function(t,e){return t.promise(function(){return e()}).then(function(){t.fail()},function(t){return t})}),t.addAssertion("<function> to error [with] <any>",function(t,e,n){return t(e,"to error").then(function(e){return t.errorMode="nested",t.withError(function(){return t(e,"to satisfy",n)},function(t){throw t.originalError=e,t})})}),t.addAssertion("<function> not to error",function(t,e){var n=!1;return t.promise(function(){try{return e()}catch(t){throw n=!0,t}}).caught(function(e){t.errorMode="nested",t.fail({output:function(t){t.error(n?"threw":"returned promise rejected with").error(": ").appendErrorMessage(e)},originalError:e})})}),t.addAssertion("<function> not to throw",function(t,e){var n=!1,r=void 0;try{e()}catch(t){r=t,n=!0}n&&(t.errorMode="nested",t.fail({output:function(t){t.error("threw: ").appendErrorMessage(r)},originalError:r}))}),t.addAssertion("<function> to (throw|throw error|throw exception)",function(t,e){try{e()}catch(t){return t}t.errorMode="nested",t.fail("did not throw")}),t.addAssertion("<object> to satisfy <function>",function(t){return t.fail()}),t.addAssertion("<function> to throw (a|an) <function>",function(e,t,n){var r=_n.getFunctionName(n);return r&&(e.argsOutput[0]=function(t){t.jsFunctionName(r)}),e.errorMode="nested",e(t,"to throw").then(function(t){e(t,"to be a",n)})}),t.addAssertion("<function> to (throw|throw error|throw exception) <any>",function(t,e,n){return t.errorMode="nested",t(e,"to throw").then(function(e){return t.errorMode="nested",t.withError(function(){return t(e,"to satisfy",n)},function(t){throw t.originalError=e,t})})}),t.addAssertion("<function> to have arity <number>",function(t,e,n){t(e.length,"to equal",n)}),t.addAssertion(["<object> to have values [exhaustively] satisfying <any>","<object> to have values [exhaustively] satisfying <assertion>","<object> to be (a map|a hash|an object) whose values [exhaustively] satisfy <any>","<object> to be (a map|a hash|an object) whose values [exhaustively] satisfy <assertion>"],function(e,t,n){e.errorMode="nested",e(t,"not to be empty"),e.errorMode="bubble";var r=e.subjectType.getKeys(t),i={};return r.forEach(function(t){i[t]="string"==typeof n?e.it(function(t){return e.shift(t)}):n}),e.withError(function(){return e(t,"to [exhaustively] satisfy",i)},function(n){e.fail({message:function(t){t.append(e.standardErrorMessage(t.clone(),{compact:n&&n._isUnexpected&&n.hasDiff()}))},diff:function(t){var e=n.getDiff({output:t});return e.inline=!0,e}})})}),t.addAssertion(["<array-like> to have items [exhaustively] satisfying <any>","<array-like> to have items [exhaustively] satisfying <assertion>","<array-like> to be an array whose items [exhaustively] satisfy <any>","<array-like> to be an array whose items [exhaustively] satisfy <assertion>"],function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.errorMode="nested",e(t,"not to be empty"),e.errorMode="bubble",e.withError(function(){return e.apply(void 0,[t,"to have values [exhaustively] satisfying"].concat(r))},function(n){e.fail({message:function(t){t.append(e.standardErrorMessage(t.clone(),{compact:n&&n._isUnexpected&&n.hasDiff()}))},diff:function(t){var e=n.getDiff({output:t});return e.inline=!0,e}})})}),t.addAssertion(["<object> to have keys satisfying <any>","<object> to have keys satisfying <assertion>","<object> to be (a map|a hash|an object) whose (keys|properties) satisfy <any>","<object> to be (a map|a hash|an object) whose (keys|properties) satisfy <assertion>"],function(t,e){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];t.errorMode="nested",t(e,"not to be empty"),t.errorMode="default";var o=t.subjectType.getKeys(e);return t.apply(void 0,[o,"to have items satisfying"].concat(r))}),t.addAssertion(["<object> [not] to have a value [exhaustively] satisfying <any>","<object> [not] to have a value [exhaustively] satisfying <assertion>"],function(n,o,r){n.errorMode="nested",n(o,"not to be empty"),n.errorMode="bubble";var s=n.findTypeOf(o),a=s.getKeys(o),t=!!n.flags.not,u=new Array(a.length);n.withError(function(){return n.promise[t?"all":"any"](a.map(function(t){var e=void 0;return e="string"==typeof r?n.it(function(t){return n.shift(t)}):r,u[t]=n.promise(function(){return n(s.valueForKey(o,t),"[not] to [exhaustively] satisfy",e)}),u[t]}))},function(e){n.fail({message:function(t){t.append(n.standardErrorMessage(t.clone(),{compact:e&&e._isUnexpected&&e.hasDiff()}))},diff:n.flags.not&&function(t,e,n,r){var i=s.is("array-like")?[]:{};return a.forEach(function(t){u[t].isFulfilled()&&(i[t]=s.valueForKey(o,t))}),e(o,i)}})})}),t.addAssertion(["<array-like> [not] to have an item [exhaustively] satisfying <any>","<array-like> [not] to have an item [exhaustively] satisfying <assertion>"],function(t,e){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.errorMode="nested",t(e,"not to be empty"),t.errorMode="default",t.apply(void 0,[e,"[not] to have a value [exhaustively] satisfying"].concat(r))}),t.addAssertion("<object> to be canonical",function(i,t){var o=[];!function e(n){var t=void 0;for(t=0;t<o.length;t+=1)if(o[t]===n)return;if(n&&"object"===(void 0===n?"undefined":(0,a.default)(n))){var r=Object.keys(n);for(t=0;t<r.length-1;t+=1)i(r[t],"to be less than",r[t+1]);o.push(n),r.forEach(function(t){e(n[t])}),o.pop()}}(t)}),t.addAssertion("<Error> to have message <any>",function(t,e,n){return t.errorMode="nested",t(e.isUnexpected?e.getErrorMessage("text").toString():e.message,"to satisfy",n)}),t.addAssertion("<Error> to [exhaustively] satisfy <Error>",function(r,i,t){r(i.constructor,"to be",t.constructor);var o=r.argTypes[0].unwrap(t);return r.withError(function(){return r(i,"to [exhaustively] satisfy",o)},function(t){r.fail({diff:function(t,e){t.inline=!1;var n=r.subjectType.unwrap(i);return _n.wrapConstructorNameAroundOutput(e(n,o),i)}})})}),t.addAssertion("<Error> to [exhaustively] satisfy <object>",function(t,e,n){var r=t.argTypes[0],i=t.subjectType.getKeys(e),o=r.getKeys(n),s={};return i.concat(o).forEach(function(t){s[t]=e[t]}),t(s,"to [exhaustively] satisfy",n)}),t.addAssertion("<Error> to [exhaustively] satisfy <regexp|string|any>",function(t,e,n){return t(e.message,"to [exhaustively] satisfy",n)}),t.addAssertion("<UnexpectedError> to [exhaustively] satisfy <regexp|string>",function(t,e,n){return t.errorMode="bubble",t(e,"to have message",n)}),t.addAssertion("<binaryArray> to [exhaustively] satisfy <expect.it>",function(t,e,n){return t.withError(function(){return n(e,t.context)},function(i){t.fail({diff:function(t,e,n,r){return t.inline=!1,t.appendErrorMessage(i)}})})}),t.addAssertion("<any|Error> to [exhaustively] satisfy <expect.it>",function(t,e,n){return t.promise(function(){return n(e)})}),void 0!==sc&&t.addAssertion("<Buffer> [when] decoded as <string> <assertion?>",function(t,e,n){return t.shift(e.toString(n))}),t.addAssertion("<any> not to [exhaustively] satisfy [assertion] <any>",function(t,r,i){return t.promise(function(e,n){return t.promise(function(){return t(r,"to [exhaustively] satisfy [assertion]",i)}).then(function(){try{t.fail()}catch(t){n(t)}}).caught(function(t){t&&t._isUnexpected?e():n(t)})})}),t.addAssertion("<any> to [exhaustively] satisfy assertion <any>",function(t,e,n){return t.errorMode="bubble",t(e,"to [exhaustively] satisfy",n)}),t.addAssertion("<any> to [exhaustively] satisfy assertion <assertion>",function(t,e){return t.errorMode="bubble",t.shift()}),t.addAssertion("<any|object> to [exhaustively] satisfy [assertion] <expect.it>",function(t,e,n){return t.withError(function(){return n(e,t.context)},function(e){t.fail({diff:function(t){return t.inline=!1,t.appendErrorMessage(e)}})})}),t.addAssertion("<regexp> to [exhaustively] satisfy <regexp>",function(t,e,n){t(e,"to equal",n)}),t.addAssertion("<string> to [exhaustively] satisfy <regexp>",function(t,e,n){return t.errorMode="bubble",t(e,"to match",n)}),t.addAssertion("<function> to [exhaustively] satisfy <function>",function(t,e,n){t.errorMode="bubble",t(e,"to be",n)}),t.addAssertion("<binaryArray> to [exhaustively] satisfy <binaryArray>",function(t,e,n){t.errorMode="bubble",t(e,"to equal",n)}),t.addAssertion("<any> to [exhaustively] satisfy <any>",function(t,e,n){t.errorMode="bubble",t(e,"to equal",n)}),t.addAssertion("<array-like> to [exhaustively] satisfy <array-like>",function(f,l,h){f.errorMode="bubble";var p=f.subjectType,d=p.getKeys(l),y=f.argTypes[0],g=y.getKeys(h).filter(function(t){return _n.numericalRegExp.test(t)||"symbol"===(void 0===t?"undefined":(0,a.default)(t))||void 0!==y.valueForKey(h,t)||void 0!==p.valueForKey(l,t)}),v={};return g.forEach(function(n){v[n]=f.promise(function(){var t=p.valueForKey(l,n),e=y.valueForKey(h,n);return f.findTypeOf(e).is("expect.it")?(f.context.thisObject=l,e(t,f.context)):f(t,"to [exhaustively] satisfy",e)})}),f.promise.all([f.promise(function(){var e={};d.forEach(function(t){e[t]=1}),g.forEach(function(t){e[t]||!_n.numericalRegExp.test(t)&&!f.flags.exhaustively?delete e[t]:e[t]=2});var t=Object.keys(e).filter(function(t){return _n.numericalRegExp.test(t)||"symbol"===(void 0===t?"undefined":(0,a.default)(t))||void 0!==p.valueForKey(l,t)&&2===e[t]});f(0===t.length,"to be truthy")}),f.promise.all(v)]).caught(function(){var u=0;return f.promise.settle(v).then(function(){var c=new Array(l.length);for(u=0;u<l.length;u+=1)c[u]=new Array(h.length),u<h.length&&(c[u][u]=v[u].isFulfilled()||v[u].reason());if(10<l.length||10<h.length){var t=[];for(u=0;u<l.length;u+=1){var e=v[u];u<h.length?t.push({type:e.isFulfilled()?"equal":"similar",value:l[u],expected:h[u],actualIndex:u,expectedIndex:u,last:u===Math.max(l.length,h.length)-1}):t.push({type:"remove",value:l[u],actualIndex:u,last:u===l.length-1})}for(u=l.length;u<h.length;u+=1)t.push({type:"insert",value:h[u],expectedIndex:u});return a(t)}var s=!1,n=_n.duplicateArrayLikeUsingType(l,p),r=_n.duplicateArrayLikeUsingType(h,y),i=!p.numericalPropertiesOnly&&_n.uniqueNonNumericalStringsAndSymbols(d,g),o=ff(n,r,function(t,e,n,r){c[n]=c[n]||[];var i=c[n][r];if(void 0!==i)return!0===i;var o=void 0;try{o=f(t,"to [exhaustively] satisfy",e)}catch(t){return ba(t),c[n][r]=t,!1}return o.then(function(){},function(){}),o.isPending()?!(s=!0):c[n][r]=!0},function(t,e){return p.similar(t,e)},{includeNonNumericalProperties:i});return s?f.promise(function(t,e){kf(l,h,function(t,e,n,r,i){c[n]=c[n]||[];var o=c[n][r];if(void 0!==o)return i(!0===o);f.promise(function(){return f(t,"to [exhaustively] satisfy",e)}).then(function(){c[n][r]=!0,i(!0)},function(t){c[n][r]=t,i(!1)})},function(t,e,n,r,i){i(p.similar(t,e))},i,t)}).then(a):a(o);function a(s){f.errorMode="default",f.fail({diff:function(a,t,u,e){a.inline=!0;var n=s.reduce(function(t,e,n){return"insert"===e.type?t:n},-1),r=p.prefix(a.clone(),l);a.append(r).nl(r.isEmpty()?0:1),p.indent&&a.indentLines();var i=_n.packArrows(s);a.arrowsAlongsideChangeOutputs(i,s.map(function(i,t){var o=p.delimiter(a.clone(),t,n+1),s=i.type;return"moveTarget"===s?a.clone():a.clone().block(function(){if("moveSource"===s){var t=p.property(a.clone(),i.actualIndex,u(i.value),!0);this.append(t).amend(o).sp().error("// should be moved")}else if("insert"===s)this.annotationBlock(function(){if(f.findTypeOf(i.value).is("expect.it"))this.error("missing: ").block(function(){this.omitSubject=void 0;var t=v[i.expectedIndex];t.isRejected()?this.appendErrorMessage(t.reason()):this.appendInspected(i.value)});else{var t=void 0!==i.actualIndex?i.actualIndex:i.expectedIndex,e=p.property(a.clone(),t,u(i.value),!0);this.error("missing ").append(e)}});else{var r=p.property(a.clone(),i.actualIndex,u(i.value),!0);this.block(function(){if("remove"===s)this.append(r).amend(o).sp().error("// should be removed");else if("equal"===s)this.append(r).amend(o);else{var e=c[i.actualIndex][i.expectedIndex],n=e&&!0!==e&&e.getDiff({output:a.clone()});n&&n.inline?this.append(n).amend(o):this.append(r).amend(o).sp().annotationBlock(function(){this.omitSubject=i.value;var t=e.getLabel();t?(this.error(t).sp().block(u(i.expected)),n&&this.nl(2).append(n)):this.appendErrorMessage(e)})}})}})})),p.indent&&a.outdentLines();var o=p.suffix(a.clone(),l);return a.nl(o.isEmpty()?0:1).append(o),a}})}})})}),t.addAssertion("<object> to [exhaustively] satisfy <object>",function(v,m,b){var _=v.argTypes[0],w=v.subjectType,t=w.is("array-like");if(m!==b){_.is("array-like")&&!t&&v.fail();var E=w.getKeys(m),e=_.getKeys(b),i=w.uniqueKeys(E,e),x={},s=!1;return i.forEach(function(t,e){var n=w.hasKey(m,t),r=_.hasKey(b,t,!0)?_.valueForKey(b,t):void 0,i=v.findTypeOf(r);if(v.flags.exhaustively)i.is("expect.it")&&!n&&(s=!0);else if(n&&void 0===r)return;var o=n?w.valueForKey(m,t):void 0;x[t]=v.promise(function(){return i.is("expect.it")?(v.context.thisObject=m,r(o,v.context)):v(o,"to [exhaustively] satisfy",r)})}),v.promise.all([v.promise(function(){if(s)throw new Error("exhaustive comparison failure")}),v.promise.all(x)]).caught(function(){return v.promise.settle(x).then(function(){v.fail({diff:function(p,t,d,e){p.inline=!0;var y=w.is("array-like"),g=i.filter(function(t){return w.hasKey(m,t)||void 0!==_.valueForKey(b,t)}),n=w.prefix(p.clone(),m);p.append(n).nl(n.isEmpty()?0:1),w.indent&&p.indentLines(),g.forEach(function(c,f){var l=w.valueForKey(m,c),h=_.valueForKey(b,c);p.nl(0<f?1:0).i().block(function(){var t=void 0,e=p.clone(),n=void 0;Object.prototype.hasOwnProperty.call(x,c)&&x[c].isRejected()&&(n=x[c].reason());var r=w.is("array-like")&&!w.hasKey(m,c),i=!0;if(p.omitSubject=l,_.hasKey(b,c))if(w.hasKey(m,c)){if(n||r){var o=n&&n.getDiff({output:p});i=!o||o.inline,r&&p.error("// missing").sp(),o&&o.inline?t=o:v.findTypeOf(h).is("expect.it")?(i=!1,e.appendErrorMessage(n)):!o||o&&!o.inline?(e.error(n&&n.getLabel()||"should satisfy").sp().block(d(h)),o&&e.nl(2).append(o)):t=o}}else t=v.findTypeOf(h).is("expect.it")?x[c].isRejected()?(p.error("// missing:").sp(),p.clone().appendErrorMessage(x[c].reason())):(p.error("// missing").sp(),p.clone().error("should satisfy").sp().block(d(b[c]))):(p.error("// missing").sp(),d(h));else v.flags.exhaustively?e.error("should be removed"):n=null;if(t||(t=r||!w.hasKey(m,c)?p.clone():d(l)),!(r||f>=E.length-1)){var s=w.delimiter(p.clone(),f,g.length);t.amend(s)}var a=!i&&p.preferredWidth<this.size().width+t.size().width+e.size().width;e.isEmpty()||(t.isEmpty()||(a?t.nl():t.sp()),t.annotationBlock(function(){this.append(e)})),i||(t=p.clone().block(t));var u=w.property(p.clone(),c,t,y);this.append(u)})}),w.indent&&p.outdentLines();var r=w.suffix(p.clone(),m);return p.nl(r.isEmpty()?0:1).append(r)}})})})}}),t.addAssertion("<wrapperObject> to [exhaustively] satisfy <wrapperObject>",function(e,n,t){var r=e.findCommonType(n,t);return e(r.is("wrapperObject"),"to be truthy"),e.withError(function(){return e(r.unwrap(n),"to [exhaustively] satisfy",r.unwrap(t))},function(t){e.fail({label:t.getLabel(),diff:i(t,r,n)})})}),t.addAssertion("<wrapperObject> to [exhaustively] satisfy <any>",function(e,n,t){var r=e.subjectType;return e.withError(function(){return e(r.unwrap(n),"to [exhaustively] satisfy",t)},function(t){e.fail({label:t.getLabel(),diff:i(t,r,n)})})}),t.addAssertion("<function> [when] called with <array-like> <assertion?>",function(t,e,n){t.errorMode="nested",t.argsOutput[0]=function(t){t.appendItems(n,", ")};var r=t.context.thisObject||null;return t.shift(e.apply(r,n))}),t.addAssertion("<function> [when] called <assertion?>",function(t,e){t.errorMode="nested";var n=t.context.thisObject||null;return t.shift(e.call(n))}),t.addAssertion(["<array-like> [when] passed as parameters to [async] <function> <assertion?>","<array-like> [when] passed as parameters to [constructor] <function> <assertion?>"],function(n,t,e){n.errorMode="nested";var r=t;return n.flags.async?n.promise(function(t){r=[].concat((0,s.default)(r),[t(function(t,e){return n(t,"to be falsy"),n.shift(e)})]),e.apply(void 0,(0,s.default)(r))}):n.shift(n.flags.constructor?o(e,r):e.apply(void 0,(0,s.default)(r)))}),t.addAssertion(["<any> [when] passed as parameter to [async] <function> <assertion?>","<any> [when] passed as parameter to [constructor] <function> <assertion?>"],function(n,t,e){n.errorMode="nested";var r=[t];return n.flags.async?n.promise(function(t){r=[].concat((0,s.default)(r),[t(function(t,e){return n(t,"to be falsy"),n.shift(e)})]),e.apply(void 0,(0,s.default)(r))}):n.shift(n.flags.constructor?o(e,r):e.apply(void 0,(0,s.default)(r)))}),t.addAssertion(["<array-like> [when] sorted [numerically] <assertion?>","<array-like> [when] sorted by <function> <assertion?>"],function(t,e,n){return t.flags.numerically&&(n=function(t,e){return t-e}),t.shift(Array.prototype.slice.call(e).sort("function"==typeof n?n:void 0))}),t.addAssertion("<Promise> to be rejected",function(t,n){return t.errorMode="nested",t.promise(function(){return n}).then(function(e){t.fail(function(t){t.appendInspected(n).sp().text("unexpectedly fulfilled"),void 0!==e&&t.sp().text("with").sp().appendInspected(e)})},function(t){return t})}),t.addAssertion("<function> to be rejected",function(t,e){return t.errorMode="nested",t(t.promise(function(){return e()}),"to be rejected")}),t.addAssertion(["<Promise> to be rejected with <any>","<Promise> to be rejected with error [exhaustively] satisfying <any>"],function(t,e,n){return t.errorMode="nested",t(e,"to be rejected").tap(function(e){return t.withError(function(){return t(e,"to [exhaustively] satisfy",n)},function(t){throw t.originalError=e,t})})}),t.addAssertion(["<function> to be rejected with <any>","<function> to be rejected with error [exhaustively] satisfying <any>"],function(t,e,n){return t.errorMode="nested",t(t.promise(function(){return e()}),"to be rejected with error [exhaustively] satisfying",n)}),t.addAssertion("<Promise> to be fulfilled",function(t,n){return t.errorMode="nested",t.promise(function(){return n}).caught(function(e){t.fail({output:function(t){t.appendInspected(n).sp().text("unexpectedly rejected"),void 0!==e&&t.sp().text("with").sp().appendInspected(e)},originalError:e})})}),t.addAssertion("<function> to be fulfilled",function(t,e){return t.errorMode="nested",t(t.promise(function(){return e()}),"to be fulfilled")}),t.addAssertion(["<Promise> to be fulfilled with <any>","<Promise> to be fulfilled with value [exhaustively] satisfying <any>"],function(e,t,n){return e.errorMode="nested",e(t,"to be fulfilled").tap(function(t){return e(t,"to [exhaustively] satisfy",n)})}),t.addAssertion(["<function> to be fulfilled with <any>","<function> to be fulfilled with value [exhaustively] satisfying <any>"],function(t,e,n){return t.errorMode="nested",t(t.promise(function(){return e()}),"to be fulfilled with value [exhaustively] satisfying",n)}),t.addAssertion("<Promise> when rejected <assertion>",function(n,r,i){return n.errorMode="nested",n.promise(function(){return r}).then(function(e){"string"==typeof i&&(n.argsOutput=function(t){t.error(i);var e=n.args.slice(1);0<e.length&&t.sp().appendItems(e,", ")}),n.fail(function(t){t.appendInspected(r).sp().text("unexpectedly fulfilled"),void 0!==e&&t.sp().text("with").sp().appendInspected(e)})},function(e){e.isOperational&&!e.propertyIsEnumerable("isOperational")&&delete e.isOperational,n.withError(function(){return n.shift(e)},function(t){throw t.originalError=e,t})})}),t.addAssertion("<function> when rejected <assertion>",function(t,e){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.errorMode="nested",t.apply(void 0,[t.promise(function(){return e()}),"when rejected"].concat(r))}),t.addAssertion("<Promise> when fulfilled <assertion>",function(n,r,i){return n.errorMode="nested",n.promise(function(){return r}).then(function(t){return n.shift(t)},function(e){n.argsOutput=function(t){t.error(i);var e=n.args.slice(1);0<e.length&&t.sp().appendItems(e,", ")},n.fail({output:function(t){t.appendInspected(r).sp().text("unexpectedly rejected"),void 0!==e&&t.sp().text("with").sp().appendInspected(e)},originalError:e})})}),t.addAssertion("<function> when fulfilled <assertion>",function(t,e){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.errorMode="nested",t.apply(void 0,[t.promise(function(){return e()}),"when fulfilled"].concat(r))}),t.addAssertion("<function> to call the callback",function(e,n){return e.errorMode="nested",e.promise(function(t){var r=!1,i=!1,o=void 0;var s=t(function(){return i&&e.fail(function(){this.error("The callback was called twice")}),o});if(n(function(){if(o)i=!0;else{for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];o=Array.prototype.slice.call(e)}r&&setTimeout(s,0)}),r=!0,o)return s()})}),t.addAssertion("<function> to call the callback without error",function(n,t){return n(t,"to call the callback").then(function(t){var e=t[0];if(!e)return t.slice(1);n.errorMode="nested",n.fail({message:function(t){t.error("called the callback with: "),e.getErrorMessage?t.appendErrorMessage(e):t.appendInspected(e)}})})}),t.addAssertion("<function> to call the callback with error",function(e,t){return e(t,"to call the callback").spread(function(t){return e(t,"to be truthy"),t})}),t.addAssertion("<function> to call the callback with error <any>",function(e,t,n){return e(t,"to call the callback with error").tap(function(t){e.errorMode="nested",e(t,"to satisfy",n)})})}});t(Sf);var Cf=e(function(t){t.exports=Ra.create().use(Hu).use(vf).use(Sf).freeze(),la.prototype[Ma]=function(){return t.exports.createOutput(Yi.defaultFormat).appendInspected(this).toString()}});return Cf});
//# sourceMappingURL=unexpected.js.map
